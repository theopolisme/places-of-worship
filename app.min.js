/**
 * @license almond 0.3.0 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/*
 Leaflet 0.8-dev (d518ad5), a JS library for interactive maps. http://leafletjs.com
 (c) 2010-2015 Vladimir Agafonkin, (c) 2010-2011 CloudMade
*/

/**
 * <https://github.com/theopolisme/events>
 * Copyright (c) 2014 Theopolisme <theopolismewiki@gmail.com>
 */

/*! jQuery v2.1.3 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */

var requirejs,require,define;(function(e){function h(e,t){return f.call(e,t)}function p(e,t){var n,r,i,s,o,a,f,l,h,p,d,v=t&&t.split("/"),m=u.map,g=m&&m["*"]||{};if(e&&e.charAt(0)===".")if(t){v=v.slice(0,v.length-1),e=e.split("/"),o=e.length-1,u.nodeIdCompat&&c.test(e[o])&&(e[o]=e[o].replace(c,"")),e=v.concat(e);for(h=0;h<e.length;h+=1){d=e[h];if(d===".")e.splice(h,1),h-=1;else if(d===".."){if(h===1&&(e[2]===".."||e[0]===".."))break;h>0&&(e.splice(h-1,2),h-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((v||g)&&m){n=e.split("/");for(h=n.length;h>0;h-=1){r=n.slice(0,h).join("/");if(v)for(p=v.length;p>0;p-=1){i=m[v.slice(0,p).join("/")];if(i){i=i[r];if(i){s=i,a=h;break}}}if(s)break;!f&&g&&g[r]&&(f=g[r],l=h)}!s&&f&&(s=f,a=l),s&&(n.splice(0,a,s),e=n.join("/"))}return e}function d(t,r){return function(){var i=l.call(arguments,0);return typeof i[0]!="string"&&i.length===1&&i.push(null),n.apply(e,i.concat([t,r]))}}function v(e){return function(t){return p(t,e)}}function m(e){return function(t){s[e]=t}}function g(n){if(h(o,n)){var r=o[n];delete o[n],a[n]=!0,t.apply(e,r)}if(!h(s,n)&&!h(a,n))throw new Error("No "+n);return s[n]}function y(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function b(e){return function(){return u&&u.config&&u.config[e]||{}}}var t,n,r,i,s={},o={},u={},a={},f=Object.prototype.hasOwnProperty,l=[].slice,c=/\.js$/;r=function(e,t){var n,r=y(e),i=r[0];return e=r[1],i&&(i=p(i,t),n=g(i)),i?n&&n.normalize?e=n.normalize(e,v(t)):e=p(e,t):(e=p(e,t),r=y(e),i=r[0],e=r[1],i&&(n=g(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},i={require:function(e){return d(e)},exports:function(e){var t=s[e];return typeof t!="undefined"?t:s[e]={}},module:function(e){return{id:e,uri:"",exports:s[e],config:b(e)}}},t=function(t,n,u,f){var l,c,p,v,y,b=[],w=typeof u,E;f=f||t;if(w==="undefined"||w==="function"){n=!n.length&&u.length?["require","exports","module"]:n;for(y=0;y<n.length;y+=1){v=r(n[y],f),c=v.f;if(c==="require")b[y]=i.require(t);else if(c==="exports")b[y]=i.exports(t),E=!0;else if(c==="module")l=b[y]=i.module(t);else if(h(s,c)||h(o,c)||h(a,c))b[y]=g(c);else{if(!v.p)throw new Error(t+" missing "+c);v.p.load(v.n,d(f,!0),m(c),{}),b[y]=s[c]}}p=u?u.apply(s[t],b):undefined;if(t)if(l&&l.exports!==e&&l.exports!==s[t])s[t]=l.exports;else if(p!==e||!E)s[t]=p}else t&&(s[t]=u)},requirejs=require=n=function(s,o,a,f,l){if(typeof s=="string")return i[s]?i[s](o):g(r(s,o).f);if(!s.splice){u=s,u.deps&&n(u.deps,u.callback);if(!o)return;o.splice?(s=o,o=a,a=null):s=e}return o=o||function(){},typeof a=="function"&&(a=f,f=l),f?t(e,s,o,a):setTimeout(function(){t(e,s,o,a)},4),n},n.config=function(e){return n(e)},requirejs._defined=s,define=function(e,t,n){t.splice||(n=t,t=[]),!h(s,e)&&!h(o,e)&&(o[e]=[e,t,n])},define.amd={jQuery:!0}})(),define("almond",function(){}),!function(e,t,n){function r(){var t=e.L;i.noConflict=function(){return e.L=t,this},e.L=i}var i={version:"0.8-dev"};"object"==typeof module&&"object"==typeof module.exports?module.exports=i:"function"==typeof define&&define.amd&&define("leaflet",i),"undefined"!=typeof e&&r(),i.Util={extend:function(e){var t,n,r,i;for(n=1,r=arguments.length;r>n;n++){i=arguments[n];for(t in i)e[t]=i[t]}return e},create:Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}(),bind:function(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var r=n.call(arguments,2);return function(){return e.apply(t,r.length?r.concat(n.call(arguments)):arguments)}},stamp:function(e){return e._leaflet_id=e._leaflet_id||++i.Util.lastId,e._leaflet_id},lastId:0,throttle:function(e,t,n){var r,i,s,o;return o=function(){r=!1,i&&(s.apply(n,i),i=!1)},s=function(){r?i=arguments:(e.apply(n,arguments),setTimeout(o,t),r=!0)}},wrapNum:function(e,t,n){var r=t[1],i=t[0],s=r-i;return e===r&&n?e:((e-i)%s+s)%s+i},falseFn:function(){return!1},formatNum:function(e,t){var n=Math.pow(10,t||5);return Math.round(e*n)/n},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},splitWords:function(e){return i.Util.trim(e).split(/\s+/)},setOptions:function(e,t){e.hasOwnProperty("options")||(e.options=e.options?i.Util.create(e.options):{});for(var n in t)e.options[n]=t[n];return e.options},getParamString:function(e,t,n){var r=[];for(var i in e)r.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(e[i]));return(t&&-1!==t.indexOf("?")?"&":"?")+r.join("&")},template:function(e,t){return e.replace(i.Util.templateRe,function(e,r){var i=t[r];if(i===n)throw new Error("No value provided for variable "+e);return"function"==typeof i&&(i=i(t)),i})},templateRe:/\{ *([\w_]+) *\}/g,isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function t(t){return e["webkit"+t]||e["moz"+t]||e["ms"+t]}function n(t){var n=+(new Date),i=Math.max(0,16-(n-r));return r=n+i,e.setTimeout(t,i)}var r=0,s=e.requestAnimationFrame||t("RequestAnimationFrame")||n,o=e.cancelAnimationFrame||t("CancelAnimationFrame")||t("CancelRequestAnimationFrame")||function(t){e.clearTimeout(t)};i.Util.requestAnimFrame=function(t,r,o){return o&&s===n?void t.call(r):s.call(e,i.bind(t,r))},i.Util.cancelAnimFrame=function(t){t&&o.call(e,t)}}(),i.extend=i.Util.extend,i.bind=i.Util.bind,i.stamp=i.Util.stamp,i.setOptions=i.Util.setOptions,i.Class=function(){},i.Class.extend=function(e){var t=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=t.__super__=this.prototype,r=i.Util.create(n);r.constructor=t,t.prototype=r;for(var s in this)this.hasOwnProperty(s)&&"prototype"!==s&&(t[s]=this[s]);return e.statics&&(i.extend(t,e.statics),delete e.statics),e.includes&&(i.Util.extend.apply(null,[r].concat(e.includes)),delete e.includes),r.options&&(e.options=i.Util.extend(i.Util.create(r.options),e.options)),i.extend(r,e),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=r._initHooks.length;t>e;e++)r._initHooks[e].call(this)}},t},i.Class.include=function(e){i.extend(this.prototype,e)},i.Class.mergeOptions=function(e){i.extend(this.prototype.options,e)},i.Class.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n="function"==typeof e?e:function(){this[e].apply(this,t)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n)},i.Evented=i.Class.extend({on:function(e,t,n){if("object"==typeof e)for(var r in e)this._on(r,e[r],t);else{e=i.Util.splitWords(e);for(var s=0,o=e.length;o>s;s++)this._on(e[s],t,n)}return this},off:function(e,t,n){if(e)if("object"==typeof e)for(var r in e)this._off(r,e[r],t);else{e=i.Util.splitWords(e);for(var s=0,o=e.length;o>s;s++)this._off(e[s],t,n)}else delete this._events;return this},_on:function(e,t,n){var r=this._events=this._events||{},s=n&&n!==this&&i.stamp(n);if(s){var o=e+"_idx",u=e+"_len",a=r[o]=r[o]||{},f=i.stamp(t)+"_"+s;a[f]||(a[f]={fn:t,ctx:n},r[u]=(r[u]||0)+1)}else r[e]=r[e]||[],r[e].push({fn:t})},_off:function(e,t,n){var r=this._events,s=e+"_idx",o=e+"_len";if(r){if(!t)return delete r[e],delete r[s],void delete r[o];var u,a,f,l,c,h=n&&n!==this&&i.stamp(n);if(h)c=i.stamp(t)+"_"+h,u=r[s],u&&u[c]&&(l=u[c],delete u[c],r[o]--);else if(u=r[e])for(a=0,f=u.length;f>a;a++)if(u[a].fn===t){l=u[a],u.splice(a,1);break}l&&(l.fn=i.Util.falseFn)}},fire:function(e,t,n){if(!this.listens(e,n))return this;var r=i.Util.extend({},t,{type:e,target:this}),s=this._events;if(s){var o,u,a,f,l=s[e+"_idx"];if(s[e])for(a=s[e].slice(),o=0,u=a.length;u>o;o++)a[o].fn.call(this,r);for(f in l)l[f].fn.call(l[f].ctx,r)}return n&&this._propagateEvent(r),this},listens:function(e,t){var n=this._events;if(n&&(n[e]||n[e+"_len"]))return!0;if(t)for(var r in this._eventParents)if(this._eventParents[r].listens(e,t))return!0;return!1},once:function(e,t,n){if("object"==typeof e){for(var r in e)this.once(r,e[r],t);return this}var s=i.bind(function(){this.off(e,t,n).off(e,s,n)},this);return this.on(e,t,n).on(e,s,n)},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[i.stamp(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[i.stamp(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,i.extend({layer:e.target},e),!0)}});var s=i.Evented.prototype;s.addEventListener=s.on,s.removeEventListener=s.clearAllEventListeners=s.off,s.addOneTimeEventListener=s.once,s.fireEvent=s.fire,s.hasEventListeners=s.listens,i.Mixin={Events:s},function(){var n=navigator.userAgent.toLowerCase(),r=t.documentElement,s="ActiveXObject"in e,o=-1!==n.indexOf("webkit"),u=-1!==n.indexOf("phantom"),a=-1!==n.search("android [23]"),f=-1!==n.indexOf("chrome"),l="undefined"!=typeof orientation,c=navigator.msPointerEnabled&&navigator.msMaxTouchPoints&&!e.PointerEvent,h=e.PointerEvent&&navigator.pointerEnabled&&navigator.maxTouchPoints||c,p=s&&"transition"in r.style,d="WebKitCSSMatrix"in e&&"m11"in new e.WebKitCSSMatrix&&!a,v="MozPerspective"in r.style,m="OTransition"in r.style,g=!e.L_NO_TOUCH&&!u&&(h||"ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch);i.Browser={ie:s,ielt9:s&&!t.addEventListener,webkit:o,gecko:-1!==n.indexOf("gecko")&&!o&&!e.opera&&!s,android:-1!==n.indexOf("android"),android23:a,chrome:f,safari:!f&&-1!==n.indexOf("safari"),ie3d:p,webkit3d:d,gecko3d:v,opera3d:m,any3d:!e.L_DISABLE_3D&&(p||d||v||m)&&!u,mobile:l,mobileWebkit:l&&o,mobileWebkit3d:l&&d,mobileOpera:l&&e.opera,touch:!!g,msPointer:!!c,pointer:!!h,retina:(e.devicePixelRatio||e.screen.deviceXDPI/e.screen.logicalXDPI)>1}}(),i.Point=function(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t},i.Point.prototype={clone:function(){return new i.Point(this.x,this.y)},add:function(e){return this.clone()._add(i.point(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(i.point(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(e){e=i.point(e);var t=e.x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){return e=i.point(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=i.point(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+i.Util.formatNum(this.x)+", "+i.Util.formatNum(this.y)+")"}},i.point=function(e,t,r){return e instanceof i.Point?e:i.Util.isArray(e)?new i.Point(e[0],e[1]):e===n||null===e?e:new i.Point(e,t,r)},i.Bounds=function(e,t){if(e)for(var n=t?[e,t]:e,r=0,i=n.length;i>r;r++)this.extend(n[r])},i.Bounds.prototype={extend:function(e){return e=i.point(e),this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(e.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(e.y,this.max.y)):(this.min=e.clone(),this.max=e.clone()),this},getCenter:function(e){return new i.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return new i.Point(this.min.x,this.max.y)},getTopRight:function(){return new i.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return e="number"==typeof e[0]||e instanceof i.Point?i.point(e):i.bounds(e),e instanceof i.Bounds?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=i.bounds(e);var t=this.min,n=this.max,r=e.min,s=e.max,o=s.x>=t.x&&r.x<=n.x,u=s.y>=t.y&&r.y<=n.y;return o&&u},isValid:function(){return!!this.min&&!!this.max}},i.bounds=function(e,t){return!e||e instanceof i.Bounds?e:new i.Bounds(e,t)},i.Transformation=function(e,t,n,r){this._a=e,this._b=t,this._c=n,this._d=r},i.Transformation.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new i.Point((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}},i.DomUtil={get:function(e){return"string"==typeof e?t.getElementById(e):e},getStyle:function(e,n){var r=e.style[n]||e.currentStyle&&e.currentStyle[n];if((!r||"auto"===r)&&t.defaultView){var i=t.defaultView.getComputedStyle(e,null);r=i?i[n]:null}return"auto"===r?null:r},create:function(e,n,r){var i=t.createElement(e);return i.className=n,r&&r.appendChild(i),i},remove:function(e){var t=e.parentNode;t&&t.removeChild(e)},empty:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},toFront:function(e){e.parentNode.appendChild(e)},toBack:function(e){var t=e.parentNode;t.insertBefore(e,t.firstChild)},hasClass:function(e,t){if(e.classList!==n)return e.classList.contains(t);var r=i.DomUtil.getClass(e);return r.length>0&&(new RegExp("(^|\\s)"+t+"(\\s|$)")).test(r)},addClass:function(e,t){if(e.classList!==n)for(var r=i.Util.splitWords(t),s=0,o=r.length;o>s;s++)e.classList.add(r[s]);else if(!i.DomUtil.hasClass(e,t)){var u=i.DomUtil.getClass(e);i.DomUtil.setClass(e,(u?u+" ":"")+t)}},removeClass:function(e,t){e.classList!==n?e.classList.remove(t):i.DomUtil.setClass(e,i.Util.trim((" "+i.DomUtil.getClass(e)+" ").replace(" "+t+" "," ")))},setClass:function(e,t){e.className.baseVal===n?e.className=t:e.className.baseVal=t},getClass:function(e){return e.className.baseVal===n?e.className:e.className.baseVal},setOpacity:function(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&i.DomUtil._setOpacityIE(e,t)},_setOpacityIE:function(e,t){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(r)}catch(i){if(1===t)return}t=Math.round(100*t),n?(n.Enabled=100!==t,n.Opacity=t):e.style.filter+=" progid:"+r+"(opacity="+t+")"},testProp:function(e){for(var n=t.documentElement.style,r=0;r<e.length;r++)if(e[r]in n)return e[r];return!1},setTransform:function(e,t,n){var r=t||new i.Point(0,0);e.style[i.DomUtil.TRANSFORM]="translate3d("+r.x+"px,"+r.y+"px,0)"+(n?" scale("+n+")":"")},setPosition:function(e,t,n){e._leaflet_pos=t,i.Browser.any3d&&!n?i.DomUtil.setTransform(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")},getPosition:function(e){return e._leaflet_pos}},function(){i.DomUtil.TRANSFORM=i.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);var n=i.DomUtil.TRANSITION=i.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);if(i.DomUtil.TRANSITION_END="webkitTransition"===n||"OTransition"===n?n+"End":"transitionend","onselectstart"in t)i.DomUtil.disableTextSelection=function(){i.DomEvent.on(e,"selectstart",i.DomEvent.preventDefault)},i.DomUtil.enableTextSelection=function(){i.DomEvent.off(e,"selectstart",i.DomEvent.preventDefault)};else{var r=i.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);i.DomUtil.disableTextSelection=function(){if(r){var e=t.documentElement.style;this._userSelect=e[r],e[r]="none"}},i.DomUtil.enableTextSelection=function(){r&&(t.documentElement.style[r]=this._userSelect,delete this._userSelect)}}i.DomUtil.disableImageDrag=function(){i.DomEvent.on(e,"dragstart",i.DomEvent.preventDefault)},i.DomUtil.enableImageDrag=function(){i.DomEvent.off(e,"dragstart",i.DomEvent.preventDefault)}}(),i.LatLng=function(e,t,r){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,r!==n&&(this.alt=+r)},i.LatLng.prototype={equals:function(e,t){if(!e)return!1;e=i.latLng(e);var r=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return(t===n?1e-9:t)>=r},toString:function(e){return"LatLng("+i.Util.formatNum(this.lat,e)+", "+i.Util.formatNum(this.lng,e)+")"},distanceTo:function(e){return i.CRS.Earth.distance(this,i.latLng(e))},wrap:function(){return i.CRS.Earth.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return i.latLngBounds([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])}},i.latLng=function(e,t,r){return e instanceof i.LatLng?e:i.Util.isArray(e)&&"object"!=typeof e[0]?3===e.length?new i.LatLng(e[0],e[1],e[2]):2===e.length?new i.LatLng(e[0],e[1]):null:e===n||null===e?e:"object"==typeof e&&"lat"in e?new i.LatLng(e.lat,"lng"in e?e.lng:e.lon,e.alt):t===n?null:new i.LatLng(e,t,r)},i.LatLngBounds=function(e,t){if(e)for(var n=t?[e,t]:e,r=0,i=n.length;i>r;r++)this.extend(n[r])},i.LatLngBounds.prototype={extend:function(e){var t,n,r=this._southWest,s=this._northEast;if(e instanceof i.LatLng)t=e,n=e;else{if(!(e instanceof i.LatLngBounds))return e?this.extend(i.latLng(e)||i.latLngBounds(e)):this;if(t=e._southWest,n=e._northEast,!t||!n)return this}return r||s?(r.lat=Math.min(t.lat,r.lat),r.lng=Math.min(t.lng,r.lng),s.lat=Math.max(n.lat,s.lat),s.lng=Math.max(n.lng,s.lng)):(this._southWest=new i.LatLng(t.lat,t.lng),this._northEast=new i.LatLng(n.lat,n.lng)),this},pad:function(e){var t=this._southWest,n=this._northEast,r=Math.abs(t.lat-n.lat)*e,s=Math.abs(t.lng-n.lng)*e;return new i.LatLngBounds(new i.LatLng(t.lat-r,t.lng-s),new i.LatLng(n.lat+r,n.lng+s))},getCenter:function(){return new i.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new i.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new i.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"==typeof e[0]||e instanceof i.LatLng?i.latLng(e):i.latLngBounds(e);var t,n,r=this._southWest,s=this._northEast;return e instanceof i.LatLngBounds?(t=e.getSouthWest(),n=e.getNorthEast()):t=n=e,t.lat>=r.lat&&n.lat<=s.lat&&t.lng>=r.lng&&n.lng<=s.lng},intersects:function(e){e=i.latLngBounds(e);var t=this._southWest,n=this._northEast,r=e.getSouthWest(),s=e.getNorthEast(),o=s.lat>=t.lat&&r.lat<=n.lat,u=s.lng>=t.lng&&r.lng<=n.lng;return o&&u},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e){return e?(e=i.latLngBounds(e),this._southWest.equals(e.getSouthWest())&&this._northEast.equals(e.getNorthEast())):!1},isValid:function(){return!!this._southWest&&!!this._northEast}},i.latLngBounds=function(e,t){return!e||e instanceof i.LatLngBounds?e:new i.LatLngBounds(e,t)},i.Projection={},i.Projection.LonLat={project:function(e){return new i.Point(e.lng,e.lat)},unproject:function(e){return new i.LatLng(e.y,e.x)},bounds:i.bounds([-180,-90],[180,90])},i.Projection.SphericalMercator={R:6378137,project:function(e){var t=Math.PI/180,n=1-1e-15,r=Math.max(Math.min(Math.sin(e.lat*t),n),-n);return new i.Point(this.R*e.lng*t,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(e){var t=180/Math.PI;return new i.LatLng((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:function(){var e=6378137*Math.PI;return i.bounds([-e,-e],[e,e])}()},i.CRS={latLngToPoint:function(e,t){var n=this.projection.project(e),r=this.scale(t);return this.transformation._transform(n,r)},pointToLatLng:function(e,t){var n=this.scale(t),r=this.transformation.untransform(e,n);return this.projection.unproject(r)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(e),r=this.transformation.transform(t.min,n),s=this.transformation.transform(t.max,n);return i.bounds(r,s)},wrapLatLng:function(e){var t=this.wrapLng?i.Util.wrapNum(e.lng,this.wrapLng,!0):e.lng,n=this.wrapLat?i.Util.wrapNum(e.lat,this.wrapLat,!0):e.lat;return i.latLng(n,t)}},i.CRS.Simple=i.extend({},i.CRS,{projection:i.Projection.LonLat,transformation:new i.Transformation(1,0,-1,0),scale:function(e){return Math.pow(2,e)},distance:function(e,t){var n=t.lng-e.lng,r=t.lat-e.lat;return Math.sqrt(n*n+r*r)},infinite:!0}),i.CRS.Earth=i.extend({},i.CRS,{wrapLng:[-180,180],R:6378137,distance:function(e,t){var n=Math.PI/180,r=e.lat*n,i=t.lat*n,s=Math.sin(r)*Math.sin(i)+Math.cos(r)*Math.cos(i)*Math.cos((t.lng-e.lng)*n);return this.R*Math.acos(Math.min(s,1))}}),i.CRS.EPSG3857=i.extend({},i.CRS.Earth,{code:"EPSG:3857",projection:i.Projection.SphericalMercator,transformation:function(){var e=.5/(Math.PI*i.Projection.SphericalMercator.R);return new i.Transformation(e,.5,-e,.5)}()}),i.CRS.EPSG900913=i.extend({},i.CRS.EPSG3857,{code:"EPSG:900913"}),i.CRS.EPSG4326=i.extend({},i.CRS.Earth,{code:"EPSG:4326",projection:i.Projection.LonLat,transformation:new i.Transformation(1/180,1,-1/180,.5)}),i.Map=i.Evented.extend({options:{crs:i.CRS.EPSG3857,fadeAnimation:!0,trackResize:!0,markerZoomAnimation:!0},initialize:function(e,t){t=i.setOptions(this,t),this._initContainer(e),this._initLayout(),this._onResize=i.bind(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),t.zoom!==n&&(this._zoom=this._limitZoom(t.zoom)),t.center&&t.zoom!==n&&this.setView(i.latLng(t.center),t.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._addLayers(this.options.layers)},setView:function(e,t){return t=t===n?this.getZoom():t,this._resetView(i.latLng(e),this._limitZoom(t)),this},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=this._limitZoom(e),this)},zoomIn:function(e,t){return this.setZoom(this._zoom+(e||1),t)},zoomOut:function(e,t){return this.setZoom(this._zoom-(e||1),t)},setZoomAround:function(e,t,n){var r=this.getZoomScale(t),s=this.getSize().divideBy(2),o=e instanceof i.Point?e:this.latLngToContainerPoint(e),u=o.subtract(s).multiplyBy(1-1/r),a=this.containerPointToLatLng(s.add(u));return this.setView(a,t,{zoom:n})},fitBounds:function(e,t){t=t||{},e=e.getBounds?e.getBounds():i.latLngBounds(e);var n=i.point(t.paddingTopLeft||t.padding||[0,0]),r=i.point(t.paddingBottomRight||t.padding||[0,0]),s=this.getBoundsZoom(e,!1,n.add(r));s=t.maxZoom?Math.min(t.maxZoom,s):s;var o=r.subtract(n).divideBy(2),u=this.project(e.getSouthWest(),s),a=this.project(e.getNorthEast(),s),f=this.unproject(u.add(a).divideBy(2).add(o),s);return this.setView(f,s,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e){return this.fire("movestart"),this._rawPanBy(i.point(e)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(e){return e=i.latLngBounds(e),this.options.maxBounds=e,e?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):this.off("moveend",this._panInsideMaxBounds)},panInsideBounds:function(e,t){var n=this.getCenter(),r=this._limitCenter(n,this._zoom,e);return n.equals(r)?this:this.panTo(r,t)},invalidateSize:function(e){if(!this._loaded)return this;e=i.extend({animate:!1,pan:!0},e===!0?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var n=this.getSize(),r=t.divideBy(2).round(),s=n.divideBy(2).round(),o=r.subtract(s);return o.x||o.y?(e.animate&&e.pan?this.panBy(o):(e.pan&&this._rawPanBy(o),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:n})):this},stop:function(){return i.Util.cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){this._initEvents("off");try{delete this._container._leaflet}catch(e){this._container._leaflet=n}return i.DomUtil.remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload"),this},createPane:function(e,t){var n="leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),r=i.DomUtil.create("div",n,t||this._mapPane);return e&&(this._panes[e]=r),r},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),t=this.unproject(e.getBottomLeft()),n=this.unproject(e.getTopRight());return new i.LatLngBounds(t,n)},getMinZoom:function(){return this.options.minZoom===n?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===n?this._layersMaxZoom===n?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=i.latLngBounds(e);var r,s=this.getMinZoom()-(t?1:0),o=this.getMaxZoom(),u=this.getSize(),a=e.getNorthWest(),f=e.getSouthEast(),l=!0;n=i.point(n||[0,0]);do s++,r=this.project(f,s).subtract(this.project(a,s)).add(n).floor(),l=t?r.x<u.x||r.y<u.y:u.contains(r);while(l&&o>=s);return l&&t?null:t?s:s-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new i.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var n=this._getTopLeftPoint(e,t);return new i.Bounds(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(e===n?this.getZoom():e)},getPane:function(e){return"string"==typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var r=this.options.crs;return t=t===n?this._zoom:t,r.scale(e)/r.scale(t)},getScaleZoom:function(e,t){return t=t===n?this._zoom:t,t+Math.log(e)/Math.LN2},project:function(e,t){return t=t===n?this._zoom:t,this.options.crs.latLngToPoint(i.latLng(e),t)},unproject:function(e,t){return t=t===n?this._zoom:t,this.options.crs.pointToLatLng(i.point(e),t)},layerPointToLatLng:function(e){var t=i.point(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){var t=this.project(i.latLng(e))._round();return t._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(i.latLng(e))},distance:function(e,t){return this.options.crs.distance(i.latLng(e),i.latLng(t))},containerPointToLayerPoint:function(e){return i.point(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return i.point(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(i.point(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(i.latLng(e)))},mouseEventToContainerPoint:function(e){return i.DomEvent.getMousePosition(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=i.DomUtil.get(e);if(!t)throw new Error("Map container not found.");if(t._leaflet)throw new Error("Map container is already initialized.");t._leaflet=!0},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&i.Browser.any3d,i.DomUtil.addClass(e,"leaflet-container"+(i.Browser.touch?" leaflet-touch":"")+(i.Browser.retina?" leaflet-retina":"")+(i.Browser.ielt9?" leaflet-oldie":"")+(i.Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=i.DomUtil.getStyle(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._mapPane=this.createPane("mapPane",this._container),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(i.DomUtil.addClass(e.markerPane,"leaflet-zoom-hide"),i.DomUtil.addClass(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t,n,r){var s=this._zoom!==t;r||(this.fire("movestart"),s&&this.fire("zoomstart")),this._zoom=t,this._initialCenter=e,n||i.DomUtil.setPosition(this._mapPane,new i.Point(0,0)),this._pixelOrigin=this._getNewPixelOrigin(e);var o=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!n}),o&&this.fire("load"),this.fire("move"),(s||r)&&this.fire("zoomend"),this.fire("moveend",{hard:!n})},_rawPanBy:function(e){i.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){i.DomEvent&&(t=t||"on",i.DomEvent[t](this._container,"click dblclick mousedown mouseup mouseenter mouseleave mousemove contextmenu",this._handleMouseEvent,this),this.options.trackResize&&i.DomEvent[t](e,"resize",this._onResize,this))},_onResize:function(){i.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=i.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_handleMouseEvent:function(e){this._loaded&&this._fireMouseEvent(this,e,"mouseenter"===e.type?"mouseover":"mouseleave"===e.type?"mouseout":e.type)},_fireMouseEvent:function(e,t,n,r,s){if(n=n||t.type,!i.DomEvent._skipped(t)){if("click"===n){var o=e.options.draggable===!0?e:this;if(!t._simulated&&(o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()))return void i.DomEvent.stopPropagation(t);e.fire("preclick")}if(e.listens(n,r)){"contextmenu"===n&&i.DomEvent.preventDefault(t),("click"===n||"dblclick"===n||"contextmenu"===n)&&i.DomEvent.stopPropagation(t);var u={originalEvent:t,containerPoint:this.mouseEventToContainerPoint(t)};u.layerPoint=this.containerPointToLayerPoint(u.containerPoint),u.latlng=s||this.layerPointToLatLng(u.layerPoint),e.fire(n,u,r)}}},_clearHandlers:function(){for(var e=0,t=this._handlers.length;t>e;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return i.DomUtil.getPosition(this._mapPane)||new i.Point(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){var r=e&&t!==n?this._getNewPixelOrigin(e,t):this.getPixelOrigin();return r.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,n){var r=this._getNewPixelOrigin(n,t);return this.project(e,t)._subtract(r)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var r=this.project(e,t),s=this.getSize().divideBy(2),o=new i.Bounds(r.subtract(s),r.add(s)),u=this._getBoundsOffset(o,n,t);return this.unproject(r.add(u),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),r=new i.Bounds(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(r,t))},_getBoundsOffset:function(e,t,n){var r=this.project(t.getNorthWest(),n).subtract(e.min),s=this.project(t.getSouthEast(),n).subtract(e.max),o=this._rebound(r.x,-s.x),u=this._rebound(r.y,-s.y);return new i.Point(o,u)},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom();return Math.max(t,Math.min(n,e))}}),i.map=function(e,t){return new i.Map(e,t)},i.Layer=i.Evented.extend({options:{pane:"overlayPane"},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},_layerAdd:function(e){var t=e.target;t.hasLayer(this)&&(this._map=t,this._zoomAnimated=t._zoomAnimated,this.onAdd(t),this.getAttribution&&this._map.attributionControl&&this._map.attributionControl.addAttribution(this.getAttribution()),this.getEvents&&t.on(this.getEvents(),this),this.fire("add"),t.fire("layeradd",{layer:this}))}}),i.Map.include({addLayer:function(e){var t=i.stamp(e);return this._layers[t]?e:(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer:function(e){var t=i.stamp(e);return this._layers[t]?(this._loaded&&e.onRemove(this),e.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(e.getAttribution()),e.getEvents&&this.off(e.getEvents(),e),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return!!e&&i.stamp(e)in this._layers},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},_addLayers:function(e){e=e?i.Util.isArray(e)?e:[e]:[];for(var t=0,n=e.length;n>t;t++)this.addLayer(e[t])},_addZoomLimit:function(e){(isNaN(e.options.maxZoom)||!isNaN(e.options.minZoom))&&(this._zoomBoundLayers[i.stamp(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=i.stamp(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,r=this._getZoomSpan();for(var i in this._zoomBoundLayers){var s=this._zoomBoundLayers[i].options;e=s.minZoom===n?e:Math.min(e,s.minZoom),t=s.maxZoom===n?t:Math.max(t,s.maxZoom)}this._layersMaxZoom=t===-1/0?n:t,this._layersMinZoom=1/0===e?n:e,r!==this._getZoomSpan()&&this.fire("zoomlevelschange")}}),i.Projection.Mercator={R:6378137,R_MINOR:6356752.314245179,bounds:i.bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(e){var t=Math.PI/180,n=this.R,r=e.lat*t,s=this.R_MINOR/n,o=Math.sqrt(1-s*s),u=o*Math.sin(r),a=Math.tan(Math.PI/4-r/2)/Math.pow((1-u)/(1+u),o/2);return r=-n*Math.log(Math.max(a,1e-10)),new i.Point(e.lng*t*n,r)},unproject:function(e){for(var t,n=180/Math.PI,r=this.R,s=this.R_MINOR/r,o=Math.sqrt(1-s*s),u=Math.exp(-e.y/r),a=Math.PI/2-2*Math.atan(u),f=0,l=.1;15>f&&Math.abs(l)>1e-7;f++)t=o*Math.sin(a),t=Math.pow((1-t)/(1+t),o/2),l=Math.PI/2-2*Math.atan(u*t)-a,a+=l;return new i.LatLng(a*n,e.x*n/r)}},i.CRS.EPSG3395=i.extend({},i.CRS.Earth,{code:"EPSG:3395",projection:i.Projection.Mercator,transformation:function(){var e=.5/(Math.PI*i.Projection.Mercator.R);return new i.Transformation(e,.5,-e,.5)}()}),i.GridLayer=i.Layer.extend({options:{pane:"tilePane",tileSize:256,opacity:1,updateWhenIdle:i.Browser.mobile,updateInterval:200,attribution:null,zIndex:null,bounds:null,minZoom:0},initialize:function(e){e=i.setOptions(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._viewReset(),this._update()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){i.DomUtil.remove(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(i.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(i.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var e={viewreset:this._viewReset,moveend:this._move};return this.options.updateWhenIdle||(e.move=i.Util.throttle(this._move,this.options.updateInterval,this)),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return t.createElement("div")},_updateZIndex:function(){this._container&&this.options.zIndex!==n&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t,n=this.getPane().children,r=-e(-1/0,1/0),i=0,s=n.length;s>i;i++)t=n[i].style.zIndex,n[i]!==this._container&&t&&(r=e(r,+t));isFinite(r)&&(this.options.zIndex=r+e(-1,1),this._updateZIndex())},_updateOpacity:function(){var e=this.options.opacity;if(!i.Browser.ielt9&&!this._map._fadeAnimated)return void i.DomUtil.setOpacity(this._container,e);var t=+(new Date),n=!1;for(var r in this._tiles){var s=this._tiles[r];if(s.current&&s.loaded&&!s.active){var o=Math.min(1,(t-s.loaded)/200);1>o?(i.DomUtil.setOpacity(s.el,e*o),n=!0):(i.DomUtil.setOpacity(s.el,e),s.active=!0,this._pruneTiles())}}n&&(i.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=i.Util.requestAnimFrame(this._updateOpacity,this))},_initContainer:function(){this._container||(this._container=i.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;for(var n in this._levels)this._levels[n].el.children.length||n===e?this._levels[n].el.style.zIndex=t-Math.abs(e-n):(i.DomUtil.remove(this._levels[n].el),delete this._levels[n]);var r=this._levels[e],s=this._map;return r||(r=this._levels[e]={},r.el=i.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=t,r.origin=s.project(s.unproject(s.getPixelOrigin()),e).round(),r.zoom=e,this._setZoomTransform(r,s.getCenter(),s.getZoom()),i.Util.falseFn(r.el.offsetWidth)),this._level=r,r},_pruneTiles:function(){var e,t;for(e in this._tiles)t=this._tiles[e],t.retain=t.current;for(e in this._tiles)if(t=this._tiles[e],t.current&&!t.active){var n=t.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_retainParent:function(e,t,n,r){var i=Math.floor(e/2),s=Math.floor(t/2),o=n-1,u=i+":"+s+":"+o,a=this._tiles[u];return a&&a.active?(a.retain=!0,!0):(a&&a.loaded&&(a.retain=!0),o>r?this._retainParent(i,s,o,r):!1)},_retainChildren:function(e,t,n,r){for(var i=2*e;2*e+2>i;i++)for(var s=2*t;2*t+2>s;s++){var o=i+":"+s+":"+(n+1),u=this._tiles[o];u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),r>n+1&&this._retainChildren(i,s,n+1,r))}},_viewReset:function(e){var t=this._map;this._reset(t.getCenter(),t.getZoom(),e&&e.hard)},_animateZoom:function(e){this._reset(e.center,e.zoom,!1,!0)},_reset:function(e,t,n,r){var i=Math.round(t),s=this._tileZoom!==i;(s||n)&&(this._abortLoading&&this._abortLoading(),this._tileZoom=i,this._updateLevels(),this._resetGrid(),this._update(e,i),r||this._pruneTiles()),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var n in this._levels)this._setZoomTransform(this._levels[n],e,t)},_setZoomTransform:function(e,t,n){var r=this._map.getZoomScale(n,e.zoom),s=e.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(t,n)).round();i.DomUtil.setTransform(e.el,s,r)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._tileSize=this._getTileSize(),r=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=t.wrapLng&&[Math.floor(e.project([0,t.wrapLng[0]],r).x/n),Math.ceil(e.project([0,t.wrapLng[1]],r).x/n)],this._wrapY=t.wrapLat&&[Math.floor(e.project([t.wrapLat[0],0],r).y/n),Math.ceil(e.project([t.wrapLat[1],0],r).y/n)]},_getTileSize:function(){return this.options.tileSize},_move:function(){this._update(),this._pruneTiles()},_update:function(e,r){var s=this._map;if(s){e===n&&(e=s.getCenter()),r===n&&(r=Math.round(s.getZoom()));var o=s.getPixelBounds(e,r),u=this._pxBoundsToTileRange(o),a=u.getCenter(),f=[];for(var l in this._tiles)this._tiles[l].current=!1;for(var c=u.min.y;c<=u.max.y;c++)for(var h=u.min.x;h<=u.max.x;h++){var p=new i.Point(h,c);if(p.z=r,this._isValidTile(p)){var d=this._tiles[this._tileCoordsToKey(p)];d?d.current=!0:f.push(p)}}if(f.sort(function(e,t){return e.distanceTo(a)-t.distanceTo(a)}),0!==f.length){this._noTilesToLoad()&&this.fire("loading");var v=t.createDocumentFragment();for(h=0;h<f.length;h++)this._addTile(f[h],v);this._level.el.appendChild(v)}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalTileRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(e);return i.latLngBounds(this.options.bounds).intersects(r)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToBounds:function(e){var t=this._map,n=this._getTileSize(),r=e.multiplyBy(n),s=r.add([n,n]),o=t.wrapLatLng(t.unproject(r,e.z)),u=t.wrapLatLng(t.unproject(s,e.z));return new i.LatLngBounds(o,u)},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),n=new i.Point(+t[0],+t[1]);return n.z=+t[2],n},_removeTile:function(e){var t=this._tiles[e];t&&(i.DomUtil.remove(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){i.DomUtil.addClass(e,"leaflet-tile"),e.style.width=this._tileSize+"px",e.style.height=this._tileSize+"px",e.onselectstart=i.Util.falseFn,e.onmousemove=i.Util.falseFn,i.Browser.ielt9&&this.options.opacity<1&&i.DomUtil.setOpacity(e,this.options.opacity),i.Browser.android&&!i.Browser.android23&&(e.style.WebkitBackfaceVisibility="hidden")},_addTile:function(e,t){var n=this._getTilePos(e),r=this._tileCoordsToKey(e),s=this.createTile(this._wrapCoords(e),i.bind(this._tileReady,this,e));this._initTile(s),this.createTile.length<2&&setTimeout(i.bind(this._tileReady,this,e,null,s),0),i.DomUtil.setPosition(s,n,!0),this._tiles[r]={el:s,coords:e,current:!0},t.appendChild(s),this.fire("tileloadstart",{tile:s,coords:e})},_tileReady:function(e,t,n){t&&this.fire("tileerror",{error:t,tile:n,coords:e});var r=this._tileCoordsToKey(e);n=this._tiles[r],n&&(n.loaded=+(new Date),this._map._fadeAnimated?(i.DomUtil.setOpacity(n.el,0),i.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=i.Util.requestAnimFrame(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),i.DomUtil.addClass(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:e}),this._noTilesToLoad()&&this.fire("load"))},_getTilePos:function(e){return e.multiplyBy(this._tileSize).subtract(this._level.origin)},_wrapCoords:function(e){var t=new i.Point(this._wrapX?i.Util.wrapNum(e.x,this._wrapX):e.x,this._wrapY?i.Util.wrapNum(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){return new i.Bounds(e.min.divideBy(this._tileSize).floor(),e.max.divideBy(this._tileSize).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}}),i.gridLayer=function(e){return new i.GridLayer(e)},i.TileLayer=i.GridLayer.extend({options:{maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,maxNativeZoom:null,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(e,t){this._url=e,t=i.setOptions(this,t),t.detectRetina&&i.Browser.retina&&t.maxZoom>0&&(t.tileSize=Math.floor(t.tileSize/2),t.zoomOffset++,t.minZoom=Math.max(0,t.minZoom),t.maxZoom--),"string"==typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),i.Browser.android||this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url=e,t||this.redraw(),this},createTile:function(e,n){var r=t.createElement("img");return r.onload=i.bind(this._tileOnLoad,this,n,r),r.onerror=i.bind(this._tileOnError,this,n,r),this.options.crossOrigin&&(r.crossOrigin=""),r.alt="",r.src=this.getTileUrl(e),r},getTileUrl:function(e){return i.Util.template(this._url,i.extend({r:this.options.detectRetina&&i.Browser.retina&&this.options.maxZoom>0?"@2x":"",s:this._getSubdomain(e),x:e.x,y:this.options.tms?this._globalTileRange.max.y-e.y:e.y,z:this._getZoomForUrl()},this.options))},_tileOnLoad:function(e,t){e(null,t)},_tileOnError:function(e,t,n){var r=this.options.errorTileUrl;r&&(t.src=r),e(n,t)},_getTileSize:function(){var e=this._map,t=this.options,n=e.getZoom()+t.zoomOffset,r=t.maxNativeZoom;return null!==r&&n>r?Math.round(e.getZoomScale(r,n)*t.tileSize):t.tileSize},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this.options,t=this._tileZoom;return e.zoomReverse&&(t=e.maxZoom-t),t+=e.zoomOffset,e.maxNativeZoom?Math.min(t,e.maxNativeZoom):t},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)t=this._tiles[e].el,t.onload=i.Util.falseFn,t.onerror=i.Util.falseFn,t.complete||(t.src=i.Util.emptyImageUrl,i.DomUtil.remove(t))}}),i.tileLayer=function(e,t){return new i.TileLayer(e,t)},i.TileLayer.WMS=i.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var n=i.extend({},this.defaultWmsParams);for(var r in t)r in this.options||(n[r]=t[r]);t=i.setOptions(this,t),n.width=n.height=t.tileSize*(t.detectRetina&&i.Browser.retina?2:1),this.wmsParams=n},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,i.TileLayer.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToBounds(e),n=this._crs.project(t.getNorthWest()),r=this._crs.project(t.getSouthEast()),s=(this._wmsVersion>=1.3&&this._crs===i.CRS.EPSG4326?[r.y,n.x,n.y,r.x]:[n.x,r.y,r.x,n.y]).join(","),o=i.TileLayer.prototype.getTileUrl.call(this,e);return o+i.Util.getParamString(this.wmsParams,o,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+s},setParams:function(e,t){return i.extend(this.wmsParams,e),t||this.redraw(),this}}),i.tileLayer.wms=function(e,t){return new i.TileLayer.WMS(e,t)},i.ImageOverlay=i.Layer.extend({options:{opacity:1,alt:"",interactive:!1},initialize:function(e,t,n){this._url=e,this._bounds=i.latLngBounds(t),i.setOptions(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.getPane().appendChild(this._image),this._initInteraction(),this._reset()},onRemove:function(){i.DomUtil.remove(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&i.DomUtil.toFront(this._image),this},bringToBack:function(){return this._map&&i.DomUtil.toBack(this._image),this},_initInteraction:function(){this.options.interactive&&(i.DomUtil.addClass(this._image,"leaflet-interactive"),i.DomEvent.on(this._image,"click dblclick mousedown mouseup mouseover mousemove mouseout contextmenu",this._fireMouseEvent,this))},_fireMouseEvent:function(e,t){this._map&&this._map._fireMouseEvent(this,e,t,!0)},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},getAttribution:function(){return this.options.attribution},getEvents:function(){var e={viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},getBounds:function(){return this._bounds},_initImage:function(){var e=this._image=i.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));e.onselectstart=i.Util.falseFn,e.onmousemove=i.Util.falseFn,e.onload=i.bind(this.fire,this,"load"),e.src=this._url,e.alt=this.options.alt},_animateZoom:function(e){var t=new i.Bounds(this._map._latLngToNewLayerPoint(this._bounds.getNorthWest(),e.zoom,e.center),this._map._latLngToNewLayerPoint(this._bounds.getSouthEast(),e.zoom,e.center)),n=t.min.add(t.getSize()._multiplyBy((1-1/e.scale)/2));i.DomUtil.setTransform(this._image,n,e.scale)},_reset:function(){var e=this._image,t=new i.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();i.DomUtil.setPosition(e,t.min),e.style.width=n.x+"px",e.style.height=n.y+"px"},_updateOpacity:function(){i.DomUtil.setOpacity(this._image,this.options.opacity)}}),i.imageOverlay=function(e,t,n){return new i.ImageOverlay(e,t,n)},i.Icon=i.Class.extend({initialize:function(e){i.setOptions(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,t&&"IMG"===t.tagName?t:null);return this._setIconStyles(r,e),r},_setIconStyles:function(e,t){var n=this.options,r=i.point(n[t+"Size"]),s=i.point("shadow"===t&&n.shadowAnchor||n.iconAnchor||r&&r.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(n.className||""),s&&(e.style.marginLeft=-s.x+"px",e.style.marginTop=-s.y+"px"),r&&(e.style.width=r.x+"px",e.style.height=r.y+"px")},_createImg:function(e,n){return n=n||t.createElement("img"),n.src=e,n},_getIconUrl:function(e){return i.Browser.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}}),i.icon=function(e){return new i.Icon(e)},i.Icon.Default=i.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(e){var t=e+"Url";if(this.options[t])return this.options[t];var n=i.Icon.Default.imagePath;if(!n)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return n+"/marker-"+e+(i.Browser.retina&&"icon"===e?"-2x":"")+".png"}}),i.Icon.Default.imagePath=function(){var e,n,r,i,s=t.getElementsByTagName("script"),o=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(e=0,n=s.length;n>e;e++)if(r=s[e].src,r.match(o))return i=r.split(o)[0],(i?i+"/":"")+"images"}(),i.Marker=i.Layer.extend({options:{pane:"markerPane",icon:new i.Icon.Default,interactive:!0,keyboard:!0,zIndexOffset:0,opacity:1,riseOffset:250},initialize:function(e,t){i.setOptions(this,t),this._latlng=i.latLng(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._initIcon(),this.update()},onRemove:function(){this.dragging&&this.dragging.enabled()&&this.dragging.removeHooks(),this._removeIcon(),this._removeShadow()},getEvents:function(){var e={viewreset:this.update};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=i.latLng(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},update:function(){if(this._icon){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=e.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,e.title&&(n.title=e.title),e.alt&&(n.alt=e.alt)),i.DomUtil.addClass(n,t),e.keyboard&&(n.tabIndex="0"),this._icon=n,this._initInteraction(),i.DomEvent&&e.riseOnHover&&i.DomEvent.on(n,{mouseover:this._bringToFront,mouseout:this._resetZIndex},this);var s=e.icon.createShadow(this._shadow),o=!1;s!==this._shadow&&(this._removeShadow(),o=!0),s&&i.DomUtil.addClass(s,t),this._shadow=s,e.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),s&&o&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){i.DomEvent&&this.options.riseOnHover&&i.DomEvent.off(this._icon,{mouseover:this._bringToFront,mouseout:this._resetZIndex},this),i.DomUtil.remove(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&i.DomUtil.remove(this._shadow),this._shadow=null},_setPos:function(e){i.DomUtil.setPosition(this._icon,e),this._shadow&&i.DomUtil.setPosition(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon.style.zIndex=this._zIndex+e},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(i.DomUtil.addClass(this._icon,"leaflet-interactive"),i.DomEvent&&i.DomEvent.on(this._icon,"click dblclick mousedown mouseup mouseover mousemove mouseout contextmenu keypress",this._fireMouseEvent,this),i.Handler.MarkerDrag)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new i.Handler.MarkerDrag(this),e&&this.dragging.enable()}},_fireMouseEvent:function(e,t){"mousedown"===e.type&&i.DomEvent.preventDefault(e),"keypress"===e.type&&13===e.keyCode&&(t="click"),this._map&&this._map._fireMouseEvent(this,e,t,!0,this._latlng)},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;i.DomUtil.setOpacity(this._icon,e),this._shadow&&i.DomUtil.setOpacity(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),i.marker=function(e,t){return new i.Marker(e,t)},i.DivIcon=i.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(e){var n=e&&"DIV"===e.tagName?e:t.createElement("div"),r=this.options;return n.innerHTML=r.html!==!1?r.html:"",r.bgPos&&(n.style.backgroundPosition=-r.bgPos.x+"px "+ -r.bgPos.y+"px"),this._setIconStyles(n,"icon"),n},createShadow:function(){return null}}),i.divIcon=function(e){return new i.DivIcon(e)},i.Map.mergeOptions({closePopupOnClick:!0}),i.Popup=i.Layer.extend({options:{pane:"popupPane",minWidth:50,maxWidth:300,offset:[0,7],autoPan:!0,autoPanPadding:[5,5],closeButton:!0,autoClose:!0,zoomAnimation:!0},initialize:function(e,t){i.setOptions(this,e),this._source=t},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&this.options.zoomAnimation,this._container||this._initLayout(),e._fadeAnimated&&i.DomUtil.setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&i.DomUtil.setOpacity(this._container,1),e.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this},!0)},openOn:function(e){return e.openPopup(this),this},onRemove:function(e){e._fadeAnimated?(i.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(i.bind(i.DomUtil.remove,i.DomUtil,this._container),200)):i.DomUtil.remove(this._container),e.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this},!0)},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=i.latLng(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={viewreset:this._updatePosition},t=this.options;return this._zoomAnimated&&(e.zoomanim=this._animateZoom),("closeOnClick"in t?t.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this._close),t.keepInView&&(e.moveend=this._adjustPan),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var e="leaflet-popup",t=this._container=i.DomUtil.create("div",e+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"));if(this.options.closeButton){var n=this._closeButton=i.DomUtil.create("a",e+"-close-button",t);n.href="#close",n.innerHTML="&#215;",i.DomEvent.on(n,"click",this._onCloseButtonClick,this)}var r=this._wrapper=i.DomUtil.create("div",e+"-content-wrapper",t);this._contentNode=i.DomUtil.create("div",e+"-content",r),i.DomEvent.disableClickPropagation(r).disableScrollPropagation(this._contentNode).on(r,"contextmenu",i.DomEvent.stopPropagation),this._tipContainer=i.DomUtil.create("div",e+"-tip-container",t),this._tip=i.DomUtil.create("div",e+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){var e=this._contentNode;if("string"==typeof this._content)e.innerHTML=this._content;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var r=e.offsetHeight,s=this.options.maxHeight,o="leaflet-popup-scrolled";s&&r>s?(t.height=s+"px",i.DomUtil.addClass(e,o)):i.DomUtil.removeClass(e,o),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=i.point(this.options.offset);this._zoomAnimated?i.DomUtil.setPosition(this._container,e):t=t.add(e);var n=this._containerBottom=-t.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=n+"px",this._container.style.left=r+"px"}},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);i.DomUtil.setPosition(this._container,t)},_adjustPan:function(){if(this.options.autoPan){var e=this._map,t=this._container.offsetHeight,n=this._containerWidth,r=new i.Point(this._containerLeft,-t-this._containerBottom);this._zoomAnimated&&r._add(i.DomUtil.getPosition(this._container));var s=e.layerPointToContainerPoint(r),o=i.point(this.options.autoPanPadding),u=i.point(this.options.autoPanPaddingTopLeft||o),a=i.point(this.options.autoPanPaddingBottomRight||o),f=e.getSize(),l=0,c=0;s.x+n+a.x>f.x&&(l=s.x+n-f.x+a.x),s.x-l-u.x<0&&(l=s.x-u.x),s.y+t+a.y>f.y&&(c=s.y+t-f.y+a.y),s.y-c-u.y<0&&(c=s.y-u.y),(l||c)&&e.fire("autopanstart").panBy([l,c])}},_onCloseButtonClick:function(e){this._close(),i.DomEvent.stop(e)}}),i.popup=function(e,t){return new i.Popup(e,t)},i.Map.include({openPopup:function(e,t,n){if(!(e instanceof i.Popup)){var r=e;e=(new i.Popup(n)).setContent(r)}return t&&e.setLatLng(t),this.hasLayer(e)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=e,this.addLayer(e))},closePopup:function(e){return e&&e!==this._popup||(e=this._popup,this._popup=null),e&&this.removeLayer(e),this}}),i.Layer.include({bindPopup:function(e,t){return e instanceof i.Popup?(this._popup=e,e._source=this):((!this._popup||t)&&(this._popup=new i.Popup(t,this)),this._popup.setContent(e)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&this._map&&this._map.openPopup(this._popup,e||this._latlng||this.getCenter()),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._map?this.closePopup():this.openPopup()),this},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){this._map.openPopup(this._popup,e.latlng)},_movePopup:function(e){this._popup.setLatLng(e.latlng)}}),i.Marker.include({bindPopup:function(e,t){var n=i.point(this.options.icon.options.popupAnchor||[0,0]).add(i.Popup.prototype.options.offset);return t=i.extend({offset:n},t),i.Layer.prototype.bindPopup.call(this,e,t)},_openPopup:i.Layer.prototype.togglePopup}),i.LayerGroup=i.Layer.extend({initialize:function(e){this._layers={};var t,n;if(e)for(t=0,n=e.length;n>t;t++)this.addLayer(e[t])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return!!e&&(e in this._layers||this.getLayerId(e)in this._layers)},clearLayers:function(){for(var e in this._layers)this.removeLayer(this._layers[e]);return this},invoke:function(e){var t,n,r=Array.prototype.slice.call(arguments,1);for(t in this._layers)n=this._layers[t],n[e]&&n[e].apply(n,r);return this},onAdd:function(e){for(var t in this._layers)e.addLayer(this._layers[t])},onRemove:function(e){for(var t in this._layers)e.removeLayer(this._layers[t])},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];for(var t in this._layers)e.push(this._layers[t]);return e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return i.stamp(e)}}),i.layerGroup=function(e){return new i.LayerGroup(e)},i.FeatureGroup=i.LayerGroup.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),i.LayerGroup.prototype.addLayer.call(this,e),this._popupContent&&e.bindPopup&&e.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),i.LayerGroup.prototype.removeLayer.call(this,e),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:e})):this},bindPopup:function(e,t){return this._popupContent=e,this._popupOptions=t,this.invoke("bindPopup",e,t)},openPopup:function(e){for(var t in this._layers){this._layers[t].openPopup(e);break}return this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new i.LatLngBounds;return this.eachLayer(function(t){e.extend(t.getBounds?t.getBounds():t.getLatLng())}),e}}),i.featureGroup=function(e){return new i.FeatureGroup(e)},i.Renderer=i.Layer.extend({options:{padding:0},initialize:function(e){i.setOptions(this,e),i.stamp(this)},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&i.DomUtil.addClass(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update()},onRemove:function(){i.DomUtil.remove(this._container)},getEvents:function(){var e={moveend:this._update};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},_animateZoom:function(e){var t=e.origin.subtract(this._map._getCenterLayerPoint()),n=this._bounds.min.add(t.multiplyBy(1-e.scale)).add(e.offset).round();i.DomUtil.setTransform(this._container,n,e.scale)},_update:function(){var e=this.options.padding,t=this._map.getSize(),n=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new i.Bounds(n,n.add(t.multiplyBy(1+2*e)).round())}}),i.Map.include({getRenderer:function(e){var t=e.options.renderer||this.options.renderer||this._renderer;return t||(t=this._renderer=i.SVG&&i.svg()||i.Canvas&&i.canvas()),this.hasLayer(t)||this.addLayer(t),t}}),i.Path=i.Layer.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",fillOpacity:.2,fillRule:"evenodd",interactive:!0},onAdd:function(){this._renderer=this._map.getRenderer(this),this._renderer._initPath(this),this._project(),this._update(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},getEvents:function(){return{viewreset:this._project,moveend:this._update}},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return i.setOptions(this,e),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},_fireMouseEvent:function(e,t){this._map._fireMouseEvent(this,e,t,!0)},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(i.Browser.touch?10:0)}}),i.LineUtil={simplify:function(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=this._reducePoints(e,n),e=this._simplifyDP(e,n)},pointToSegmentDistance:function(e,t,n){return Math.sqrt(this._sqClosestPointOnSegment(e,t,n,!0))},closestPointOnSegment:function(e,t,n){return this._sqClosestPointOnSegment(e,t,n)},_simplifyDP:function(e,t){var r=e.length,i=typeof Uint8Array!=n+""?Uint8Array:Array,s=new i(r);s[0]=s[r-1]=1,this._simplifyDPStep(e,s,t,0,r-1);var o,u=[];for(o=0;r>o;o++)s[o]&&u.push(e[o]);return u},_simplifyDPStep:function(e,t,n,r,i){var s,o,u,a=0;for(o=r+1;i-1>=o;o++)u=this._sqClosestPointOnSegment(e[o],e[r],e[i],!0),u>a&&(s=o,a=u);a>n&&(t[s]=1,this._simplifyDPStep(e,t,n,r,s),this._simplifyDPStep(e,t,n,s,i))},_reducePoints:function(e,t){for(var n=[e[0]],r=1,i=0,s=e.length;s>r;r++)this._sqDist(e[r],e[i])>t&&(n.push(e[r]),i=r);return s-1>i&&n.push(e[s-1]),n},clipSegment:function(e,t,n,r,i){var s,o,u,a=r?this._lastCode:this._getBitCode(e,n),f=this._getBitCode(t,n);for(this._lastCode=f;;){if(!(a|f))return[e,t];if(a&f)return!1;s=a||f,o=this._getEdgeIntersection(e,t,s,n,i),u=this._getBitCode(o,n),s===a?(e=o,a=u):(t=o,f=u)}},_getEdgeIntersection:function(e,t,n,r,s){var o,u,a=t.x-e.x,f=t.y-e.y,l=r.min,c=r.max;return 8&n?(o=e.x+a*(c.y-e.y)/f,u=c.y):4&n?(o=e.x+a*(l.y-e.y)/f,u=l.y):2&n?(o=c.x,u=e.y+f*(c.x-e.x)/a):1&n&&(o=l.x,u=e.y+f*(l.x-e.x)/a),new i.Point(o,u,s)},_getBitCode:function(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n},_sqDist:function(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r},_sqClosestPointOnSegment:function(e,t,n,r){var s,o=t.x,u=t.y,a=n.x-o,f=n.y-u,l=a*a+f*f;return l>0&&(s=((e.x-o)*a+(e.y-u)*f)/l,s>1?(o=n.x,u=n.y):s>0&&(o+=a*s,u+=f*s)),a=e.x-o,f=e.y-u,r?a*a+f*f:new i.Point(o,u)}},i.Polyline=i.Path.extend({options:{smoothFactor:1},initialize:function(e,t){i.setOptions(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},addLatLng:function(e){return e=i.latLng(e),this._latlngs.push(e),this._bounds.extend(e),this.redraw()},spliceLatLngs:function(){var e=[].splice.apply(this._latlngs,arguments);return this._setLatLngs(this._latlngs),this.redraw(),e},closestLayerPoint:function(e){for(var t,n,r=1/0,s=null,o=i.LineUtil._sqClosestPointOnSegment,u=0,a=this._parts.length;a>u;u++)for(var f=this._parts[u],l=1,c=f.length;c>l;l++){t=f[l-1],n=f[l];var h=o(e,t,n,!0);r>h&&(r=h,s=o(e,t,n))}return s&&(s.distance=Math.sqrt(r)),s},getCenter:function(){var e,t,n,r,i,s,o,u=this._rings[0],a=u.length;for(e=0,t=0;a-1>e;e++)t+=u[e].distanceTo(u[e+1])/2;for(e=0,r=0;a-1>e;e++)if(i=u[e],s=u[e+1],n=i.distanceTo(s),r+=n,r>t)return o=(r-t)/n,this._map.layerPointToLatLng([s.x-o*(s.x-i.x),s.y-o*(s.y-i.y)])},getBounds:function(){return this._bounds},_setLatLngs:function(e){this._bounds=new i.LatLngBounds,this._latlngs=this._convertLatLngs(e)},_convertLatLngs:function(e){for(var t=[],n=this._flat(e),r=0,s=e.length;s>r;r++)n?(t[r]=i.latLng(e[r]),this._bounds.extend(t[r])):t[r]=this._convertLatLngs(e[r]);return t},_flat:function(e){return!i.Util.isArray(e[0])||"object"!=typeof e[0][0]},_project:function(){this._rings=[],this._projectLatlngs(this._latlngs,this._rings);var e=this._clickTolerance(),t=new i.Point(e,-e);this._latlngs.length&&(this._pxBounds=new i.Bounds(this._map.latLngToLayerPoint(this._bounds.getSouthWest())._subtract(t),this._map.latLngToLayerPoint(this._bounds.getNorthEast())._add(t)))},_projectLatlngs:function(e,t){var n,r,s=e[0]instanceof i.LatLng,o=e.length;if(s){for(r=[],n=0;o>n;n++)r[n]=this._map.latLngToLayerPoint(e[n]);t.push(r)}else for(n=0;o>n;n++)this._projectLatlngs(e[n],t)},_clipPoints:function(){if(this.options.noClip)return void (this._parts=this._rings);this._parts=[];var e,t,n,r,s,o,u,a=this._parts,f=this._renderer._bounds;for(e=0,n=0,r=this._rings.length;r>e;e++)for(u=this._rings[e],t=0,s=u.length;s-1>t;t++)o=i.LineUtil.clipSegment(u[t],u[t+1],f,t,!0),o&&(a[n]=a[n]||[],a[n].push(o[0]),(o[1]!==u[t+1]||t===s-2)&&(a[n].push(o[1]),n++))},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,n=0,r=e.length;r>n;n++)e[n]=i.LineUtil.simplify(e[n],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)}}),i.polyline=function(e,t){return new i.Polyline(e,t)},i.PolyUtil={},i.PolyUtil.clipPolygon=function(e,t,n){var r,s,o,u,a,f,l,c,h,p=[1,4,2,8],d=i.LineUtil;for(s=0,l=e.length;l>s;s++)e[s]._code=d._getBitCode(e[s],t);for(u=0;4>u;u++){for(c=p[u],r=[],s=0,l=e.length,o=l-1;l>s;o=s++)a=e[s],f=e[o],a._code&c?f._code&c||(h=d._getEdgeIntersection(f,a,c,t,n),h._code=d._getBitCode(h,t),r.push(h)):(f._code&c&&(h=d._getEdgeIntersection(f,a,c,t,n),h._code=d._getBitCode(h,t),r.push(h)),r.push(a));e=r}return e},i.Polygon=i.Polyline.extend({options:{fill:!0},getCenter:function(){var e,t,n,r,i,s,o,u,a,f=this._rings[0];for(o=u=a=0,e=0,n=f.length,t=n-1;n>e;t=e++)r=f[e],i=f[t],s=r.y*i.x-i.y*r.x,u+=(r.x+i.x)*s,a+=(r.y+i.y)*s,o+=3*s;return this._map.layerPointToLatLng([u/o,a/o])},_convertLatLngs:function(e){var t=i.Polyline.prototype._convertLatLngs.call(this,e),n=t.length;return n>=2&&t[0]instanceof i.LatLng&&t[0].equals(t[n-1])&&t.pop(),t},_clipPoints:function(){if(this.options.noClip)return void (this._parts=this._rings);var e=this._renderer._bounds,t=this.options.weight,n=new i.Point(t,t);e=new i.Bounds(e.min.subtract(n),e.max.add(n)),this._parts=[];for(var r,s=0,o=this._rings.length;o>s;s++)r=i.PolyUtil.clipPolygon(this._rings[s],e,!0),r.length&&this._parts.push(r)},_updatePath:function(){this._renderer._updatePoly(this,!0)}}),i.polygon=function(e,t){return new i.Polygon(e,t)},i.Rectangle=i.Polygon.extend({initialize:function(e,t){i.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=i.latLngBounds(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}}),i.rectangle=function(e,t){return new i.Rectangle(e,t)},i.CircleMarker=i.Path.extend({options:{fill:!0,radius:10},initialize:function(e,t){i.setOptions(this,t),this._latlng=i.latLng(e),this._radius=this.options.radius},setLatLng:function(e){return this._latlng=i.latLng(e),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return i.Path.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,n=this._clickTolerance(),r=[e+n,t+n];this._pxBounds=new i.Bounds(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}}),i.circleMarker=function(e,t){return new i.CircleMarker(e,t)},i.Circle=i.CircleMarker.extend({initialize:function(e,t,n){i.setOptions(this,n),this._latlng=i.latLng(e),this._mRadius=t},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY];return new i.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:i.Path.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===i.CRS.Earth.distance){var s=Math.PI/180,o=this._mRadius/i.CRS.Earth.R/s,u=n.project([t+o,e]),a=n.project([t-o,e]),f=u.add(a).divideBy(2),l=n.unproject(f).lat,c=Math.acos((Math.cos(o*s)-Math.sin(t*s)*Math.sin(l*s))/(Math.cos(t*s)*Math.cos(l*s)))/s;this._point=f.subtract(n.getPixelOrigin()),this._radius=isNaN(c)?0:Math.max(Math.round(f.x-n.project([l,e-c]).x),1),this._radiusY=Math.max(Math.round(f.y-u.y),1)}else{var h=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}}),i.circle=function(e,t,n){return new i.Circle(e,t,n)},i.SVG=i.Renderer.extend({_initContainer:function(){this._container=i.SVG.create("svg"),this._paths={},this._initEvents(),this._container.setAttribute("pointer-events","none")},_update:function(){if(!this._map._animatingZoom||!this._bounds){i.Renderer.prototype._update.call(this);var e=this._bounds,t=e.getSize(),n=this._container;i.DomUtil.setPosition(n,e.min),this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,n.setAttribute("width",t.x),n.setAttribute("height",t.y)),i.DomUtil.setPosition(n,e.min),n.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" "))}},_initPath:function(e){var t=e._path=i.SVG.create("path");e.options.className&&i.DomUtil.addClass(t,e.options.className),e.options.interactive&&i.DomUtil.addClass(t,"leaflet-interactive"),this._updateStyle(e)},_addPath:function(e){var t=e._path;this._container.appendChild(t),this._paths[i.stamp(t)]=e},_removePath:function(e){var t=e._path;i.DomUtil.remove(t),delete this._paths[i.stamp(t)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,n=e.options;t&&(n.stroke?(t.setAttribute("stroke",n.color),t.setAttribute("stroke-opacity",n.opacity),t.setAttribute("stroke-width",n.weight),t.setAttribute("stroke-linecap",n.lineCap),t.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?t.setAttribute("stroke-dasharray",n.dashArray):t.removeAttribute("stroke-dasharray"),n.dashOffset?t.setAttribute("stroke-dashoffset",n.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),n.fill?(t.setAttribute("fill",n.fillColor||n.color),t.setAttribute("fill-opacity",n.fillOpacity),t.setAttribute("fill-rule",n.fillRule||"evenodd")):t.setAttribute("fill","none"),t.setAttribute("pointer-events",n.pointerEvents||(n.interactive?"visiblePainted":"none")))},_updatePoly:function(e,t){this._setPath(e,i.SVG.pointsToPath(e._parts,t))},_updateCircle:function(e){var t=e._point,n=e._radius,r=e._radiusY||n,i="a"+n+","+r+" 0 1,0 ",s=e._empty()?"M0 0":"M"+(t.x-n)+","+t.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(e,s)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){i.DomUtil.toFront(e._path)},_bringToBack:function(e){i.DomUtil.toBack(e._path)},_initEvents:function(){i.DomEvent.on(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu",this._fireMouseEvent,this)},_fireMouseEvent:function(e){var t=this._paths[i.stamp(e.target||e.srcElement)];t&&t._fireMouseEvent(e)}}),i.extend(i.SVG,{create:function(e){return t.createElementNS("http://www.w3.org/2000/svg",e)},pointsToPath:function(e,t){var n,r,s,o,u,a,f="";for(n=0,s=e.length;s>n;n++){for(u=e[n],r=0,o=u.length;o>r;r++)a=u[r],f+=(r?"L":"M")+a.x+" "+a.y;f+=t?i.Browser.svg?"z":"x":""}return f||"M0 0"}}),i.Browser.svg=!!t.createElementNS&&!!i.SVG.create("svg").createSVGRect,i.svg=function(e){return i.Browser.svg||i.Browser.vml?new i.SVG(e):null},i.Browser.vml=!i.Browser.svg&&function(){try{var e=t.createElement("div");e.innerHTML='<v:shape adj="1"/>';var n=e.firstChild;return n.style.behavior="url(#default#VML)",n&&"object"==typeof n.adj}catch(r){return!1}}(),i.SVG.include(i.Browser.vml?{_initContainer:function(){this._container=i.DomUtil.create("div","leaflet-vml-container"),this._paths={},this._initEvents()},_update:function(){this._map._animatingZoom||i.Renderer.prototype._update.call(this)},_initPath:function(e){var t=e._container=i.SVG.create("shape");i.DomUtil.addClass(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=i.SVG.create("path"),t.appendChild(e._path),this._updateStyle(e)},_addPath:function(e){var t=e._container;this._container.appendChild(t),this._paths[i.stamp(t)]=e},_removePath:function(e){var t=e._container;i.DomUtil.remove(t),delete this._paths[i.stamp(t)]},_updateStyle:function(e){var t=e._stroke,n=e._fill,r=e.options,s=e._container;s.stroked=!!r.stroke,s.filled=!!r.fill,r.stroke?(t||(t=e._stroke=i.SVG.create("stroke"),s.appendChild(t)),t.weight=r.weight+"px",t.color=r.color,t.opacity=r.opacity,t.dashStyle=r.dashArray?i.Util.isArray(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):"",t.endcap=r.lineCap.replace("butt","flat"),t.joinstyle=r.lineJoin):t&&(s.removeChild(t),e._stroke=null),r.fill?(n||(n=e._fill=i.SVG.create("fill"),s.appendChild(n)),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(s.removeChild(n),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),n=Math.round(e._radius),r=Math.round(e._radiusY||n);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+n+","+r+" 0,23592600")},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){i.DomUtil.toFront(e._container)},_bringToBack:function(e){i.DomUtil.toBack(e._container)}}:{}),i.Browser.vml&&(i.SVG.create=function(){try{return t.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return t.createElement("<lvml:"+e+' class="lvml">')}}catch(e){return function(e){return t.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}()),i.Canvas=i.Renderer.extend({onAdd:function(){i.Renderer.prototype.onAdd.call(this),this._layers=this._layers||{},this._draw()},_initContainer:function(){var e=this._container=t.createElement("canvas");i.DomEvent.on(e,"mousemove",this._onMouseMove,this).on(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),this._ctx=e.getContext("2d")},_update:function(){if(!this._map._animatingZoom||!this._bounds){i.Renderer.prototype._update.call(this);var e=this._bounds,t=this._container,n=e.getSize(),r=i.Browser.retina?2:1;i.DomUtil.setPosition(t,e.min),t.width=r*n.x,t.height=r*n.y,t.style.width=n.x+"px",t.style.height=n.y+"px",i.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y)}},_initPath:function(e){this._layers[i.stamp(e)]=e},_addPath:i.Util.falseFn,_removePath:function(e){e._removed=!0,this._requestRedraw(e)},_updatePath:function(e){this._redrawBounds=e._pxBounds,this._draw(!0),e._project(),e._update(),this._draw(),this._redrawBounds=null},_updateStyle:function(e){this._requestRedraw(e)},_requestRedraw:function(e){this._map&&(this._redrawBounds=this._redrawBounds||new i.Bounds,this._redrawBounds.extend(e._pxBounds.min).extend(e._pxBounds.max),this._redrawRequest=this._redrawRequest||i.Util.requestAnimFrame(this._redraw,this))},_redraw:function(){this._redrawRequest=null,this._draw(!0),this._draw(),this._redrawBounds=null},_draw:function(e){this._clear=e;var t;for(var n in this._layers)t=this._layers[n],(!this._redrawBounds||t._pxBounds.intersects(this._redrawBounds))&&t._updatePath(),e&&t._removed&&(delete t._removed,delete this._layers[n])},_updatePoly:function(e,t){var n,r,i,s,o=e._parts,u=o.length,a=this._ctx;if(u){for(a.beginPath(),n=0;u>n;n++){for(r=0,i=o[n].length;i>r;r++)s=o[n][r],a[r?"lineTo":"moveTo"](s.x,s.y);t&&a.closePath()}this._fillStroke(a,e)}},_updateCircle:function(e){if(!e._empty()){var t=e._point,n=this._ctx,r=e._radius,i=(e._radiusY||r)/r;1!==i&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(t.x,t.y/i,r,0,2*Math.PI,!1),1!==i&&n.restore(),this._fillStroke(n,e)}},_fillStroke:function(e,t){var n=this._clear,r=t.options;e.globalCompositeOperation=n?"destination-out":"source-over",r.fill&&(e.globalAlpha=n?1:r.fillOpacity,e.fillStyle=r.fillColor||r.color,e.fill(r.fillRule||"evenodd")),r.stroke&&0!==r.weight&&(e.globalAlpha=n?1:r.opacity,t._prevWeight=e.lineWidth=n?t._prevWeight+1:r.weight,e.strokeStyle=r.color,e.lineCap=r.lineCap,e.lineJoin=r.lineJoin,e.stroke())},_onClick:function(e){var t=this._map.mouseEventToLayerPoint(e);for(var n in this._layers)this._layers[n]._containsPoint(t)&&this._layers[n]._fireMouseEvent(e)},_onMouseMove:function(e){if(this._map&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e);for(var n in this._layers)this._handleHover(this._layers[n],e,t)}},_handleHover:function(e,t,n){e.options.interactive&&(e._containsPoint(n)?(e._mouseInside||(i.DomUtil.addClass(this._container,"leaflet-interactive"),e._fireMouseEvent(t,"mouseover"),e._mouseInside=!0),e._fireMouseEvent(t)):e._mouseInside&&(i.DomUtil.removeClass(this._container,"leaflet-interactive"),e._fireMouseEvent(t,"mouseout"),e._mouseInside=!1))},_bringToFront:i.Util.falseFn,_bringToBack:i.Util.falseFn}),i.Browser.canvas=function(){return!!t.createElement("canvas").getContext}(),i.canvas=function(e){return i.Browser.canvas?new i.Canvas(e):null},i.Polyline.prototype._containsPoint=function(e,t){var n,r,s,o,u,a,f=this._clickTolerance();if(!this._pxBounds.contains(e))return!1;for(n=0,o=this._parts.length;o>n;n++)for(a=this._parts[n],r=0,u=a.length,s=u-1;u>r;s=r++)if((t||0!==r)&&i.LineUtil.pointToSegmentDistance(e,a[s],a[r])<=f)return!0;return!1},i.Polygon.prototype._containsPoint=function(e){var t,n,r,s,o,u,a,f,l=!1;if(!this._pxBounds.contains(e))return!1;for(s=0,a=this._parts.length;a>s;s++)for(t=this._parts[s],o=0,f=t.length,u=f-1;f>o;u=o++)n=t[o],r=t[u],n.y>e.y!=r.y>e.y&&e.x<(r.x-n.x)*(e.y-n.y)/(r.y-n.y)+n.x&&(l=!l);return l||i.Polyline.prototype._containsPoint.call(this,e,!0)},i.CircleMarker.prototype._containsPoint=function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()},i.GeoJSON=i.FeatureGroup.extend({initialize:function(e,t){i.setOptions(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,n,r,s=i.Util.isArray(e)?e:e.features;if(s){for(t=0,n=s.length;n>t;t++)r=s[t],(r.geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var o=this.options;if(o.filter&&!o.filter(e))return this;var u=i.GeoJSON.geometryToLayer(e,o);return u.feature=i.GeoJSON.asFeature(e),u.defaultOptions=u.options,this.resetStyle(u),o.onEachFeature&&o.onEachFeature(e,u),this.addLayer(u)},resetStyle:function(e){return e.options=e.defaultOptions,this._setLayerStyle(e,this.options.style),this},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){"function"==typeof t&&(t=t(e.feature)),e.setStyle&&e.setStyle(t)}}),i.extend(i.GeoJSON,{geometryToLayer:function(e,t){var n,r,s,o,u="Feature"===e.type?e.geometry:e,a=u.coordinates,f=[],l=t&&t.pointToLayer,c=t&&t.coordsToLatLng||this.coordsToLatLng;switch(u.type){case"Point":return n=c(a),l?l(e,n):new i.Marker(n);case"MultiPoint":for(s=0,o=a.length;o>s;s++)n=c(a[s]),f.push(l?l(e,n):new i.Marker(n));return new i.FeatureGroup(f);case"LineString":case"MultiLineString":return r=this.coordsToLatLngs(a,"LineString"===u.type?0:1,c),new i.Polyline(r,t);case"Polygon":case"MultiPolygon":return r=this.coordsToLatLngs(a,"Polygon"===u.type?1:2,c),new i.Polygon(r,t);case"GeometryCollection":for(s=0,o=u.geometries.length;o>s;s++)f.push(this.geometryToLayer({geometry:u.geometries[s],type:"Feature",properties:e.properties},t));return new i.FeatureGroup(f);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(e){return new i.LatLng(e[1],e[0],e[2])},coordsToLatLngs:function(e,t,n){for(var r,i=[],s=0,o=e.length;o>s;s++)r=t?this.coordsToLatLngs(e[s],t-1,n):(n||this.coordsToLatLng)(e[s]),i.push(r);return i},latLngToCoords:function(e){return e.alt!==n?[e.lng,e.lat,e.alt]:[e.lng,e.lat]},latLngsToCoords:function(e,t,n){for(var r=[],s=0,o=e.length;o>s;s++)r.push(t?i.GeoJSON.latLngsToCoords(e[s],t-1,n):i.GeoJSON.latLngToCoords(e[s]));return!t&&n&&r.push(r[0]),r},getFeature:function(e,t){return e.feature?i.extend({},e.feature,{geometry:t}):i.GeoJSON.asFeature(t)},asFeature:function(e){return"Feature"===e.type?e:{type:"Feature",properties:{},geometry:e}}});var o={toGeoJSON:function(){return i.GeoJSON.getFeature(this,{type:"Point",coordinates:i.GeoJSON.latLngToCoords(this.getLatLng())})}};i.Marker.include(o),i.Circle.include(o),i.CircleMarker.include(o),i.Polyline.prototype.toGeoJSON=function(){var e=!this._flat(this._latlngs),t=i.GeoJSON.latLngsToCoords(this._latlngs,e?1:0);return i.GeoJSON.getFeature(this,{type:(e?"Multi":"")+"LineString",coordinates:t})},i.Polygon.prototype.toGeoJSON=function(){var e=!this._flat(this._latlngs),t=e&&!this._flat(this._latlngs[0]),n=i.GeoJSON.latLngsToCoords(this._latlngs,t?2:e?1:0,!0);return e||(n=[n]),i.GeoJSON.getFeature(this,{type:(t?"Multi":"")+"Polygon",coordinates:n})},i.LayerGroup.include({toMultiPoint:function(){var e=[];return this.eachLayer(function(t){e.push(t.toGeoJSON().geometry.coordinates)}),i.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint();var t="GeometryCollection"===e,n=[];return this.eachLayer(function(e){if(e.toGeoJSON){var r=e.toGeoJSON();n.push(t?r.geometry:i.GeoJSON.asFeature(r))}}),t?i.GeoJSON.getFeature(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}}),i.geoJson=function(e,t){return new i.GeoJSON(e,t)};var u="_leaflet_events";i.DomEvent={on:function(e,t,n,r){if("object"==typeof t)for(var s in t)this._on(e,s,t[s],n);else{t=i.Util.splitWords(t);for(var o=0,u=t.length;u>o;o++)this._on(e,t[o],n,r)}return this},off:function(e,t,n,r){if("object"==typeof t)for(var s in t)this._off(e,s,t[s],n);else{t=i.Util.splitWords(t);for(var o=0,u=t.length;u>o;o++)this._off(e,t[o],n,r)}return this},_on:function(t,n,r,s){var o=n+i.stamp(r)+(s?"_"+i.stamp(s):"");if(t[u]&&t[u][o])return this;var a=function(n){return r.call(s||t,n||e.event)},f=a;return i.Browser.pointer&&0===n.indexOf("touch")?this.addPointerListener(t,n,a,o):i.Browser.touch&&"dblclick"===n&&this.addDoubleTapListener?this.addDoubleTapListener(t,a,o):"addEventListener"in t?"mousewheel"===n?(t.addEventListener("DOMMouseScroll",a,!1),t.addEventListener(n,a,!1)):"mouseenter"===n||"mouseleave"===n?(a=function(n){n=n||e.event,i.DomEvent._checkMouse(t,n)&&f(n)},t.addEventListener("mouseenter"===n?"mouseover":"mouseout",a,!1)):("click"===n&&i.Browser.android&&(a=function(e){return i.DomEvent._filterClick(e,f)}),t.addEventListener(n,a,!1)):"attachEvent"in t&&t.attachEvent("on"+n,a),t[u]=t[u]||{},t[u][o]=a,this},_off:function(e,t,n,r){var s=t+i.stamp(n)+(r?"_"+i.stamp(r):""),o=e[u]&&e[u][s];return o?(i.Browser.pointer&&0===t.indexOf("touch")?this.removePointerListener(e,t,s):i.Browser.touch&&"dblclick"===t&&this.removeDoubleTapListener?this.removeDoubleTapListener(e,s):"removeEventListener"in e?"mousewheel"===t?(e.removeEventListener("DOMMouseScroll",o,!1),e.removeEventListener(t,o,!1)):e.removeEventListener("mouseenter"===t?"mouseover":"mouseleave"===t?"mouseout":t,o,!1):"detachEvent"in e&&e.detachEvent("on"+t,o),e[u][s]=null,this):this},stopPropagation:function(e){return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,i.DomEvent._skipped(e),this},disableScrollPropagation:function(e){return i.DomEvent.on(e,"mousewheel MozMousePixelScroll",i.DomEvent.stopPropagation)},disableClickPropagation:function(e){var t=i.DomEvent.stopPropagation;return i.DomEvent.on(e,i.Draggable.START.join(" "),t),i.DomEvent.on(e,{click:i.DomEvent._fakeStop,dblclick:t})},preventDefault:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this},stop:function(e){return i.DomEvent.preventDefault(e).stopPropagation(e)},getMousePosition:function(e,t){if(!t)return new i.Point(e.clientX,e.clientY);var n=t.getBoundingClientRect();return new i.Point(e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop)},getWheelDelta:function(e){var t=0;return e.wheelDelta&&(t=e.wheelDelta/120),e.detail&&(t=-e.detail/3),t},_skipEvents:{},_fakeStop:function(e){i.DomEvent._skipEvents[e.type]=!0},_skipped:function(e){var t=this._skipEvents[e.type];return this._skipEvents[e.type]=!1,t},_checkMouse:function(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch(r){return!1}return n!==e},_filterClick:function(e,t){var n=e.timeStamp||e.originalEvent.timeStamp,r=i.DomEvent._lastClick&&n-i.DomEvent._lastClick;return r&&r>100&&500>r||e.target._simulatedClick&&!e._simulated?void i.DomEvent.stop(e):(i.DomEvent._lastClick=n,void t(e))}},i.DomEvent.addListener=i.DomEvent.on,i.DomEvent.removeListener=i.DomEvent.off,i.Draggable=i.Evented.extend({statics:{START:i.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(e,t){this._element=e,this._dragStartTarget=t||e},enable:function(){this._enabled||(i.DomEvent.on(this._dragStartTarget,i.Draggable.START.join(" "),this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(i.DomEvent.off(this._dragStartTarget,i.Draggable.START.join(" "),this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._moved=!1,!(e.shiftKey||1!==e.which&&1!==e.button&&!e.touches||(i.DomEvent.stopPropagation(e),i.DomUtil.hasClass(this._element,"leaflet-zoom-anim")||(i.DomUtil.disableImageDrag(),i.DomUtil.disableTextSelection(),this._moving)))){this.fire("down");var n=e.touches?e.touches[0]:e;this._startPoint=new i.Point(n.clientX,n.clientY),this._startPos=this._newPos=i.DomUtil.getPosition(this._element),i.DomEvent.on(t,i.Draggable.MOVE[e.type],this._onMove,this).on(t,i.Draggable.END[e.type],this._onUp,this)}},_onMove:function(e){if(e.touches&&e.touches.length>1)return void (this._moved=!0);var n=e.touches&&1===e.touches.length?e.touches[0]:e,r=new i.Point(n.clientX,n.clientY),s=r.subtract(this._startPoint);(s.x||s.y)&&(i.Browser.touch&&Math.abs(s.x)+Math.abs(s.y)<3||(i.DomEvent.preventDefault(e),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=i.DomUtil.getPosition(this._element).subtract(s),i.DomUtil.addClass(t.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,i.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(s),this._moving=!0,i.Util.cancelAnimFrame(this._animRequest),this._animRequest=i.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))},_updatePosition:function(){this.fire("predrag"),i.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){i.DomUtil.removeClass(t.body,"leaflet-dragging"),this._lastTarget&&(i.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var e in i.Draggable.MOVE)i.DomEvent.off(t,i.Draggable.MOVE[e],this._onMove,this).off(t,i.Draggable.END[e],this._onUp,this);i.DomUtil.enableImageDrag(),i.DomUtil.enableTextSelection(),this._moved&&this._moving&&(i.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),i.Handler=i.Class.extend({initialize:function(e){this._map=e},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),i.Map.mergeOptions({dragging:!0,inertia:!i.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1}),i.Map.Drag=i.Handler.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new i.Draggable(e._mapPane,e._container),this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),e.on("viewreset",this._onViewReset,this),e.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDown:function(){this._map.stop()},_onDragStart:function(){var e=this._map;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var e=this._lastTime=+(new Date),t=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(t),this._times.push(e),e-this._times[0]>50&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_onPreDrag:function(){var e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,i=(r-t+n)%e+t-n,s=(r+t+n)%e-t-n,o=Math.abs(i+n)<Math.abs(s+n)?i:s;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=o},_onDragEnd:function(e){var t=this._map,n=t.options,r=!n.inertia||this._times.length<2;if(t.fire("dragend",e),r)t.fire("moveend");else{var s=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,u=n.easeLinearity,a=s.multiplyBy(u/o),f=a.distanceTo([0,0]),l=Math.min(n.inertiaMaxSpeed,f),c=a.multiplyBy(l/f),h=l/(n.inertiaDeceleration*u),p=c.multiplyBy(-h/2).round();p.x&&p.y?(p=t._limitOffset(p,t.options.maxBounds),i.Util.requestAnimFrame(function(){t.panBy(p,{duration:h,easeLinearity:u,noMoveStart:!0,animate:!0})})):t.fire("moveend")}}}),i.Map.addInitHook("addHandler","dragging",i.Map.Drag),i.Map.mergeOptions({doubleClickZoom:!0}),i.Map.DoubleClickZoom=i.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,n=t.getZoom(),r=e.originalEvent.shiftKey?Math.ceil(n)-1:Math.floor(n)+1;"center"===t.options.doubleClickZoom?t.setZoom(r):t.setZoomAround(e.containerPoint,r)}}),i.Map.addInitHook("addHandler","doubleClickZoom",i.Map.DoubleClickZoom),i.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40}),i.Map.ScrollWheelZoom=i.Handler.extend({addHooks:function(){i.DomEvent.on(this._map._container,{mousewheel:this._onWheelScroll,MozMousePixelScroll:i.DomEvent.preventDefault},this),this._delta=0},removeHooks:function(){i.DomEvent.off(this._map._container,{mousewheel:this._onWheelScroll,MozMousePixelScroll:i.DomEvent.preventDefault},this)},_onWheelScroll:function(e){var t=i.DomEvent.getWheelDelta(e),n=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+(new Date));var r=Math.max(n-(+(new Date)-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i.bind(this._performZoom,this),r),i.DomEvent.stop(e)},_performZoom:function(){var e=this._map,t=this._delta,n=e.getZoom();e.stop(),t=t>0?Math.ceil(t):Math.floor(t),t=Math.max(Math.min(t,4),-4),t=e._limitZoom(n+t)-n,this._delta=0,this._startTime=null,t&&("center"===e.options.scrollWheelZoom?e.setZoom(n+t):e.setZoomAround(this._lastMousePos,n+t))}}),i.Map.addInitHook("addHandler","scrollWheelZoom",i.Map.ScrollWheelZoom),i.extend(i.DomEvent,{_touchstart:i.Browser.msPointer?"MSPointerDown":i.Browser.pointer?"pointerdown":"touchstart",_touchend:i.Browser.msPointer?"MSPointerUp":i.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(e,t,n){function r(e){var t;if(t=i.Browser.pointer?i.DomEvent._pointersCount:e.touches.length,!(t>1)){var n=Date.now(),r=n-(o||n);u=e.touches?e.touches[0]:e,a=r>0&&f>=r,o=n}}function s(){if(a){if(i.Browser.pointer){var e,n,r={};for(n in u)e=u[n],r[n]=e&&e.bind?e.bind(u):e;u=r}u.type="dblclick",t(u),o=null}}var o,u,a=!1,f=250,l="_leaflet_",c=this._touchstart,h=this._touchend;return e[l+c+n]=r,e[l+h+n]=s,e.addEventListener(c,r,!1),e.addEventListener(h,s,!1),this},removeDoubleTapListener:function(e,t){var n="_leaflet_",r=e[n+this._touchend+t];return e.removeEventListener(this._touchstart,e[n+this._touchstart+t],!1),e.removeEventListener(this._touchend,r,!1),this}}),i.extend(i.DomEvent,{POINTER_DOWN:i.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:i.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:i.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:i.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:{},_pointersCount:0,addPointerListener:function(e,t,n,r){return"touchstart"===t?this._addPointerStart(e,n,r):"touchmove"===t?this._addPointerMove(e,n,r):"touchend"===t&&this._addPointerEnd(e,n,r),this},removePointerListener:function(e,t,n){var r=e["_leaflet_"+t+n];return"touchstart"===t?e.removeEventListener(this.POINTER_DOWN,r,!1):"touchmove"===t?e.removeEventListener(this.POINTER_MOVE,r,!1):"touchend"===t&&(e.removeEventListener(this.POINTER_UP,r,!1),e.removeEventListener(this.POINTER_CANCEL,r,!1)),this},_addPointerStart:function(e,n,r){var s=i.bind(function(e){i.DomEvent.preventDefault(e),this._handlePointer(e,n)},this);if(e["_leaflet_touchstart"+r]=s,e.addEventListener(this.POINTER_DOWN,s,!1),!this._pointerDocListener){var o=i.bind(this._globalPointerUp,this);t.documentElement.addEventListener(this.POINTER_DOWN,i.bind(this._globalPointerDown,this),!0),t.documentElement.addEventListener(this.POINTER_MOVE,i.bind(this._globalPointerMove,this),!0),t.documentElement.addEventListener(this.POINTER_UP,o,!0),t.documentElement.addEventListener(this.POINTER_CANCEL,o,!0),this._pointerDocListener=!0}},_globalPointerDown:function(e){this._pointers[e.pointerId]=e,this._pointersCount++},_globalPointerMove:function(e){this._pointers[e.pointerId]&&(this._pointers[e.pointerId]=e)},_globalPointerUp:function(e){delete this._pointers[e.pointerId],this._pointersCount--},_handlePointer:function(e,t){e.touches=[];for(var n in this._pointers)e.touches.push(this._pointers[n]);e.changedTouches=[e],t(e)},_addPointerMove:function(e,t,n){var r=i.bind(function(e){(e.pointerType!==e.MSPOINTER_TYPE_MOUSE&&"mouse"!==e.pointerType||0!==e.buttons)&&this._handlePointer(e,t)},this);e["_leaflet_touchmove"+n]=r,e.addEventListener(this.POINTER_MOVE,r,!1)},_addPointerEnd:function(e,t,n){var r=i.bind(function(e){this._handlePointer(e,t)},this);e["_leaflet_touchend"+n]=r,e.addEventListener(this.POINTER_UP,r,!1),e.addEventListener(this.POINTER_CANCEL,r,!1)}}),i.Map.mergeOptions({touchZoom:i.Browser.touch&&!i.Browser.android23,bounceAtZoomLimits:!0}),i.Map.TouchZoom=i.Handler.extend({addHooks:function(){i.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){i.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var n=this._map;if(e.touches&&2===e.touches.length&&!n._animatingZoom&&!this._zooming){var r=n.mouseEventToLayerPoint(e.touches[0]),s=n.mouseEventToLayerPoint(e.touches[1]),o=n._getCenterLayerPoint();this._startCenter=r.add(s)._divideBy(2),this._startDist=r.distanceTo(s),this._moved=!1,this._zooming=!0,this._centerOffset=o.subtract(this._startCenter),n.stop(),i.DomEvent.on(t,"touchmove",this._onTouchMove,this).on(t,"touchend",this._onTouchEnd,this),i.DomEvent.preventDefault(e)}},_onTouchMove:function(e){if(e.touches&&2===e.touches.length&&this._zooming){var t=this._map,n=t.mouseEventToLayerPoint(e.touches[0]),r=t.mouseEventToLayerPoint(e.touches[1]);if(this._scale=n.distanceTo(r)/this._startDist,this._delta=n._add(r)._divideBy(2)._subtract(this._startCenter),!t.options.bounceAtZoomLimits){var s=t.getScaleZoom(this._scale);if(s<=t.getMinZoom()&&this._scale<1||s>=t.getMaxZoom()&&this._scale>1)return}this._moved||(t.fire("movestart").fire("zoomstart"),this._moved=!0),i.Util.cancelAnimFrame(this._animRequest),this._animRequest=i.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),i.DomEvent.preventDefault(e)}},_updateOnMove:function(){var e=this._map;this._center="center"===e.options.touchZoom?e.getCenter():e.layerPointToLatLng(this._getTargetCenter()),this._zoom=e.getScaleZoom(this._scale),e._animateZoom(this._center,this._zoom)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void (this._zooming=!1);this._zooming=!1,i.Util.cancelAnimFrame(this._animRequest),i.DomEvent.off(t,"touchmove",this._onTouchMove).off(t,"touchend",this._onTouchEnd);var e=this._map,n=e.getZoom(),r=this._zoom-n,s=e._limitZoom(r>0?Math.ceil(this._zoom):Math.floor(this._zoom));e._animateZoom(this._center,s,!0)},_getTargetCenter:function(){var e=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(e)}}),i.Map.addInitHook("addHandler","touchZoom",i.Map.TouchZoom),i.Map.mergeOptions({tap:!0,tapTolerance:15}),i.Map.Tap=i.Handler.extend({addHooks:function(){i.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){i.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(e.touches){if(i.DomEvent.preventDefault(e),this._fireClick=!0,e.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var n=e.touches[0],r=n.target;this._startPos=this._newPos=new i.Point(n.clientX,n.clientY),r.tagName&&"a"===r.tagName.toLowerCase()&&i.DomUtil.addClass(r,"leaflet-active"),this._holdTimeout=setTimeout(i.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",n))},this),1e3),this._simulateEvent("mousedown",n),i.DomEvent.on(t,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(e){if(clearTimeout(this._holdTimeout),i.DomEvent.off(t,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&e&&e.changedTouches){var n=e.changedTouches[0],r=n.target;r&&r.tagName&&"a"===r.tagName.toLowerCase()&&i.DomUtil.removeClass(r,"leaflet-active"),this._simulateEvent("mouseup",n),this._isTapValid()&&this._simulateEvent("click",n)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(e){var t=e.touches[0];this._newPos=new i.Point(t.clientX,t.clientY)},_simulateEvent:function(n,r){var i=t.createEvent("MouseEvents");i._simulated=!0,r.target._simulatedClick=!0,i.initMouseEvent(n,!0,!0,e,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),r.target.dispatchEvent(i)}}),i.Browser.touch&&!i.Browser.pointer&&i.Map.addInitHook("addHandler","tap",i.Map.Tap),i.Map.mergeOptions({boxZoom:!0}),i.Map.BoxZoom=i.Handler.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane},addHooks:function(){i.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){i.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_onMouseDown:function(e){return!e.shiftKey||1!==e.which&&1!==e.button?!1:(this._moved=!1,i.DomUtil.disableTextSelection(),i.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(e),void i.DomEvent.on(t,{contextmenu:i.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=i.DomUtil.create("div","leaflet-zoom-box",this._container),i.DomUtil.addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new i.Bounds(this._point,this._startPoint),n=t.getSize();i.DomUtil.setPosition(this._box,t.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(i.DomUtil.remove(this._box),i.DomUtil.removeClass(this._container,"leaflet-crosshair")),i.DomUtil.enableTextSelection(),i.DomUtil.enableImageDrag(),i.DomEvent.off(t,{contextmenu:i.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if((1===e.which||1===e.button)&&(this._finish(),this._moved)){var t=new i.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){27===e.keyCode&&this._finish()}}),i.Map.addInitHook("addHandler","boxZoom",i.Map.BoxZoom),i.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),i.Map.Keyboard=i.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(e){this._map=e,this._setPanOffset(e.options.keyboardPanOffset),this._setZoomOffset(e.options.keyboardZoomOffset)},addHooks:function(){var e=this._map._container;-1===e.tabIndex&&(e.tabIndex="0"),i.DomEvent.on(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),i.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var n=t.body,r=t.documentElement,i=n.scrollTop||r.scrollTop,s=n.scrollLeft||r.scrollLeft;this._map._container.focus(),e.scrollTo(s,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(e){var t,n,r=this._panKeys={},i=this.keyCodes;for(t=0,n=i.left.length;n>t;t++)r[i.left[t]]=[-1*e,0];for(t=0,n=i.right.length;n>t;t++)r[i.right[t]]=[e,0];for(t=0,n=i.down.length;n>t;t++)r[i.down[t]]=[0,e];for(t=0,n=i.up.length;n>t;t++)r[i.up[t]]=[0,-1*e]},_setZoomOffset:function(e){var t,n,r=this._zoomKeys={},i=this.keyCodes;for(t=0,n=i.zoomIn.length;n>t;t++)r[i.zoomIn[t]]=e;for(t=0,n=i.zoomOut.length;n>t;t++)r[i.zoomOut[t]]=-e},_addHooks:function(){i.DomEvent.on(t,"keydown",this._onKeyDown,this)},_removeHooks:function(){i.DomEvent.off(t,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t=e.keyCode,n=this._map;if(t in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;n.panBy(this._panKeys[t]),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else if(t in this._zoomKeys)n.setZoom(n.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[t]);else{if(27!==t)return;n.closePopup()}i.DomEvent.stop(e)}}}),i.Map.addInitHook("addHandler","keyboard",i.Map.Keyboard),i.Handler.MarkerDrag=i.Handler.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new i.Draggable(e,e)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),i.DomUtil.addClass(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&i.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var e=this._marker,t=e._shadow,n=i.DomUtil.getPosition(e._icon),r=e._map.layerPointToLatLng(n);t&&i.DomUtil.setPosition(t,n),e._latlng=r,e.fire("move",{latlng:r}).fire("drag")},_onDragEnd:function(e){this._marker.fire("moveend").fire("dragend",e)}}),i.Control=i.Class.extend({options:{position:"topright"},initialize:function(e){i.setOptions(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),r=e._controlCorners[n];return i.DomUtil.addClass(t,"leaflet-control"),-1!==n.indexOf("bottom")?r.insertBefore(t,r.firstChild):r.appendChild(t),this},remove:function(){return this._map?(i.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),i.control=function(e){return new i.Control(e)},i.Map.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){function e(e,s){var o=n+e+" "+n+s;t[e+s]=i.DomUtil.create("div",o,r)}var t=this._controlCorners={},n="leaflet-",r=this._controlContainer=i.DomUtil.create("div",n+"control-container",this._container);e("top","left"),e("top","right"),e("bottom","left"),e("bottom","right")},_clearControlPos:function(){i.DomUtil.remove(this._controlContainer)}}),i.Control.Zoom=i.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",n=i.DomUtil.create("div",t+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,t+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,t+"-out",n,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){this._disabled||this._map.zoomIn(e.shiftKey?3:1)},_zoomOut:function(e){this._disabled||this._map.zoomOut(e.shiftKey?3:1)},_createButton:function(e,t,n,r,s){var o=i.DomUtil.create("a",n,r);return o.innerHTML=e,o.href="#",o.title=t,i.DomEvent.on(o,"mousedown dblclick",i.DomEvent.stopPropagation).on(o,"click",i.DomEvent.stop).on(o,"click",s,this).on(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";i.DomUtil.removeClass(this._zoomInButton,t),i.DomUtil.removeClass(this._zoomOutButton,t),(this._disabled||e._zoom===e.getMinZoom())&&i.DomUtil.addClass(this._zoomOutButton,t),(this._disabled||e._zoom===e.getMaxZoom())&&i.DomUtil.addClass(this._zoomInButton,t)}}),i.Map.mergeOptions({zoomControl:!0}),i.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new i.Control.Zoom,this.addControl(this.zoomControl))}),i.control.zoom=function(e){return new i.Control.Zoom(e)},i.Control.Attribution=i.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(e){i.setOptions(this,e),this._attributions={}},onAdd:function(e){this._container=i.DomUtil.create("div","leaflet-control-attribution"),i.DomEvent&&i.DomEvent.disableClickPropagation(this._container);for(var t in e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),this._container},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(" | ")}}}),i.Map.mergeOptions({attributionControl:!0}),i.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new i.Control.Attribution).addTo(this))}),i.control.attribution=function(e){return new i.Control.Attribution(e)},i.Control.Scale=i.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",n=i.DomUtil.create("div",t),r=this.options;return this._addScales(r,t+"-line",n),e.on(r.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),n},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=i.DomUtil.create("div",t,n)),e.imperial&&(this._iScale=i.DomUtil.create("div",t,n))},_update:function(){var e=this._map,t=e.getSize().y/2,n=i.CRS.Earth.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),n=1e3>t?t+" m":t/1e3+" km";this._updateScale(this._mScale,n,t/e)},_updateImperial:function(e){var t,n,r,i=3.2808399*e;i>5280?(t=i/5280,n=this._getRoundNum(t),this._updateScale(this._iScale,n+" mi",n/t)):(r=this._getRoundNum(i),this._updateScale(this._iScale,r+" ft",r/i))},_updateScale:function(e,t,n){e.style.width=Math.round(this.options.maxWidth*n)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,t*n}}),i.control.scale=function(e){return new i.Control.Scale(e)},i.Control.Layers=i.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1},initialize:function(e,t,n){i.setOptions(this,n),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var r in e)this._addLayer(e[r],r);for(r in t)this._addLayer(t[r],r,!0)},onAdd:function(){return this._initLayout(),this._update(),this._container},addBaseLayer:function(e,t){return this._addLayer(e,t),this._update()},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._update()},removeLayer:function(e){return e.off("add remove",this._onLayerChange,this),delete this._layers[i.stamp(e)],this._update()},_initLayout:function(){var e="leaflet-control-layers",t=this._container=i.DomUtil.create("div",e);t.setAttribute("aria-haspopup",!0),i.Browser.touch?i.DomEvent.on(t,"click",i.DomEvent.stopPropagation):i.DomEvent.disableClickPropagation(t).disableScrollPropagation(t);var n=this._form=i.DomUtil.create("form",e+"-list");if(this.options.collapsed){i.Browser.android||i.DomEvent.on(t,{mouseenter:this._expand,mouseleave:this._collapse},this);var r=this._layersLink=i.DomUtil.create("a",e+"-toggle",t);r.href="#",r.title="Layers",i.Browser.touch?i.DomEvent.on(r,"click",i.DomEvent.stop).on(r,"click",this._expand,this):i.DomEvent.on(r,"focus",this._expand,this),i.DomEvent.on(n,"click",function(){setTimeout(i.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=i.DomUtil.create("div",e+"-base",n),this._separator=i.DomUtil.create("div",e+"-separator",n),this._overlaysList=i.DomUtil.create("div",e+"-overlays",n),t.appendChild(n)},_addLayer:function(e,t,n){e.on("add remove",this._onLayerChange,this);var r=i.stamp(e);this._layers[r]={layer:e,name:t,overlay:n},this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex))},_update:function(){if(!this._container)return this;i.DomUtil.empty(this._baseLayersList),i.DomUtil.empty(this._overlaysList);var e,t,n,r,s=0;for(n in this._layers)r=this._layers[n],this._addItem(r),t=t||r.overlay,e=e||!r.overlay,s+=r.overlay?0:1;return this.options.hideSingleBase&&(e=e&&s>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._layers[i.stamp(e.target)].overlay,n=t?"add"===e.type?"overlayadd":"overlayremove":"add"===e.type?"baselayerchange":null;n&&this._map.fire(n,e.target)},_createRadioElement:function(e,n){var r='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(n?' checked="checked"':"")+"/>",i=t.createElement("div");return i.innerHTML=r,i.firstChild},_addItem:function(e){var n,r=t.createElement("label"),s=this._map.hasLayer(e.layer);e.overlay?(n=t.createElement("input"),n.type="checkbox",n.className="leaflet-control-layers-selector",n.defaultChecked=s):n=this._createRadioElement("leaflet-base-layers",s),n.layerId=i.stamp(e.layer),i.DomEvent.on(n,"click",this._onInputClick,this);var o=t.createElement("span");o.innerHTML=" "+e.name,r.appendChild(n),r.appendChild(o);var u=e.overlay?this._overlaysList:this._baseLayersList;return u.appendChild(r),r},_onInputClick:function(){var e,t,n,r=this._form.getElementsByTagName("input"),i=[],s=[];this._handlingClick=!0;for(var o=0,u=r.length;u>o;o++)e=r[o],t=this._layers[e.layerId].layer,n=this._map.hasLayer(t),e.checked&&!n?i.push(t):!e.checked&&n&&s.push(t);for(o=0;o<s.length;o++)this._map.removeLayer(s[o]);for(o=0;o<i.length;o++)this._map.addLayer(i[o]);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){i.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){i.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded")}}),i.control.layers=function(e,t,n){return new i.Control.Layers(e,t,n)},i.PosAnimation=i.Evented.extend({run:function(e,t,n,r){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=i.DomUtil.getPosition(e),this._offset=t.subtract(this._startPos),this._startTime=+(new Date),this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=i.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(e){var t=+(new Date)-this._startTime,n=1e3*this._duration;n>t?this._runFrame(this._easeOut(t/n),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var n=this._startPos.add(this._offset.multiplyBy(e));t&&n._round(),i.DomUtil.setPosition(this._el,n),this.fire("step")},_complete:function(){i.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),i.Map.include({setView:function(e,t,r){if(t=t===n?this._zoom:this._limitZoom(t),e=this._limitCenter(i.latLng(e),t,this.options.maxBounds),r=r||{},this.stop(),this._loaded&&!r.reset&&r!==!0){r.animate!==n&&(r.zoom=i.extend({animate:r.animate},r.zoom),r.pan=i.extend({animate:r.animate},r.pan));var s=this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,r.zoom):this._tryAnimatedPan(e,r.pan);if(s)return clearTimeout(this._sizeTimer),this}return this._resetView(e,t),this},panBy:function(e,t){if(e=i.point(e).round(),t=t||{},!e.x&&!e.y)return this;if(t.animate!==!0&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom());if(this._panAnim||(this._panAnim=new i.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),t.animate!==!1){i.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(e);this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){i.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._floor();return(t&&t.animate)===!0||this.getSize().contains(n)?(this.panBy(n,t),(t&&t.animate)!==!1):!1}}),i.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4});var a=i.DomUtil.TRANSITION&&i.Browser.any3d&&!i.Browser.mobileOpera;a&&i.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),i.DomEvent.on(this._proxy,i.DomUtil.TRANSITION_END,this._catchTransitionEnd,this))}),i.Map.include(a?{_createAnimProxy:function(){var e=this._proxy=i.DomUtil.create("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(t){i.DomUtil.setTransform(e,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1))},this),this.on("load moveend",function(){var t=this.getCenter(),n=this.getZoom();i.DomUtil.setTransform(e,this.project(t,n),this.getZoomScale(n,1))},this)},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(t),s=this._getCenterOffset(e)._divideBy(1-1/r);return n.animate===!0||this.getSize().contains(s)?(i.Util.requestAnimFrame(function(){this.fire("movestart").fire("zoomstart")._animateZoom(e,t,!0)},this),!0):!1},_animateZoom:function(e,t,n){n&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,i.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,scale:this.getZoomScale(t),origin:this.latLngToLayerPoint(e),offset:this._getCenterOffset(e).multiplyBy(-1)})},_onZoomTransitionEnd:function(){this._animatingZoom=!1,i.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._resetView(this._animateToCenter,this._animateToZoom,!0,!0)}}:{}),i.Map.include({flyTo:function(e,t){function r(e){var t=(g*g-m*m+(e?-1:1)*w*w*y*y)/(2*(e?g:m)*w*y);return Math.log(Math.sqrt(t*t+1)-t)}function s(e){return(Math.exp(e)-Math.exp(-e))/2}function o(e){return(Math.exp(e)+Math.exp(-e))/2}function u(e){return s(e)/o(e)}function a(e){return m*(o(E)/o(E+b*e))}function f(e){return m*(o(E)*u(E+b*e)-s(E))/w}function l(e){return 1-Math.pow(1-e,1.5)}function c(){var n=(Date.now()-S)/T,r=l(n)*x;1>=n?(this._flyToFrame=i.Util.requestAnimFrame(c,this),this._resetView(this.unproject(h.add(p.subtract(h).multiplyBy(f(r)/y)),v),this.getScaleZoom(m/a(r),v),!0,!0)):this._resetView(e,t,!0,!0)}this.stop();var h=this.project(this.getCenter()),p=this.project(e),d=this.getSize(),v=this._zoom;e=i.latLng(e),t=t===n?v:t;var m=Math.max(d.x,d.y),g=m*this.getZoomScale(v,t),y=p.distanceTo(h),b=1.42,w=b*b,E=r(0),S=Date.now(),x=(r(1)-E)/b,T=1e3*x*.8;this.fire("zoomstart"),c.call(this)}}),i.Map.include({_defaultLocateOptions:{timeout:1e4,watch:!1},locate:function(e){if(e=this._locateOptions=i.extend({},this._defaultLocateOptions,e),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=i.bind(this._handleGeolocationResponse,this),n=i.bind(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,n,e):navigator.geolocation.getCurrentPosition(t,n,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){var t=e.code,n=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(e){var t=e.coords.latitude,n=e.coords.longitude,r=new i.LatLng(t,n),s=r.toBounds(e.coords.accuracy),o=this._locateOptions;if(o.setView){var u=this.getBoundsZoom(s);this.setView(r,o.maxZoom?Math.min(u,o.maxZoom):u)}var a={latlng:r,bounds:s,timestamp:e.timestamp};for(var f in e.coords)"number"==typeof e.coords[f]&&(a[f]=e.coords[f]);this.fire("locationfound",a)}})}(window,document),L.PhotonBase=L.Class.extend({forEach:function(e,t){Array.prototype.forEach.call(e,t)},ajax:function(e,t){typeof this.xhr=="object"&&this.xhr.abort(),this.xhr=new XMLHttpRequest;var n=this;this.xhr.open("GET",this.options.url+this.buildQueryString(this.getParams()),!0),this.xhr.onload=function(r){n.fire("ajax:return");if(this.status==200&&e){var i=this.response;i=JSON.parse(i),e.call(t||this,i)}delete this.xhr},this.fire("ajax:send"),this.xhr.send()},buildQueryString:function(e){var t=[];for(var n in e)e[n]&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},featureToPopupContent:function(e){var t=L.DomUtil.create("div","leaflet-photon-popup"),n=L.DomUtil.create("h3","",t);return n.innerHTML=e.properties.label,t}}),L.PhotonSearch=L.PhotonBase.extend({includes:L.Mixin.Events,options:{url:"http://photon.komoot.de/api/?",placeholder:"Start typing...",minChar:3,limit:5,submitDelay:300,includePosition:!0,noResultLabel:"No result",feedbackEmail:"photon@komoot.de"},CACHE:"",RESULTS:[],KEYS:{LEFT:37,UP:38,RIGHT:39,DOWN:40,TAB:9,RETURN:13,ESC:27,APPLE:91,SHIFT:16,ALT:17,CTRL:18},initialize:function(e,t,n){this.map=e,this.input=t,L.setOptions(this,n);var r=null;try{Object.defineProperty(this,"CURRENT",{get:function(){return r},set:function(e){typeof e=="object"&&(e=this.resultToIndex(e)),r=e}})}catch(i){}this.input.type="text",this.input.placeholder=this.options.placeholder,this.input.autocomplete="off",L.DomEvent.disableClickPropagation(this.input),L.DomEvent.on(this.input,"keydown",this.onKeyDown,this),L.DomEvent.on(this.input,"keyup",this.onKeyUp,this),L.DomEvent.on(this.input,"blur",this.onBlur,this),L.DomEvent.on(this.input,"focus",this.onFocus,this),this.createResultsContainer()},createResultsContainer:function(){this.resultsContainer=L.DomUtil.create("ul","photon-autocomplete",document.querySelector("body"))},resizeContainer:function(){var e=this.getLeft(this.input),t=this.getTop(this.input)+this.input.offsetHeight;this.resultsContainer.style.left=e+"px",this.resultsContainer.style.top=t+"px";var n=this.options.width?this.options.width:this.input.offsetWidth-2;this.resultsContainer.style.width=n+"px"},onKeyDown:function(e){switch(e.keyCode){case this.KEYS.TAB:this.CURRENT!==null&&this.setChoice(),L.DomEvent.stop(e);break;case this.KEYS.RETURN:L.DomEvent.stop(e),this.setChoice();break;case this.KEYS.ESC:L.DomEvent.stop(e),this.hide(),this.input.blur();break;case this.KEYS.DOWN:this.RESULTS.length>0&&(this.CURRENT!==null&&this.CURRENT<this.RESULTS.length-1?(this.CURRENT++,this.highlight()):this.CURRENT===null&&(this.CURRENT=0,this.highlight()));break;case this.KEYS.UP:this.CURRENT!==null&&L.DomEvent.stop(e),this.RESULTS.length>0&&(this.CURRENT>0?(this.CURRENT--,this.highlight()):this.CURRENT===0&&(this.CURRENT=null,this.highlight()))}},onKeyUp:function(e){var t=[this.KEYS.TAB,this.KEYS.RETURN,this.KEYS.LEFT,this.KEYS.RIGHT,this.KEYS.DOWN,this.KEYS.UP,this.KEYS.APPLE,this.KEYS.SHIFT,this.KEYS.ALT,this.KEYS.CTRL];t.indexOf(e.keyCode)===-1&&(typeof this.submitDelay=="number"&&(window.clearTimeout(this.submitDelay),delete this.submitDelay),this.submitDelay=window.setTimeout(L.Util.bind(this.search,this),this.options.submitDelay))},onBlur:function(e){this.fire("blur");var t=this;setTimeout(function(){t.hide()},100)},onFocus:function(e){this.fire("focus"),this.input.select()},clear:function(){this.RESULTS=[],this.CURRENT=null,this.CACHE="",this.resultsContainer.innerHTML=""},hide:function(){this.fire("hide"),this.clear(),this.resultsContainer.style.display="none"},setChoice:function(e){e=e||this.RESULTS[this.CURRENT],e&&(this.hide(),this.input.value="",this.fire("selected",{choice:e.feature}),this.onSelected(e.feature))},search:function(){var e=this.input.value;if(e.length<this.options.minChar){this.clear();return}if(!e){this.clear();return}if(e+""==this.CACHE+"")return;this.CACHE=e,this._do_search()},_do_search:function(){this.ajax(this.handleResults,this)},_onSelected:function(e){this.map.setView([e.geometry.coordinates[1],e.geometry.coordinates[0]],16)},onSelected:function(e){return(this.options.onSelected||this._onSelected).call(this,e)},_formatResult:function(e,t){var n=L.DomUtil.create("strong","",t),r=L.DomUtil.create("small","",t),i=[],s=this.formatType(e);n.innerHTML=e.properties.name,s&&i.push(s),e.properties.city&&e.properties.city!==e.properties.name&&i.push(e.properties.city),e.properties.country&&i.push(e.properties.country),r.innerHTML=i.join(", ")},formatResult:function(e,t){return(this.options.formatResult||this._formatResult).call(this,e,t)},formatType:function(e){return(this.options.formatType||this._formatType).call(this,e)},_formatType:function(e){return e.properties.osm_value},createResult:function(e){var t=L.DomUtil.create("li","",this.resultsContainer);this.formatResult(e,t);var n={feature:e,el:t};return L.DomEvent.on(t,"mouseover",function(e){this.CURRENT=n,this.highlight()},this),L.DomEvent.on(t,"mousedown",function(e){this.setChoice()},this),n},resultToIndex:function(e){var t=null;return this.forEach(this.RESULTS,function(n,r){if(n===e){t=r;return}}),t},handleResults:function(e){var t=this;this.clear(),this.resultsContainer.style.display="block",this.resizeContainer(),this.forEach(e.features,function(e,n){t.RESULTS.push(t.createResult(e))});if(e.features.length===0){var n=L.DomUtil.create("li","photon-no-result",this.resultsContainer);n.innerHTML=this.options.noResultLabel}if(this.options.feedbackEmail){var r=L.DomUtil.create("a","photon-feedback",this.resultsContainer);r.href="mailto:"+this.options.feedbackEmail,r.innerHTML="Feedback"}this.CURRENT=0,this.highlight(),this.options.resultsHandler&&this.options.resultsHandler(e)},highlight:function(){var e=this;this.forEach(this.RESULTS,function(t,n){n===e.CURRENT?L.DomUtil.addClass(t.el,"on"):L.DomUtil.removeClass(t.el,"on")})},getLeft:function(e){var t=e.offsetLeft;e=e.offsetParent;while(e)t+=e.offsetLeft,e=e.offsetParent;return t},getTop:function(e){var t=e.offsetTop;e=e.offsetParent;while(e)t+=e.offsetTop,e=e.offsetParent;return t},getParams:function(){return{q:this.CACHE,lang:this.options.lang,limit:this.options.limit,lat:this.options.includePosition?this.map.getCenter().lat:null,lon:this.options.includePosition?this.map.getCenter().lng:null}}}),L.Control.Photon=L.Control.extend({includes:L.Mixin.Events,onAdd:function(e,t){return this.map=e,this.container=L.DomUtil.create("div","leaflet-photon"),this.options=L.Util.extend(this.options,t),this.input=L.DomUtil.create("input","photon-input",this.container),this.search=new L.PhotonSearch(e,this.input,this.options),this.search.on("blur",this.forwardEvent,this),this.search.on("focus",this.forwardEvent,this),this.search.on("hide",this.forwardEvent,this),this.search.on("selected",this.forwardEvent,this),this.search.on("ajax:send",this.forwardEvent,this),this.search.on("ajax:return",this.forwardEvent,this),this.container},forwardEvent:function(e){this.fire(e.type,e)}}),L.Map.addInitHook(function(){this.options.photonControl&&(this.photonControl=new L.Control.Photon(this.options.photonControlOptions||{}),this.addControl(this.photonControl))}),L.PhotonReverse=L.PhotonBase.extend({includes:L.Mixin.Events,options:{url:"http://photon.komoot.de/reverse/?",limit:1,handleResults:null},initialize:function(e){L.setOptions(this,e)},doReverse:function(e){e=L.latLng(e),this.fire("reverse",{latlng:e}),this.latlng=e,this.ajax(this.handleResults,this)},_handleResults:function(e){console.log(e)},handleResults:function(e){return(this.options.handleResults||this._handleResults).call(this,e)},getParams:function(){return{lang:this.options.lang,limit:this.options.limit,lat:this.latlng.lat,lon:this.latlng.lng}}}),define("leaflet.photon",["leaflet"],function(){}),function(e,t){typeof define=="function"&&define.amd?define("events",[],t):typeof exports=="object"?module.exports=t():e.Events=t()}(this,function(){function e(e){function i(e){if(!n.hasOwnProperty(e)){if(r)throw'Events: The event "'+e+'" is not defined.';n[e]=[]}}var t,n={},r=typeof e!="undefined";if(r)for(t=0;t<e.length;t++)n[e[t]]=[];return{on:function(e,t){i(e),n[e].push(t)},one:function(e,t){i(e),n[e].push(function(){t.apply(null,arguments),n[e].splice(n[e].indexOf(this),1)})},off:function(e,t){var r;i(e),t?(r=n[e].indexOf(t),r!==-1&&n[e].splice(r,1)):n[e]=[]},fire:function(e){var t,r;i(e),r=n[e];for(t=0;t<r.length;t++)r[t].apply(null,Array.prototype.slice.call(arguments,1))}}}return function(){return e.apply(Object.create(e.prototype),arguments)}}),define("app/map",["leaflet","leaflet.photon","events"],function(e,t,n){function s(){r=e.map("map",{worldCopyJump:!0,photonControl:!0,photonControlOptions:{url:"https://photon.komoot.de/api/?",placeholder:"Fly to...",noResultLabel:"No results found.",includePosition:!1,feedbackEmail:null,onSelected:function(e){i.fire("locationSelected",e)}}}).setView([0,0],2),r.doubleClickZoom.disable(),e.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:16,minZoom:2}).addTo(r)}var r,i=n();return s(),{init:function(){return!0},getMap:function(){return r},addHandler:function(e,t){i.on(e,t)},getBoundsOfCircleFromLatLng:function(t,n){return circle=e.circle(t,n,{opacity:0}).addTo(r),bounds=circle.getBounds(),r.removeLayer(circle),bounds},geolocate:function(e){r.locate(),r.once("locationfound",function(t){r.off("locationfound locationerror"),e(!1,t.latlng)}),r.once("locationerror",function(t){r.off("locationfound locationerror"),e(!0,t)})}}}),!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(a,b){function s(e){var t=e.length,r=n.type(e);return"function"===r||n.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e}function x(e,t,r){if(n.isFunction(t))return n.grep(e,function(e,n){return!!t.call(e,n,e)!==r});if(t.nodeType)return n.grep(e,function(e){return e===t!==r});if("string"==typeof t){if(w.test(t))return n.filter(t,e,r);t=n.filter(t,e)}return n.grep(e,function(e){return g.call(t,e)>=0!==r})}function D(e,t){while((e=e[t])&&1!==e.nodeType);return e}function G(e){var t=F[e]={};return n.each(e.match(E)||[],function(e,n){t[n]=!0}),t}function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+K.uid++}function P(e,t,r){var i;if(void 0===r&&1===e.nodeType)if(i="data-"+t.replace(O,"-$1").toLowerCase(),r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:N.test(r)?n.parseJSON(r):r}catch(s){}M.set(e,t,r)}else r=void 0;return r}function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(e){}}function jb(e,t){return n.nodeName(e,"table")&&n.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function kb(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function lb(e){var t=gb.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function mb(e,t){for(var n=0,r=e.length;r>n;n++)L.set(e[n],"globalEval",!t||L.get(t[n],"globalEval"))}function nb(e,t){var r,i,s,o,u,a,f,l;if(1===t.nodeType){if(L.hasData(e)&&(o=L.access(e),u=L.set(t,o),l=o.events)){delete u.handle,u.events={};for(s in l)for(r=0,i=l[s].length;i>r;r++)n.event.add(t,s,l[s][r])}M.hasData(e)&&(a=M.access(e),f=n.extend({},a),M.set(t,f))}}function ob(e,t){var r=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&n.nodeName(e,t)?n.merge([e],r):r}function pb(e,t){var n=t.nodeName.toLowerCase();"input"===n&&T.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function sb(e,t){var r,i=n(t.createElement(e)).appendTo(t.body),s=a.getDefaultComputedStyle&&(r=a.getDefaultComputedStyle(i[0]))?r.display:n.css(i[0],"display");return i.detach(),s}function tb(e){var t=l,r=rb[e];return r||(r=sb(e,t),"none"!==r&&r||(qb=(qb||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=qb[0].contentDocument,t.write(),t.close(),r=sb(e,t),qb.detach()),rb[e]=r),r}function xb(e,t,r){var i,s,o,u,a=e.style;return r=r||wb(e),r&&(u=r.getPropertyValue(t)||r[t]),r&&(""!==u||n.contains(e.ownerDocument,e)||(u=n.style(e,t)),vb.test(u)&&ub.test(t)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=u,u=r.width,a.width=i,a.minWidth=s,a.maxWidth=o)),void 0!==u?u+"":u}function yb(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function Fb(e,t){if(t in e)return t;var n=t[0].toUpperCase()+t.slice(1),r=t,i=Eb.length;while(i--)if(t=Eb[i]+n,t in e)return t;return r}function Gb(e,t,n){var r=Ab.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function Hb(e,t,r,i,s){for(var o=r===(i?"border":"content")?4:"width"===t?1:0,u=0;4>o;o+=2)"margin"===r&&(u+=n.css(e,r+R[o],!0,s)),i?("content"===r&&(u-=n.css(e,"padding"+R[o],!0,s)),"margin"!==r&&(u-=n.css(e,"border"+R[o]+"Width",!0,s))):(u+=n.css(e,"padding"+R[o],!0,s),"padding"!==r&&(u+=n.css(e,"border"+R[o]+"Width",!0,s)));return u}function Ib(e,t,r){var i=!0,s="width"===t?e.offsetWidth:e.offsetHeight,o=wb(e),u="border-box"===n.css(e,"boxSizing",!1,o);if(0>=s||null==s){if(s=xb(e,t,o),(0>s||null==s)&&(s=e.style[t]),vb.test(s))return s;i=u&&(k.boxSizingReliable()||s===e.style[t]),s=parseFloat(s)||0}return s+Hb(e,t,r||(u?"border":"content"),i,o)+"px"}function Jb(e,t){for(var r,i,s,o=[],u=0,a=e.length;a>u;u++)i=e[u],i.style&&(o[u]=L.get(i,"olddisplay"),r=i.style.display,t?(o[u]||"none"!==r||(i.style.display=""),""===i.style.display&&S(i)&&(o[u]=L.access(i,"olddisplay",tb(i.nodeName)))):(s=S(i),"none"===r&&s||L.set(i,"olddisplay",s?r:n.css(i,"display"))));for(u=0;a>u;u++)i=e[u],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[u]||"":"none"));return e}function Kb(e,t,n,r,i){return new Kb.prototype.init(e,t,n,r,i)}function Sb(){return setTimeout(function(){Lb=void 0}),Lb=n.now()}function Tb(e,t){var n,r=0,i={height:e};for(t=t?1:0;4>r;r+=2-t)n=R[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function Ub(e,t,n){for(var r,i=(Rb[t]||[]).concat(Rb["*"]),s=0,o=i.length;o>s;s++)if(r=i[s].call(n,t,e))return r}function Vb(e,t,r){var i,s,o,u,a,f,l,c,h=this,p={},d=e.style,v=e.nodeType&&S(e),m=L.get(e,"fxshow");r.queue||(a=n._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,f=a.empty.fire,a.empty.fire=function(){a.unqueued||f()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,n.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(r.overflow=[d.overflow,d.overflowX,d.overflowY],l=n.css(e,"display"),c="none"===l?L.get(e,"olddisplay")||tb(e.nodeName):l,"inline"===c&&"none"===n.css(e,"float")&&(d.display="inline-block")),r.overflow&&(d.overflow="hidden",h.always(function(){d.overflow=r.overflow[0],d.overflowX=r.overflow[1],d.overflowY=r.overflow[2]}));for(i in t)if(s=t[i],Nb.exec(s)){if(delete t[i],o=o||"toggle"===s,s===(v?"hide":"show")){if("show"!==s||!m||void 0===m[i])continue;v=!0}p[i]=m&&m[i]||n.style(e,i)}else l=void 0;if(n.isEmptyObject(p))"inline"===("none"===l?tb(e.nodeName):l)&&(d.display=l);else{m?"hidden"in m&&(v=m.hidden):m=L.access(e,"fxshow",{}),o&&(m.hidden=!v),v?n(e).show():h.done(function(){n(e).hide()}),h.done(function(){var t;L.remove(e,"fxshow");for(t in p)n.style(e,t,p[t])});for(i in p)u=Ub(v?m[i]:0,i,h),i in m||(m[i]=u.start,v&&(u.end=u.start,u.start="width"===i||"height"===i?1:0))}}function Wb(e,t){var r,i,s,o,u;for(r in e)if(i=n.camelCase(r),s=t[i],o=e[r],n.isArray(o)&&(s=o[1],o=e[r]=o[0]),r!==i&&(e[i]=o,delete e[r]),u=n.cssHooks[i],u&&"expand"in u){o=u.expand(o),delete e[i];for(r in o)r in e||(e[r]=o[r],t[r]=s)}else t[i]=s}function Xb(e,t,r){var i,s,o=0,u=Qb.length,a=n.Deferred().always(function(){delete f.elem}),f=function(){if(s)return!1;for(var t=Lb||Sb(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,i=1-r,o=0,u=l.tweens.length;u>o;o++)l.tweens[o].run(i);return a.notifyWith(e,[l,i,n]),1>i&&u?n:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:n.extend({},t),opts:n.extend(!0,{specialEasing:{}},r),originalProperties:t,originalOptions:r,startTime:Lb||Sb(),duration:r.duration,tweens:[],createTween:function(t,r){var i=n.Tween(e,l.opts,t,r,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){var n=0,r=t?l.tweens.length:0;if(s)return this;for(s=!0;r>n;n++)l.tweens[n].run(1);return t?a.resolveWith(e,[l,t]):a.rejectWith(e,[l,t]),this}}),c=l.props;for(Wb(c,l.opts.specialEasing);u>o;o++)if(i=Qb[o].call(l,e,c,l.opts))return i;return n.map(c,Ub,l),n.isFunction(l.opts.start)&&l.opts.start.call(e,l),n.fx.timer(n.extend(f,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function qc(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var i,s=0,o=t.toLowerCase().match(E)||[];if(n.isFunction(r))while(i=o[s++])"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(r)):(e[i]=e[i]||[]).push(r)}}function rc(e,t,r,i){function u(l){var h;return s[l]=!0,n.each(e[l]||[],function(e,n){var a=n(t,r,i);return"string"!=typeof a||o||s[a]?o?!(h=a):void 0:(t.dataTypes.unshift(a),u(a),!1)}),h}var s={},o=e===mc;return u(t.dataTypes[0])||!s["*"]&&u("*")}function sc(e,t){var r,i,s=n.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((s[r]?e:i||(i={}))[r]=t[r]);return i&&n.extend(!0,e,i),e}function tc(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes;while("*"===a[0])a.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in u)if(u[i]&&u[i].test(r)){a.unshift(i);break}if(a[0]in n)s=a[0];else{for(i in n){if(!a[0]||e.converters[i+" "+a[0]]){s=i;break}o||(o=i)}s=s||o}return s?(s!==a[0]&&a.unshift(s),n[s]):void 0}function uc(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift())if("*"===s)s=a;else if("*"!==a&&a!==s){if(o=f[a+" "+s]||f["* "+s],!o)for(i in f)if(u=i.split(" "),u[1]===s&&(o=f[a+" "+u[0]]||f["* "+u[0]])){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}return{state:"success",data:t}}function Ac(e,t,r,i){var s;if(n.isArray(t))n.each(t,function(t,n){r||wc.test(e)?i(e,n):Ac(e+"["+("object"==typeof n?t:"")+"]",n,r,i)});else if(r||"object"!==n.type(t))i(e,t);else for(s in t)Ac(e+"["+s+"]",t[s],r,i)}function Jc(e){return n.isWindow(e)?e:9===e.nodeType&&e.defaultView}var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.3",n=function(e,t){return new n.fn.init(e,t)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(e,t){return t.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:d.call(this)},pushStack:function(e){var t=n.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return n.each(this,e,t)},map:function(e){return this.pushStack(n.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var e,t,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;for("boolean"==typeof u&&(l=u,u=arguments[a]||{},a++),"object"==typeof u||n.isFunction(u)||(u={}),a===f&&(u=this,a--);f>a;a++)if(null!=(e=arguments[a]))for(t in e)r=u[t],i=e[t],u!==i&&(l&&i&&(n.isPlainObject(i)||(s=n.isArray(i)))?(s?(s=!1,o=r&&n.isArray(r)?r:[]):o=r&&n.isPlainObject(r)?r:{},u[t]=n.extend(l,o,i)):void 0!==i&&(u[t]=i));return u},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===n.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!n.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"!==n.type(e)||e.nodeType||n.isWindow(e)?!1:e.constructor&&!j.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[i.call(e)]||"object":typeof e},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(e){return e.replace(p,"ms-").replace(q,r)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,u=s(e);if(n){if(u){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(u){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(o,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(s(Object(e))?n.merge(r,"string"==typeof e?[e]:e):f.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:g.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],s=0,o=e.length,u=!n;o>s;s++)r=!t(e[s],s),r!==u&&i.push(e[s]);return i},map:function(t,n,r){var i,o=0,u=t.length,a=s(t),f=[];if(a)for(;u>o;o++)i=n(t[o],o,r),null!=i&&f.push(i);else for(o in t)i=n(t[o],o,r),null!=i&&f.push(i);return e.apply([],f)},guid:1,proxy:function(e,t){var r,i,s;return"string"==typeof t&&(r=e[t],t=e,e=r),n.isFunction(e)?(i=d.call(arguments,2),s=function(){return e.apply(t||this,i.concat(d.call(arguments)))},s.guid=e.guid=e.guid||n.guid++,s):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){h["[object "+t+"]"]=t.toLowerCase()});var t=function(e){function ot(e,t,r,i){var s,u,f,l,c,d,g,y,S,x;if((t?t.ownerDocument||t:E)!==p&&h(t),t=t||p,r=r||[],l=t.nodeType,"string"!=typeof e||!e||1!==l&&9!==l&&11!==l)return r;if(!i&&v){if(11!==l&&(s=Z.exec(e)))if(f=s[1]){if(9===l){if(u=t.getElementById(f),!u||!u.parentNode)return r;if(u.id===f)return r.push(u),r}else if(t.ownerDocument&&(u=t.ownerDocument.getElementById(f))&&b(t,u)&&u.id===f)return r.push(u),r}else{if(s[2])return D.apply(r,t.getElementsByTagName(e)),r;if((f=s[3])&&n.getElementsByClassName)return D.apply(r,t.getElementsByClassName(f)),r}if(n.qsa&&(!m||!m.test(e))){if(y=g=w,S=t,x=1!==l&&e,1===l&&"object"!==t.nodeName.toLowerCase()){d=o(e),(g=t.getAttribute("id"))?y=g.replace(tt,"\\$&"):t.setAttribute("id",y),y="[id='"+y+"'] ",c=d.length;while(c--)d[c]=y+gt(d[c]);S=et.test(e)&&vt(t.parentNode)||t,x=d.join(",")}if(x)try{return D.apply(r,S.querySelectorAll(x)),r}catch(T){}finally{g||t.removeAttribute("id")}}}return a(e.replace(z,"$1"),t,r,i)}function ut(){function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function at(e){return e[w]=!0,e}function ft(e){var t=p.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function lt(e,t){var n=e.split("|"),i=e.length;while(i--)r.attrHandle[n[i]]=t}function ct(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||L)-(~e.sourceIndex||L);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function pt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function dt(e){return at(function(t){return t=+t,at(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function vt(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function mt(){}function gt(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function yt(e,t,n){var r=t.dir,i=n&&"parentNode"===r,s=x++;return t.first?function(t,n,s){while(t=t[r])if(1===t.nodeType||i)return e(t,n,s)}:function(t,n,o){var u,a,f=[S,s];if(o){while(t=t[r])if((1===t.nodeType||i)&&e(t,n,o))return!0}else while(t=t[r])if(1===t.nodeType||i){if(a=t[w]||(t[w]={}),(u=a[r])&&u[0]===S&&u[1]===s)return f[2]=u[2];if(a[r]=f,f[2]=e(t,n,o))return!0}}}function bt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function wt(e,t,n){for(var r=0,i=t.length;i>r;r++)ot(e,t[r],n);return n}function Et(e,t,n,r,i){for(var s,o=[],u=0,a=e.length,f=null!=t;a>u;u++)(s=e[u])&&(!n||n(s,r,i))&&(o.push(s),f&&t.push(u));return o}function St(e,t,n,r,i,s){return r&&!r[w]&&(r=St(r)),i&&!i[w]&&(i=St(i,s)),at(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||wt(t||"*",u.nodeType?[u]:u,[]),m=!e||!s&&t?v:Et(v,h,e,u,a),g=n?i||(s?e:d||r)?[]:o:m;if(n&&n(m,g,u,a),r){f=Et(g,p),r(f,[],u,a),l=f.length;while(l--)(c=f[l])&&(g[p[l]]=!(m[p[l]]=c))}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?H(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=Et(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):D.apply(o,g)})}function xt(e){for(var t,n,i,s=e.length,o=r.relative[e[0].type],u=o||r.relative[" "],a=o?1:0,l=yt(function(e){return e===t},u,!0),c=yt(function(e){return H(t,e)>-1},u,!0),h=[function(e,n,r){var i=!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r));return t=null,i}];s>a;a++)if(n=r.relative[e[a].type])h=[yt(bt(h),n)];else{if(n=r.filter[e[a].type].apply(null,e[a].matches),n[w]){for(i=++a;s>i;i++)if(r.relative[e[i].type])break;return St(a>1&&bt(h),a>1&&gt(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(z,"$1"),n,i>a&&xt(e.slice(a,i)),s>i&&xt(e=e.slice(i)),s>i&&gt(e))}h.push(n)}return bt(h)}function Tt(e,t){var n=t.length>0,i=e.length>0,s=function(s,o,u,a,l){var c,h,d,v=0,m="0",g=s&&[],y=[],b=f,w=s||i&&r.find.TAG("*",l),E=S+=null==b?1:Math.random()||.1,x=w.length;for(l&&(f=o!==p&&o);m!==x&&null!=(c=w[m]);m++){if(i&&c){h=0;while(d=e[h++])if(d(c,o,u)){a.push(c);break}l&&(S=E)}n&&((c=!d&&c)&&v--,s&&g.push(c))}if(v+=m,n&&m!==v){h=0;while(d=t[h++])d(g,y,o,u);if(s){if(v>0)while(m--)g[m]||y[m]||(y[m]=M.call(a));y=Et(y)}D.apply(a,y),l&&!s&&y.length>0&&v+t.length>1&&ot.uniqueSort(a)}return l&&(S=E,f=b),g};return n?at(s):s}var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w="sizzle"+1*new Date,E=e.document,S=0,x=0,T=ut(),N=ut(),C=ut(),k=function(e,t){return e===t&&(c=!0),0},L=1<<31,A={}.hasOwnProperty,O=[],M=O.pop,_=O.push,D=O.push,P=O.slice,H=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",I=F.replace("w","w#"),q="\\["+j+"*("+F+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+j+"*\\]",R=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+q+")*)|.*)\\)|)",U=new RegExp(j+"+","g"),z=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),W=new RegExp("^"+j+"*,"+j+"*"),X=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),V=new RegExp("="+j+"*([^\\]'\"]*?)"+j+"*\\]","g"),$=new RegExp(R),J=new RegExp("^"+I+"$"),K={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F.replace("w","w*")+")"),ATTR:new RegExp("^"+q),PSEUDO:new RegExp("^"+R),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/[+~]/,tt=/'|\\/g,nt=new RegExp("\\\\([\\da-f]{1,6}"+j+"?|("+j+")|.)","ig"),rt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},it=function(){h()};try{D.apply(O=P.call(E.childNodes),E.childNodes),O[E.childNodes.length].nodeType}catch(st){D={apply:O.length?function(e,t){_.apply(e,P.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}n=ot.support={},s=ot.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},h=ot.setDocument=function(e){var t,i,o=e?e.ownerDocument||e:E;return o!==p&&9===o.nodeType&&o.documentElement?(p=o,d=o.documentElement,i=o.defaultView,i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",it,!1):i.attachEvent&&i.attachEvent("onunload",it)),v=!s(o),n.attributes=ft(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ft(function(e){return e.appendChild(o.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Y.test(o.getElementsByClassName),n.getById=ft(function(e){return d.appendChild(e).id=w,!o.getElementsByName||!o.getElementsByName(w).length}),n.getById?(r.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&v){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},r.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){while(n=s[i++])1===n.nodeType&&r.push(n);return r}return s},r.find.CLASS=n.getElementsByClassName&&function(e,t){return v?t.getElementsByClassName(e):void 0},g=[],m=[],(n.qsa=Y.test(o.querySelectorAll))&&(ft(function(e){d.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+j+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+j+"*(?:value|"+B+")"),e.querySelectorAll("[id~="+w+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]")}),ft(function(e){var t=o.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+j+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Y.test(y=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ft(function(e){n.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),g.push("!=",R)}),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=Y.test(d.compareDocumentPosition),b=t||Y.test(d.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return c=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===o||e.ownerDocument===E&&b(E,e)?-1:t===o||t.ownerDocument===E&&b(E,t)?1:l?H(l,e)-H(l,t):0:4&r?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,r=0,i=e.parentNode,s=t.parentNode,u=[e],a=[t];if(!i||!s)return e===o?-1:t===o?1:i?-1:s?1:l?H(l,e)-H(l,t):0;if(i===s)return ct(e,t);n=e;while(n=n.parentNode)u.unshift(n);n=t;while(n=n.parentNode)a.unshift(n);while(u[r]===a[r])r++;return r?ct(u[r],a[r]):u[r]===E?-1:a[r]===E?1:0},o):p},ot.matches=function(e,t){return ot(e,null,null,t)},ot.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&h(e),t=t.replace(V,"='$1']"),!(!n.matchesSelector||!v||g&&g.test(t)||m&&m.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return ot(t,p,null,[e]).length>0},ot.contains=function(e,t){return(e.ownerDocument||e)!==p&&h(e),b(e,t)},ot.attr=function(e,t){(e.ownerDocument||e)!==p&&h(e);var i=r.attrHandle[t.toLowerCase()],s=i&&A.call(r.attrHandle,t.toLowerCase())?i(e,t,!v):void 0;return void 0!==s?s:n.attributes||!v?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},ot.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ot.uniqueSort=function(e){var t,r=[],i=0,s=0;if(c=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(k),c){while(t=e[s++])t===e[s]&&(i=r.push(s));while(i--)e.splice(r[i],1)}return l=null,e},i=ot.getText=function(e){var t,n="",r=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===s||4===s)return e.nodeValue}else while(t=e[r++])n+=i(t);return n},r=ot.selectors={cacheLength:50,createPseudo:at,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(nt,rt),e[3]=(e[3]||e[4]||e[5]||"").replace(nt,rt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ot.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ot.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&$.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(nt,rt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+j+")"+e+"("+j+"|$)"))&&T(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ot.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(U," ")+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===S&&f[1],h=f[0]===S&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(1===c.nodeType&&++h&&c===t){l[e]=[S,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===S)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:1===c.nodeType)&&++h&&(y&&((c[w]||(c[w]={}))[e]=[S,h]),c===t))break;return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||ot.error("unsupported pseudo: "+e);return i[w]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?at(function(e,n){var r,s=i(e,t),o=s.length;while(o--)r=H(e,s[o]),e[r]=!(n[r]=s[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:at(function(e){var t=[],n=[],r=u(e.replace(z,"$1"));return r[w]?at(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),t[0]=null,!n.pop()}}),has:at(function(e){return function(t){return ot(e,t).length>0}}),contains:at(function(e){return e=e.replace(nt,rt),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:at(function(e){return J.test(e||"")||ot.error("unsupported lang: "+e),e=e.replace(nt,rt).toLowerCase(),function(t){var n;do if(n=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:dt(function(){return[0]}),last:dt(function(e,t){return[t-1]}),eq:dt(function(e,t,n){return[0>n?n+t:n]}),even:dt(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:dt(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:dt(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:dt(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},r.pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=ht(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=pt(t);return mt.prototype=r.filters=r.pseudos,r.setFilters=new mt,o=ot.tokenize=function(e,t){var n,i,s,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=r.preFilter;while(u){(!n||(i=W.exec(u)))&&(i&&(u=u.slice(i[0].length)||u),a.push(s=[])),n=!1,(i=X.exec(u))&&(n=i.shift(),s.push({value:n,type:i[0].replace(z," ")}),u=u.slice(n.length));for(o in r.filter)!(i=K[o].exec(u))||f[o]&&!(i=f[o](i))||(n=i.shift(),s.push({value:n,type:o,matches:i}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ot.error(e):N(e,a).slice(0)},u=ot.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=o(e)),n=t.length;while(n--)s=xt(t[n]),s[w]?r.push(s):i.push(s);s=C(e,Tt(i,r)),s.selector=e}return s},a=ot.select=function(e,t,i,s){var a,f,l,c,h,p="function"==typeof e&&e,d=!s&&o(e=p.selector||e);if(i=i||[],1===d.length){if(f=d[0]=d[0].slice(0),f.length>2&&"ID"===(l=f[0]).type&&n.getById&&9===t.nodeType&&v&&r.relative[f[1].type]){if(t=(r.find.ID(l.matches[0].replace(nt,rt),t)||[])[0],!t)return i;p&&(t=t.parentNode),e=e.slice(f.shift().value.length)}a=K.needsContext.test(e)?0:f.length;while(a--){if(l=f[a],r.relative[c=l.type])break;if((h=r.find[c])&&(s=h(l.matches[0].replace(nt,rt),et.test(f[0].type)&&vt(t.parentNode)||t))){if(f.splice(a,1),e=s.length&&gt(f),!e)return D.apply(i,s),i;break}}}return(p||u(e,d))(s,t,!v,i,et.test(e)&&vt(t.parentNode)||t),i},n.sortStable=w.split("").sort(k).join("")===w,n.detectDuplicates=!!c,h(),n.sortDetached=ft(function(e){return 1&e.compareDocumentPosition(p.createElement("div"))}),ft(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||lt("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ft(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||lt("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),ft(function(e){return null==e.getAttribute("disabled")})||lt(B,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),ot}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;n.filter=function(e,t,r){var i=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?n.find.matchesSelector(i,e)?[i]:[]:n.find.matches(e,n.grep(t,function(e){return 1===e.nodeType}))},n.fn.extend({find:function(e){var t,r=this.length,i=[],s=this;if("string"!=typeof e)return this.pushStack(n(e).filter(function(){for(t=0;r>t;t++)if(n.contains(s[t],this))return!0}));for(t=0;r>t;t++)n.find(e,s[t],i);return i=this.pushStack(r>1?n.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(x(this,e||[],!1))},not:function(e){return this.pushStack(x(this,e||[],!0))},is:function(e){return!!x(this,"string"==typeof e&&u.test(e)?n(e):e||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(e,t){var r,i;if(!e)return this;if("string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:z.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||y).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof n?t[0]:t,n.merge(this,n.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:l,!0)),v.test(r[1])&&n.isPlainObject(t))for(r in t)n.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=l.getElementById(r[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=l,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):n.isFunction(e)?"undefined"!=typeof y.ready?y.ready(e):e(n):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),n.makeArray(e,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(e,t,r){var i=[],s=void 0!==r;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(s&&n(e).is(r))break;i.push(e)}return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),n.fn.extend({has:function(e){var t=n(e,this),r=t.length;return this.filter(function(){for(var e=0;r>e;e++)if(n.contains(this,t[e]))return!0})},closest:function(e,t){for(var r,i=0,s=this.length,o=[],a=u.test(e)||"string"!=typeof e?n(e,t||this.context):0;s>i;i++)for(r=this[i];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(a?a.index(r)>-1:1===r.nodeType&&n.find.matchesSelector(r,e))){o.push(r);break}return this.pushStack(o.length>1?n.unique(o):o)},index:function(e){return e?"string"==typeof e?g.call(n(e),this[0]):g.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(n.unique(n.merge(this.get(),n(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),n.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return n.dir(e,"parentNode")},parentsUntil:function(e,t,r){return n.dir(e,"parentNode",r)},next:function(e){return D(e,"nextSibling")},prev:function(e){return D(e,"previousSibling")},nextAll:function(e){return n.dir(e,"nextSibling")},prevAll:function(e){return n.dir(e,"previousSibling")},nextUntil:function(e,t,r){return n.dir(e,"nextSibling",r)},prevUntil:function(e,t,r){return n.dir(e,"previousSibling",r)},siblings:function(e){return n.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return n.sibling(e.firstChild)},contents:function(e){return e.contentDocument||n.merge([],e.childNodes)}},function(e,t){n.fn[e]=function(r,i){var s=n.map(this,t,r);return"Until"!==e.slice(-5)&&(i=r),i&&"string"==typeof i&&(s=n.filter(i,s)),this.length>1&&(C[e]||n.unique(s),B.test(e)&&s.reverse()),this.pushStack(s)}});var E=/\S+/g,F={};n.Callbacks=function(e){e="string"==typeof e?F[e]||G(e):n.extend({},e);var t,r,i,s,o,u,a=[],f=!e.once&&[],l=function(n){for(t=e.memory&&n,r=!0,u=s||0,s=0,o=a.length,i=!0;a&&o>u;u++)if(a[u].apply(n[0],n[1])===!1&&e.stopOnFalse){t=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):t?a=[]:c.disable())},c={add:function(){if(a){var r=a.length;!function u(t){n.each(t,function(t,r){var i=n.type(r);"function"===i?e.unique&&c.has(r)||a.push(r):r&&r.length&&"string"!==i&&u(r)})}(arguments),i?o=a.length:t&&(s=r,l(t))}return this},remove:function(){return a&&n.each(arguments,function(e,t){var r;while((r=n.inArray(t,a,r))>-1)a.splice(r,1),i&&(o>=r&&o--,u>=r&&u--)}),this},has:function(e){return e?n.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],o=0,this},disable:function(){return a=f=t=void 0,this},disabled:function(){return!a},lock:function(){return f=void 0,t||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return!a||r&&!f||(t=t||[],t=[e,t.slice?t.slice():t],i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},n.extend({Deferred:function(e){var t=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],r="pending",i={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var e=arguments;return n.Deferred(function(r){n.each(t,function(t,o){var u=n.isFunction(e[t])&&e[t];s[o[1]](function(){var e=u&&u.apply(this,arguments);e&&n.isFunction(e.promise)?e.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[o[0]+"With"](this===i?r.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?n.extend(e,i):i}},s={};return i.pipe=i.then,n.each(t,function(e,n){var o=n[2],u=n[3];i[n[1]]=o.add,u&&o.add(function(){r=u},t[1^e][2].disable,t[2][2].lock),s[n[0]]=function(){return s[n[0]+"With"](this===s?i:this,arguments),this},s[n[0]+"With"]=o.fireWith}),i.promise(s),e&&e.call(s,s),s},when:function(e){var t=0,r=d.call(arguments),i=r.length,s=1!==i||e&&n.isFunction(e.promise)?i:0,o=1===s?e:n.Deferred(),u=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?d.call(arguments):r,n===a?o.notifyWith(t,n):--s||o.resolveWith(t,n)}},a,f,l;if(i>1)for(a=new Array(i),f=new Array(i),l=new Array(i);i>t;t++)r[t]&&n.isFunction(r[t].promise)?r[t].promise().done(u(t,l,r)).fail(o.reject).progress(u(t,f,a)):--s;return s||o.resolveWith(l,r),o.promise()}});var H;n.fn.ready=function(e){return n.ready.promise().done(e),this},n.extend({isReady:!1,readyWait:1,holdReady:function(e){e?n.readyWait++:n.ready(!0)},ready:function(e){(e===!0?--n.readyWait:n.isReady)||(n.isReady=!0,e!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}}),n.ready.promise=function(e){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(e)},n.ready.promise();var J=n.access=function(e,t,r,i,s,o,u){var a=0,f=e.length,l=null==r;if("object"===n.type(r)){s=!0;for(a in r)n.access(e,t,a,r[a],!0,o,u)}else if(void 0!==i&&(s=!0,n.isFunction(i)||(u=!0),l&&(u?(t.call(e,i),t=null):(l=t,t=function(e,t,r){return l.call(n(e),r)})),t))for(;f>a;a++)t(e[a],r,u?i:i.call(e[a],a,t(e[a],r)));return s?e:l?t.call(e):f?t(e[0],r):o};n.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(e){if(!K.accepts(e))return 0;var t={},r=e[this.expando];if(!r){r=K.uid++;try{t[this.expando]={value:r},Object.defineProperties(e,t)}catch(i){t[this.expando]=r,n.extend(e,t)}}return this.cache[r]||(this.cache[r]={}),r},set:function(e,t,r){var i,s=this.key(e),o=this.cache[s];if("string"==typeof t)o[t]=r;else if(n.isEmptyObject(o))n.extend(this.cache[s],t);else for(i in t)o[i]=t[i];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,r){var i;return void 0===t||t&&"string"==typeof t&&void 0===r?(i=this.get(e,t),void 0!==i?i:this.get(e,n.camelCase(t))):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,i,s,o=this.key(e),u=this.cache[o];if(void 0===t)this.cache[o]={};else{n.isArray(t)?i=t.concat(t.map(n.camelCase)):(s=n.camelCase(t),t in u?i=[t,s]:(i=s,i=i in u?[i]:i.match(E)||[])),r=i.length;while(r--)delete u[i[r]]}},hasData:function(e){return!n.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;n.extend({hasData:function(e){return M.hasData(e)||L.hasData(e)},data:function(e,t,n){return M.access(e,t,n)},removeData:function(e,t){M.remove(e,t)},_data:function(e,t,n){return L.access(e,t,n)},_removeData:function(e,t){L.remove(e,t)}}),n.fn.extend({data:function(e,t){var r,i,s,o=this[0],u=o&&o.attributes;if(void 0===e){if(this.length&&(s=M.get(o),1===o.nodeType&&!L.get(o,"hasDataAttrs"))){r=u.length;while(r--)u[r]&&(i=u[r].name,0===i.indexOf("data-")&&(i=n.camelCase(i.slice(5)),P(o,i,s[i])));L.set(o,"hasDataAttrs",!0)}return s}return"object"==typeof e?this.each(function(){M.set(this,e)}):J(this,function(t){var r,i=n.camelCase(e);if(o&&void 0===t){if(r=M.get(o,e),void 0!==r)return r;if(r=M.get(o,i),void 0!==r)return r;if(r=P(o,i,void 0),void 0!==r)return r}else this.each(function(){var n=M.get(this,i);M.set(this,i,t),-1!==e.indexOf("-")&&void 0!==n&&M.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){M.remove(this,e)})}}),n.extend({queue:function(e,t,r){var i;return e?(t=(t||"fx")+"queue",i=L.get(e,t),r&&(!i||n.isArray(r)?i=L.access(e,t,n.makeArray(r)):i.push(r)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var r=n.queue(e,t),i=r.length,s=r.shift(),o=n._queueHooks(e,t),u=function(){n.dequeue(e,t)};"inprogress"===s&&(s=r.shift(),i--),s&&("fx"===t&&r.unshift("inprogress"),delete o.stop,s.call(e,u,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return L.get(e,r)||L.access(e,r,{empty:n.Callbacks("once memory").add(function(){L.remove(e,[t+"queue",r])})})}}),n.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?n.queue(this[0],e):void 0===t?this:this.each(function(){var r=n.queue(this,e,t);n._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&n.dequeue(this,e)})},dequeue:function(e){return this.each(function(){n.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,i=1,s=n.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(u--)r=L.get(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(t)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(e,t){return e=t||e,"none"===n.css(e,"display")||!n.contains(e.ownerDocument,e)},T=/^(?:checkbox|radio)$/i;!function(){var e=l.createDocumentFragment(),t=e.appendChild(l.createElement("div")),n=l.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),k.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;n.event={global:{},add:function(e,t,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g=L.get(e);if(g){r.handler&&(o=r,r=o.handler,s=o.selector),r.guid||(r.guid=n.guid++),(f=g.events)||(f=g.events={}),(u=g.handle)||(u=g.handle=function(t){return typeof n!==U&&n.event.triggered!==t.type?n.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(E)||[""],l=t.length;while(l--)a=Y.exec(t[l])||[],d=m=a[1],v=(a[2]||"").split(".").sort(),d&&(h=n.event.special[d]||{},d=(s?h.delegateType:h.bindType)||d,h=n.event.special[d]||{},c=n.extend({type:d,origType:m,data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&n.expr.match.needsContext.test(s),namespace:v.join(".")},o),(p=f[d])||(p=f[d]=[],p.delegateCount=0,h.setup&&h.setup.call(e,i,v,u)!==!1||e.addEventListener&&e.addEventListener(d,u,!1)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=r.guid)),s?p.splice(p.delegateCount++,0,c):p.push(c),n.event.global[d]=!0)}},remove:function(e,t,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g=L.hasData(e)&&L.get(e);if(g&&(f=g.events)){t=(t||"").match(E)||[""],l=t.length;while(l--)if(a=Y.exec(t[l])||[],d=m=a[1],v=(a[2]||"").split(".").sort(),d){h=n.event.special[d]||{},d=(i?h.delegateType:h.bindType)||d,p=f[d]||[],a=a[2]&&new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=p.length;while(o--)c=p[o],!s&&m!==c.origType||r&&r.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,h.remove&&h.remove.call(e,c));u&&!p.length&&(h.teardown&&h.teardown.call(e,v,g.handle)!==!1||n.removeEvent(e,d,g.handle),delete f[d])}else for(d in f)n.event.remove(e,d+t[l],r,i,!0);n.isEmptyObject(f)&&(delete g.handle,L.remove(e,"events"))}},trigger:function(e,t,r,i){var s,o,u,f,c,h,p,d=[r||l],v=j.call(e,"type")?e.type:e,m=j.call(e,"namespace")?e.namespace.split("."):[];if(o=u=r=r||l,3!==r.nodeType&&8!==r.nodeType&&!X.test(v+n.event.triggered)&&(v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),c=v.indexOf(":")<0&&"on"+v,e=e[n.expando]?e:new n.Event(v,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=m.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:n.makeArray(t,[e]),p=n.event.special[v]||{},i||!p.trigger||p.trigger.apply(r,t)!==!1)){if(!i&&!p.noBubble&&!n.isWindow(r)){for(f=p.delegateType||v,X.test(f+v)||(o=o.parentNode);o;o=o.parentNode)d.push(o),u=o;u===(r.ownerDocument||l)&&d.push(u.defaultView||u.parentWindow||a)}s=0;while((o=d[s++])&&!e.isPropagationStopped())e.type=s>1?f:p.bindType||v,h=(L.get(o,"events")||{})[e.type]&&L.get(o,"handle"),h&&h.apply(o,t),h=c&&o[c],h&&h.apply&&n.acceptData(o)&&(e.result=h.apply(o,t),e.result===!1&&e.preventDefault());return e.type=v,i||e.isDefaultPrevented()||p._default&&p._default.apply(d.pop(),t)!==!1||!n.acceptData(r)||c&&n.isFunction(r[v])&&!n.isWindow(r)&&(u=r[c],u&&(r[c]=null),n.event.triggered=v,r[v](),n.event.triggered=void 0,u&&(r[c]=u)),e.result}},dispatch:function(e){e=n.event.fix(e);var t,r,i,s,o,u=[],a=d.call(arguments),f=(L.get(this,"events")||{})[e.type]||[],l=n.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){u=n.event.handlers.call(this,e,f),t=0;while((s=u[t++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,r=0;while((o=s.handlers[r++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,i=((n.event.special[o.origType]||{}).handle||o.handler).apply(s.elem,a),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var r,i,s,o,u=[],a=t.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||"click"!==e.type))for(;f!==this;f=f.parentNode||this)if(f.disabled!==!0||"click"!==e.type){for(i=[],r=0;a>r;r++)o=t[r],s=o.selector+" ",void 0===i[s]&&(i[s]=o.needsContext?n(s,this).index(f)>=0:n.find(s,this,null,[f]).length),i[s]&&i.push(o);i.length&&u.push({elem:f,handlers:i})}return a<t.length&&u.push({elem:this,handlers:t.slice(a)}),u},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,s=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||l,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[n.expando])return e;var t,r,i,s=e.type,o=e,u=this.fixHooks[s];u||(this.fixHooks[s]=u=W.test(s)?this.mouseHooks:V.test(s)?this.keyHooks:{}),i=u.props?this.props.concat(u.props):this.props,e=new n.Event(o),t=i.length;while(t--)r=i[t],e[r]=o[r];return e.target||(e.target=l),3===e.target.nodeType&&(e.target=e.target.parentNode),u.filter?u.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return n.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,r,i){var s=n.extend(new n.Event,r,{type:e,isSimulated:!0,originalEvent:{}});i?n.event.trigger(s,null,t):n.event.dispatch.call(t,s),s.isDefaultPrevented()&&r.preventDefault()}},n.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},n.Event=function(e,t){return this instanceof n.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?Z:$):this.type=e,t&&n.extend(this,t),this.timeStamp=e&&e.timeStamp||n.now(),void (this[n.expando]=!0)):new n.Event(e,t)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Z,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Z,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Z,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){n.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,i=this,s=e.relatedTarget,o=e.handleObj;return(!s||s!==i&&!n.contains(i,s))&&(e.type=o.origType,r=o.handler.apply(this,arguments),e.type=t),r}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(e,t){var r=function(e){n.event.simulate(t,e.target,n.event.fix(e),!0)};n.event.special[t]={setup:function(){var n=this.ownerDocument||this,i=L.access(n,t);i||n.addEventListener(e,r,!0),L.access(n,t,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this,i=L.access(n,t)-1;i?L.access(n,t,i):(n.removeEventListener(e,r,!0),L.remove(n,t))}}}),n.fn.extend({on:function(e,t,r,i,s){var o,u;if("object"==typeof e){"string"!=typeof t&&(r=r||t,t=void 0);for(u in e)this.on(u,t,r,e[u],s);return this}if(null==r&&null==i?(i=t,r=t=void 0):null==i&&("string"==typeof t?(i=r,r=void 0):(i=r,r=t,t=void 0)),i===!1)i=$;else if(!i)return this;return 1===s&&(o=i,i=function(e){return n().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=n.guid++)),this.each(function(){n.event.add(this,e,i,r,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,n(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(s in e)this.off(s,t,e[s]);return this}return(t===!1||"function"==typeof t)&&(r=t,t=void 0),r===!1&&(r=$),this.each(function(){n.event.remove(this,e,r,t)})},trigger:function(e,t){return this.each(function(){n.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];return r?n.event.trigger(e,t,r,!0):void 0}});var ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bb=/<([\w:]+)/,cb=/<|&#?\w+;/,db=/<(?:script|style|link)/i,eb=/checked\s*(?:[^=]|=\s*.checked.)/i,fb=/^$|\/(?:java|ecma)script/i,gb=/^true\/(.*)/,hb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ib={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ib.optgroup=ib.option,ib.tbody=ib.tfoot=ib.colgroup=ib.caption=ib.thead,ib.th=ib.td,n.extend({clone:function(e,t,r){var i,s,o,u,a=e.cloneNode(!0),f=n.contains(e.ownerDocument,e);if(!(k.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||n.isXMLDoc(e)))for(u=ob(a),o=ob(e),i=0,s=o.length;s>i;i++)pb(o[i],u[i]);if(t)if(r)for(o=o||ob(e),u=u||ob(a),i=0,s=o.length;s>i;i++)nb(o[i],u[i]);else nb(e,a);return u=ob(a,"script"),u.length>0&&mb(u,!f&&ob(e,"script")),a},buildFragment:function(e,t,r,i){for(var s,o,u,a,f,l,c=t.createDocumentFragment(),h=[],p=0,d=e.length;d>p;p++)if(s=e[p],s||0===s)if("object"===n.type(s))n.merge(h,s.nodeType?[s]:s);else if(cb.test(s)){o=o||c.appendChild(t.createElement("div")),u=(bb.exec(s)||["",""])[1].toLowerCase(),a=ib[u]||ib._default,o.innerHTML=a[1]+s.replace(ab,"<$1></$2>")+a[2],l=a[0];while(l--)o=o.lastChild;n.merge(h,o.childNodes),o=c.firstChild,o.textContent=""}else h.push(t.createTextNode(s));c.textContent="",p=0;while(s=h[p++])if((!i||-1===n.inArray(s,i))&&(f=n.contains(s.ownerDocument,s),o=ob(c.appendChild(s),"script"),f&&mb(o),r)){l=0;while(s=o[l++])fb.test(s.type||"")&&r.push(s)}return c},cleanData:function(e){for(var t,r,i,s,o=n.event.special,u=0;void 0!==(r=e[u]);u++){if(n.acceptData(r)&&(s=r[L.expando],s&&(t=L.cache[s]))){if(t.events)for(i in t.events)o[i]?n.event.remove(r,i):n.removeEvent(r,i,t.handle);L.cache[s]&&delete L.cache[s]}delete M.cache[r[M.expando]]}}}),n.fn.extend({text:function(e){return J(this,function(e){return void 0===e?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=jb(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=jb(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var r,i=e?n.filter(e,this):this,s=0;null!=(r=i[s]);s++)t||1!==r.nodeType||n.cleanData(ob(r)),r.parentNode&&(t&&n.contains(r.ownerDocument,r)&&mb(ob(r,"script")),r.parentNode.removeChild(r));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(n.cleanData(ob(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return n.clone(this,e,t)})},html:function(e){return J(this,function(e){var t=this[0]||{},r=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!db.test(e)&&!ib[(bb.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(ab,"<$1></$2>");try{for(;i>r;r++)t=this[r]||{},1===t.nodeType&&(n.cleanData(ob(t,!1)),t.innerHTML=e);t=0}catch(s){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,n.cleanData(ob(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(t,r){t=e.apply([],t);var i,s,o,u,a,f,l=0,c=this.length,h=this,p=c-1,d=t[0],v=n.isFunction(d);if(v||c>1&&"string"==typeof d&&!k.checkClone&&eb.test(d))return this.each(function(e){var n=h.eq(e);v&&(t[0]=d.call(this,e,n.html())),n.domManip(t,r)});if(c&&(i=n.buildFragment(t,this[0].ownerDocument,!1,this),s=i.firstChild,1===i.childNodes.length&&(i=s),s)){for(o=n.map(ob(i,"script"),kb),u=o.length;c>l;l++)a=i,l!==p&&(a=n.clone(a,!0,!0),u&&n.merge(o,ob(a,"script"))),r.call(this[l],a,l);if(u)for(f=o[o.length-1].ownerDocument,n.map(o,lb),l=0;u>l;l++)a=o[l],fb.test(a.type||"")&&!L.access(a,"globalEval")&&n.contains(f,a)&&(a.src?n._evalUrl&&n._evalUrl(a.src):n.globalEval(a.textContent.replace(hb,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){n.fn[e]=function(e){for(var r,i=[],s=n(e),o=s.length-1,u=0;o>=u;u++)r=u===o?this:this.clone(!0),n(s[u])[t](r),f.apply(i,r.get());return this.pushStack(i)}});var qb,rb={},ub=/^margin/,vb=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wb=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):a.getComputedStyle(e,null)};!function(){var e,t,r=l.documentElement,i=l.createElement("div"),s=l.createElement("div");if(s.style){s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===s.style.backgroundClip,i.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",i.appendChild(s);function o(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",r.appendChild(i);var n=a.getComputedStyle(s,null);e="1%"!==n.top,t="4px"===n.width,r.removeChild(i)}a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return o(),e},boxSizingReliable:function(){return null==t&&o(),t},reliableMarginRight:function(){var e,t=s.appendChild(l.createElement("div"));return t.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",s.style.width="1px",r.appendChild(i),e=!parseFloat(a.getComputedStyle(t,null).marginRight),r.removeChild(i),s.removeChild(t),e}})}}(),n.swap=function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i};var zb=/^(none|table(?!-c[ea]).+)/,Ab=new RegExp("^("+Q+")(.*)$","i"),Bb=new RegExp("^([+-])=("+Q+")","i"),Cb={position:"absolute",visibility:"hidden",display:"block"},Db={letterSpacing:"0",fontWeight:"400"},Eb=["Webkit","O","Moz","ms"];n.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=xb(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,o,u,a=n.camelCase(t),f=e.style;return t=n.cssProps[a]||(n.cssProps[a]=Fb(f,a)),u=n.cssHooks[t]||n.cssHooks[a],void 0===r?u&&"get"in u&&void 0!==(s=u.get(e,!1,i))?s:f[t]:(o=typeof r,"string"===o&&(s=Bb.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(n.css(e,t)),o="number"),null!=r&&r===r&&("number"!==o||n.cssNumber[a]||(r+="px"),k.clearCloneStyle||""!==r||0!==t.indexOf("background")||(f[t]="inherit"),u&&"set"in u&&void 0===(r=u.set(e,r,i))||(f[t]=r)),void 0)}},css:function(e,t,r,i){var s,o,u,a=n.camelCase(t);return t=n.cssProps[a]||(n.cssProps[a]=Fb(e.style,a)),u=n.cssHooks[t]||n.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,r)),void 0===s&&(s=xb(e,t,i)),"normal"===s&&t in Db&&(s=Db[t]),""===r||r?(o=parseFloat(s),r===!0||n.isNumeric(o)?o||0:s):s}}),n.each(["height","width"],function(e,t){n.cssHooks[t]={get:function(e,r,i){return r?zb.test(n.css(e,"display"))&&0===e.offsetWidth?n.swap(e,Cb,function(){return Ib(e,t,i)}):Ib(e,t,i):void 0},set:function(e,r,i){var s=i&&wb(e);return Gb(e,r,i?Hb(e,t,i,"border-box"===n.css(e,"boxSizing",!1,s),s):0)}}}),n.cssHooks.marginRight=yb(k.reliableMarginRight,function(e,t){return t?n.swap(e,{display:"inline-block"},xb,[e,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(e,t){n.cssHooks[e+t]={expand:function(n){for(var r=0,i={},s="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+R[r]+t]=s[r]||s[r-2]||s[0];return i}},ub.test(e)||(n.cssHooks[e+t].set=Gb)}),n.fn.extend({css:function(e,t){return J(this,function(e,t,r){var i,s,o={},u=0;if(n.isArray(t)){for(i=wb(e),s=t.length;s>u;u++)o[t[u]]=n.css(e,t[u],!1,i);return o}return void 0!==r?n.style(e,t,r):n.css(e,t)},e,t,arguments.length>1)},show:function(){return Jb(this,!0)},hide:function(){return Jb(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}}),n.Tween=Kb,Kb.prototype={constructor:Kb,init:function(e,t,r,i,s,o){this.elem=e,this.prop=r,this.easing=s||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(n.cssNumber[r]?"":"px")},cur:function(){var e=Kb.propHooks[this.prop];return e&&e.get?e.get(this):Kb.propHooks._default.get(this)},run:function(e){var t,r=Kb.propHooks[this.prop];return this.pos=t=this.options.duration?n.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):Kb.propHooks._default.set(this),this}},Kb.prototype.init.prototype=Kb.prototype,Kb.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=n.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){n.fx.step[e.prop]?n.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[n.cssProps[e.prop]]||n.cssHooks[e.prop])?n.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Kb.propHooks.scrollTop=Kb.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},n.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},n.fx=Kb.prototype.init,n.fx.step={};var Lb,Mb,Nb=/^(?:toggle|show|hide)$/,Ob=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pb=/queueHooks$/,Qb=[Vb],Rb={"*":[function(e,t){var r=this.createTween(e,t),i=r.cur(),s=Ob.exec(t),o=s&&s[3]||(n.cssNumber[e]?"":"px"),u=(n.cssNumber[e]||"px"!==o&&+i)&&Ob.exec(n.css(r.elem,e)),a=1,f=20;if(u&&u[3]!==o){o=o||u[3],s=s||[],u=+i||1;do a=a||".5",u/=a,n.style(r.elem,e,u+o);while(a!==(a=r.cur()/i)&&1!==a&&--f)}return s&&(u=r.start=+u||+i||0,r.unit=o,r.end=s[1]?u+(s[1]+1)*s[2]:+s[2]),r}]};n.Animation=n.extend(Xb,{tweener:function(e,t){n.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var r,i=0,s=e.length;s>i;i++)r=e[i],Rb[r]=Rb[r]||[],Rb[r].unshift(t)},prefilter:function(e,t){t?Qb.unshift(e):Qb.push(e)}}),n.speed=function(e,t,r){var i=e&&"object"==typeof e?n.extend({},e):{complete:r||!r&&t||n.isFunction(e)&&e,duration:e,easing:r&&t||t&&!n.isFunction(t)&&t};return i.duration=n.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in n.fx.speeds?n.fx.speeds[i.duration]:n.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){n.isFunction(i.old)&&i.old.call(this),i.queue&&n.dequeue(this,i.queue)},i},n.fn.extend({fadeTo:function(e,t,n,r){return this.filter(S).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,r,i){var s=n.isEmptyObject(e),o=n.speed(t,r,i),u=function(){var t=Xb(this,n.extend({},e),o);(s||L.get(this,"finish"))&&t.stop(!0)};return u.finish=u,s||o.queue===!1?this.each(u):this.queue(o.queue,u)},stop:function(e,t,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,s=null!=e&&e+"queueHooks",o=n.timers,u=L.get(this);if(s)u[s]&&u[s].stop&&i(u[s]);else for(s in u)u[s]&&u[s].stop&&Pb.test(s)&&i(u[s]);for(s=o.length;s--;)o[s].elem!==this||null!=e&&o[s].queue!==e||(o[s].anim.stop(r),t=!1,o.splice(s,1));(t||!r)&&n.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,r=L.get(this),i=r[e+"queue"],s=r[e+"queueHooks"],o=n.timers,u=i?i.length:0;for(r.finish=!0,n.queue(this,e,[]),s&&s.stop&&s.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;u>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete r.finish})}}),n.each(["toggle","show","hide"],function(e,t){var r=n.fn[t];n.fn[t]=function(e,n,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(Tb(t,!0),e,n,i)}}),n.each({slideDown:Tb("show"),slideUp:Tb("hide"),slideToggle:Tb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){n.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),n.timers=[],n.fx.tick=function(){var e,t=0,r=n.timers;for(Lb=n.now();t<r.length;t++)e=r[t],e()||r[t]!==e||r.splice(t--,1);r.length||n.fx.stop(),Lb=void 0},n.fx.timer=function(e){n.timers.push(e),e()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Mb||(Mb=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Mb),Mb=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(e,t){return e=n.fx?n.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=l.createElement("input"),t=l.createElement("select"),n=t.appendChild(l.createElement("option"));e.type="checkbox",k.checkOn=""!==e.value,k.optSelected=n.selected,t.disabled=!0,k.optDisabled=!n.disabled,e=l.createElement("input"),e.value="t",e.type="radio",k.radioValue="t"===e.value}();var Yb,Zb,$b=n.expr.attrHandle;n.fn.extend({attr:function(e,t){return J(this,n.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){n.removeAttr(this,e)})}}),n.extend({attr:function(e,t,r){var i,s,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===U?n.prop(e,t,r):(1===o&&n.isXMLDoc(e)||(t=t.toLowerCase(),i=n.attrHooks[t]||(n.expr.match.bool.test(t)?Zb:Yb)),void 0===r?i&&"get"in i&&null!==(s=i.get(e,t))?s:(s=n.find.attr(e,t),null==s?void 0:s):null!==r?i&&"set"in i&&void 0!==(s=i.set(e,r,t))?s:(e.setAttribute(t,r+""),r):void n.removeAttr(e,t))},removeAttr:function(e,t){var r,i,s=0,o=t&&t.match(E);if(o&&1===e.nodeType)while(r=o[s++])i=n.propFix[r]||r,n.expr.match.bool.test(r)&&(e[i]=!1),e.removeAttribute(r)},attrHooks:{type:{set:function(e,t){if(!k.radioValue&&"radio"===t&&n.nodeName(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}}}),Zb={set:function(e,t,r){return t===!1?n.removeAttr(e,r):e.setAttribute(r,r),r}},n.each(n.expr.match.bool.source.match(/\w+/g),function(e,t){var r=$b[t]||n.find.attr;$b[t]=function(e,t,n){var i,s;return n||(s=$b[t],$b[t]=i,i=null!=r(e,t,n)?t.toLowerCase():null,$b[t]=s),i}});var _b=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(e,t){return J(this,n.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[n.propFix[e]||e]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,r){var i,s,o,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return o=1!==u||!n.isXMLDoc(e),o&&(t=n.propFix[t]||t,s=n.propHooks[t]),void 0!==r?s&&"set"in s&&void 0!==(i=s.set(e,r,t))?i:e[t]=r:s&&"get"in s&&null!==(i=s.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||_b.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ac=/[\t\r\n\f]/g;n.fn.extend({addClass:function(e){var t,r,i,s,o,u,a="string"==typeof e&&e,f=0,l=this.length;if(n.isFunction(e))return this.each(function(t){n(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(E)||[];l>f;f++)if(r=this[f],i=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(ac," "):" ")){o=0;while(s=t[o++])i.indexOf(" "+s+" ")<0&&(i+=s+" ");u=n.trim(i),r.className!==u&&(r.className=u)}return this},removeClass:function(e){var t,r,i,s,o,u,a=0===arguments.length||"string"==typeof e&&e,f=0,l=this.length;if(n.isFunction(e))return this.each(function(t){n(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(E)||[];l>f;f++)if(r=this[f],i=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(ac," "):"")){o=0;while(s=t[o++])while(i.indexOf(" "+s+" ")>=0)i=i.replace(" "+s+" "," ");u=e?n.trim(i):"",r.className!==u&&(r.className=u)}return this},toggleClass:function(e,t){var r=typeof e;return"boolean"==typeof t&&"string"===r?t?this.addClass(e):this.removeClass(e):this.each(n.isFunction(e)?function(r){n(this).toggleClass(e.call(this,r,this.className,t),t)}:function(){if("string"===r){var t,i=0,s=n(this),o=e.match(E)||[];while(t=o[i++])s.hasClass(t)?s.removeClass(t):s.addClass(t)}else(r===U||"boolean"===r)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||e===!1?"":L.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(ac," ").indexOf(t)>=0)return!0;return!1}});var bc=/\r/g;n.fn.extend({val:function(e){var t,r,i,s=this[0];if(arguments.length)return i=n.isFunction(e),this.each(function(r){var s;1===this.nodeType&&(s=i?e.call(this,r,n(this).val()):e,null==s?s="":"number"==typeof s?s+="":n.isArray(s)&&(s=n.map(s,function(e){return null==e?"":e+""})),t=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,s,"value")||(this.value=s))});if(s)return t=n.valHooks[s.type]||n.valHooks[s.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(r=t.get(s,"value"))?r:(r=s.value,"string"==typeof r?r.replace(bc,""):null==r?"":r)}}),n.extend({valHooks:{option:{get:function(e){var t=n.find.attr(e,"value");return null!=t?t:n.trim(n.text(e))}},select:{get:function(e){for(var t,r,i=e.options,s=e.selectedIndex,o="select-one"===e.type||0>s,u=o?null:[],a=o?s+1:i.length,f=0>s?a:o?s:0;a>f;f++)if(r=i[f],!(!r.selected&&f!==s||(k.optDisabled?r.disabled:null!==r.getAttribute("disabled"))||r.parentNode.disabled&&n.nodeName(r.parentNode,"optgroup"))){if(t=n(r).val(),o)return t;u.push(t)}return u},set:function(e,t){var r,i,s=e.options,o=n.makeArray(t),u=s.length;while(u--)i=s[u],(i.selected=n.inArray(i.value,o)>=0)&&(r=!0);return r||(e.selectedIndex=-1),o}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(e,t){return n.isArray(t)?e.checked=n.inArray(n(e).val(),t)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){n.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),n.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var cc=n.now(),dc=/\?/;n.parseJSON=function(e){return JSON.parse(e+"")},n.parseXML=function(e){var t,r;if(!e||"string"!=typeof e)return null;try{r=new DOMParser,t=r.parseFromString(e,"text/xml")}catch(i){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+e),t};var ec=/#.*$/,fc=/([?&])_=[^&]*/,gc=/^(.*?):[ \t]*([^\r\n]*)$/gm,hc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ic=/^(?:GET|HEAD)$/,jc=/^\/\//,kc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,lc={},mc={},nc="*/".concat("*"),oc=a.location.href,pc=kc.exec(oc.toLowerCase())||[];n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:oc,type:"GET",isLocal:hc.test(pc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":nc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?sc(sc(e,n.ajaxSettings),t):sc(n.ajaxSettings,e)},ajaxPrefilter:qc(lc),ajaxTransport:qc(mc),ajax:function(e,t){function T(e,t,o,a){var l,g,y,w,E,x=t;2!==b&&(b=2,u&&clearTimeout(u),r=void 0,s=a||"",S.readyState=e>0?4:0,l=e>=200&&300>e||304===e,o&&(w=tc(c,S,o)),w=uc(c,w,S,l),l?(c.ifModified&&(E=S.getResponseHeader("Last-Modified"),E&&(n.lastModified[i]=E),E=S.getResponseHeader("etag"),E&&(n.etag[i]=E)),204===e||"HEAD"===c.type?x="nocontent":304===e?x="notmodified":(x=w.state,g=w.data,y=w.error,l=!y)):(y=x,(e||!x)&&(x="error",0>e&&(e=0))),S.status=e,S.statusText=(t||x)+"",l?d.resolveWith(h,[g,x,S]):d.rejectWith(h,[S,x,y]),S.statusCode(m),m=void 0,f&&p.trigger(l?"ajaxSuccess":"ajaxError",[S,c,l?g:y]),v.fireWith(h,[S,x]),f&&(p.trigger("ajaxComplete",[S,c]),--n.active||n.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,s,o,u,a,f,l,c=n.ajaxSetup({},t),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?n(h):n.event,d=n.Deferred(),v=n.Callbacks("once memory"),m=c.statusCode||{},g={},y={},b=0,w="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!o){o={};while(t=gc.exec(s))o[t[1].toLowerCase()]=t[2]}t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else S.always(e[S.status]);return this},abort:function(e){var t=e||w;return r&&r.abort(t),T(0,t),this}};if(d.promise(S).complete=v.add,S.success=S.done,S.error=S.fail,c.url=((e||c.url||oc)+"").replace(ec,"").replace(jc,pc[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=n.trim(c.dataType||"*").toLowerCase().match(E)||[""],null==c.crossDomain&&(a=kc.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===pc[1]&&a[2]===pc[2]&&(a[3]||("http:"===a[1]?"80":"443"))===(pc[3]||("http:"===pc[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=n.param(c.data,c.traditional)),rc(lc,c,t,S),2===b)return S;f=n.event&&c.global,f&&0===n.active++&&n.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!ic.test(c.type),i=c.url,c.hasContent||(c.data&&(i=c.url+=(dc.test(i)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=fc.test(i)?i.replace(fc,"$1_="+cc++):i+(dc.test(i)?"&":"?")+"_="+cc++)),c.ifModified&&(n.lastModified[i]&&S.setRequestHeader("If-Modified-Since",n.lastModified[i]),n.etag[i]&&S.setRequestHeader("If-None-Match",n.etag[i])),(c.data&&c.hasContent&&c.contentType!==!1||t.contentType)&&S.setRequestHeader("Content-Type",c.contentType),S.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+nc+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)S.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,S,c)!==!1&&2!==b){w="abort";for(l in{success:1,error:1,complete:1})S[l](c[l]);if(r=rc(mc,c,t,S)){S.readyState=1,f&&p.trigger("ajaxSend",[S,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){S.abort("timeout")},c.timeout));try{b=1,r.send(g,T)}catch(x){if(!(2>b))throw x;T(-1,x)}}else T(-1,"No Transport");return S}return S.abort()},getJSON:function(e,t,r){return n.get(e,t,r,"json")},getScript:function(e,t){return n.get(e,void 0,t,"script")}}),n.each(["get","post"],function(e,t){n[t]=function(e,r,i,s){return n.isFunction(r)&&(s=s||i,i=r,r=void 0),n.ajax({url:e,type:t,dataType:s,data:r,success:i})}}),n._evalUrl=function(e){return n.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(e){var t;return n.isFunction(e)?this.each(function(t){n(this).wrapAll(e.call(this,t))}):(this[0]&&(t=n(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(n.isFunction(e)?function(t){n(this).wrapInner(e.call(this,t))}:function(){var t=n(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)})},wrap:function(e){var t=n.isFunction(e);return this.each(function(r){n(this).wrapAll(t?e.call(this,r):e)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},n.expr.filters.visible=function(e){return!n.expr.filters.hidden(e)};var vc=/%20/g,wc=/\[\]$/,xc=/\r?\n/g,yc=/^(?:submit|button|image|reset|file)$/i,zc=/^(?:input|select|textarea|keygen)/i;n.param=function(e,t){var r,i=[],s=function(e,t){t=n.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(e)||e.jquery&&!n.isPlainObject(e))n.each(e,function(){s(this.name,this.value)});else for(r in e)Ac(r,e[r],t,s);return i.join("&").replace(vc,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=n.prop(this,"elements");return e?n.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!n(this).is(":disabled")&&zc.test(this.nodeName)&&!yc.test(e)&&(this.checked||!T.test(e))}).map(function(e,t){var r=n(this).val();return null==r?null:n.isArray(r)?n.map(r,function(e){return{name:t.name,value:e.replace(xc,"\r\n")}}):{name:t.name,value:r.replace(xc,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Bc=0,Cc={},Dc={0:200,1223:204},Ec=n.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var e in Cc)Cc[e]()}),k.cors=!!Ec&&"withCredentials"in Ec,k.ajax=Ec=!!Ec,n.ajaxTransport(function(e){var t;return k.cors||Ec&&!e.crossDomain?{send:function(n,r){var i,s=e.xhr(),o=++Bc;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)s.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete Cc[o],t=s.onload=s.onerror=null,"abort"===e?s.abort():"error"===e?r(s.status,s.statusText):r(Dc[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:void 0,s.getAllResponseHeaders()))}},s.onload=t(),s.onerror=t("error"),t=Cc[o]=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(u){if(t)throw u}},abort:function(){t&&t()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return n.globalEval(e),e}}}),n.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),n.ajaxTransport("script",function(e){if(e.crossDomain){var t,r;return{send:function(i,s){t=n("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&s("error"===e.type?404:200,e.type)}),l.head.appendChild(t[0])},abort:function(){r&&r()}}}});var Fc=[],Gc=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Fc.pop()||n.expando+"_"+cc++;return this[e]=!0,e}}),n.ajaxPrefilter("json jsonp",function(e,t,r){var i,s,o,u=e.jsonp!==!1&&(Gc.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gc.test(e.data)&&"data");return u||"jsonp"===e.dataTypes[0]?(i=e.jsonpCallback=n.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,u?e[u]=e[u].replace(Gc,"$1"+i):e.jsonp!==!1&&(e.url+=(dc.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||n.error(i+" was not called"),o[0]},e.dataTypes[0]="json",s=a[i],a[i]=function(){o=arguments},r.always(function(){a[i]=s,e[i]&&(e.jsonpCallback=t.jsonpCallback,Fc.push(i)),o&&n.isFunction(s)&&s(o[0]),o=s=void 0}),"script"):void 0}),n.parseHTML=function(e,t,r){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(r=t,t=!1),t=t||l;var i=v.exec(e),s=!r&&[];return i?[t.createElement(i[1])]:(i=n.buildFragment([e],t,s),s&&s.length&&n(s).remove(),n.merge([],i.childNodes))};var Hc=n.fn.load;n.fn.load=function(e,t,r){if("string"!=typeof e&&Hc)return Hc.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=n.trim(e.slice(a)),e=e.slice(0,a)),n.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(s="POST"),u.length>0&&n.ajax({url:e,type:s,dataType:"html",data:t}).done(function(e){o=arguments,u.html(i?n("<div>").append(n.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,o||[e.responseText,t,e])}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){n.fn[t]=function(e){return this.on(t,e)}}),n.expr.filters.animated=function(e){return n.grep(n.timers,function(t){return e===t.elem}).length};var Ic=a.document.documentElement;n.offset={setOffset:function(e,t,r){var i,s,o,u,a,f,l,c=n.css(e,"position"),h=n(e),p={};"static"===c&&(e.style.position="relative"),a=h.offset(),o=n.css(e,"top"),f=n.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(o+f).indexOf("auto")>-1,l?(i=h.position(),u=i.top,s=i.left):(u=parseFloat(o)||0,s=parseFloat(f)||0),n.isFunction(t)&&(t=t.call(e,r,a)),null!=t.top&&(p.top=t.top-a.top+u),null!=t.left&&(p.left=t.left-a.left+s),"using"in t?t.using.call(e,p):h.css(p)}},n.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){n.offset.setOffset(this,e,t)});var t,r,i=this[0],s={top:0,left:0},o=i&&i.ownerDocument;if(o)return t=o.documentElement,n.contains(t,i)?(typeof i.getBoundingClientRect!==U&&(s=i.getBoundingClientRect()),r=Jc(o),{top:s.top+r.pageYOffset-t.clientTop,left:s.left+r.pageXOffset-t.clientLeft}):s},position:function(){if(this[0]){var e,t,r=this[0],i={top:0,left:0};return"fixed"===n.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),n.nodeName(e[0],"html")||(i=e.offset()),i.top+=n.css(e[0],"borderTopWidth",!0),i.left+=n.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-n.css(r,"marginTop",!0),left:t.left-i.left-n.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||Ic;while(e&&!n.nodeName(e,"html")&&"static"===n.css(e,"position"))e=e.offsetParent;return e||Ic})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var r="pageYOffset"===t;n.fn[e]=function(n){return J(this,function(e,n,i){var s=Jc(e);return void 0===i?s?s[t]:e[n]:void (s?s.scrollTo(r?a.pageXOffset:i,r?i:a.pageYOffset):e[n]=i)},e,n,arguments.length,null)}}),n.each(["top","left"],function(e,t){n.cssHooks[t]=yb(k.pixelPosition,function(e,r){return r?(r=xb(e,t),vb.test(r)?n(e).position()[t]+"px":r):void 0})}),n.each({Height:"height",Width:"width"},function(e,t){n.each({padding:"inner"+e,content:t,"":"outer"+e},function(r,i){n.fn[i]=function(i,s){var o=arguments.length&&(r||"boolean"!=typeof i),u=r||(i===!0||s===!0?"margin":"border");return J(this,function(t,r,i){var s;return n.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===i?n.css(t,r,u):n.style(t,r,i,u)},t,o?i:void 0,o,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Kc=a.jQuery,Lc=a.$;return n.noConflict=function(e){return a.$===n&&(a.$=Lc),e&&a.jQuery===n&&(a.jQuery=Kc),n},typeof b===U&&(a.jQuery=a.$=n),n}),!function(e,t){"function"==typeof define&&define.amd?define("nprogress",t):"object"==typeof exports?module.exports=t():e.NProgress=t()}(this,function(){function e(e,t,n){return t>e?t:e>n?n:e}function t(e){return 100*(-1+e)}function n(e,n,r){var i;return i="translate3d"===f.positionUsing?{transform:"translate3d("+t(e)+"%,0,0)"}:"translate"===f.positionUsing?{transform:"translate("+t(e)+"%,0)"}:{"margin-left":t(e)+"%"},i.transition="all "+n+"ms "+r,i}function r(e,t){var n="string"==typeof e?e:o(e);return n.indexOf(" "+t+" ")>=0}function i(e,t){var n=o(e),i=n+t;r(n,t)||(e.className=i.substring(1))}function s(e,t){var n,i=o(e);r(e,t)&&(n=i.replace(" "+t+" "," "),e.className=n.substring(1,n.length-1))}function o(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function u(e){e&&e.parentNode&&e.parentNode.removeChild(e)}var a={};a.version="0.1.6";var f=a.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};a.configure=function(e){var t,n;for(t in e)n=e[t],void 0!==n&&e.hasOwnProperty(t)&&(f[t]=n);return this},a.status=null,a.set=function(t){var r=a.isStarted();t=e(t,f.minimum,1),a.status=1===t?null:t;var i=a.render(!r),s=i.querySelector(f.barSelector),o=f.speed,u=f.easing;return i.offsetWidth,l(function(e){""===f.positionUsing&&(f.positionUsing=a.getPositioningCSS()),c(s,n(t,o,u)),1===t?(c(i,{transition:"none",opacity:1}),i.offsetWidth,setTimeout(function(){c(i,{transition:"all "+o+"ms linear",opacity:0}),setTimeout(function(){a.remove(),e()},o)},o)):setTimeout(e,o)}),this},a.isStarted=function(){return"number"==typeof a.status},a.start=function(){a.status||a.set(0);var e=function(){setTimeout(function(){a.status&&(a.trickle(),e())},f.trickleSpeed)};return f.trickle&&e(),this},a.done=function(e){return e||a.status?a.inc(.3+.5*Math.random()).set(1):this},a.inc=function(t){var n=a.status;return n?("number"!=typeof t&&(t=(1-n)*e(Math.random()*n,.1,.95)),n=e(n+t,0,.994),a.set(n)):a.start()},a.trickle=function(){return a.inc(Math.random()*f.trickleRate)},function(){var e=0,t=0;a.promise=function(n){return n&&"resolved"!=n.state()?(0==t&&a.start(),e++,t++,n.always(function(){t--,0==t?(e=0,a.done()):a.set((e-t)/e)}),this):this}}(),a.render=function(e){if(a.isRendered())return document.getElementById("nprogress");i(document.documentElement,"nprogress-busy");var n=document.createElement("div");n.id="nprogress",n.innerHTML=f.template;var r,s=n.querySelector(f.barSelector),o=e?"-100":t(a.status||0),l=document.querySelector(f.parent);return c(s,{transition:"all 0 linear",transform:"translate3d("+o+"%,0,0)"}),f.showSpinner||(r=n.querySelector(f.spinnerSelector),r&&u(r)),l!=document.body&&i(l,"nprogress-custom-parent"),l.appendChild(n),n},a.remove=function(){s(document.documentElement,"nprogress-busy"),s(document.querySelector(f.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&u(e)},a.isRendered=function(){return!!document.getElementById("nprogress")},a.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"};var l=function(){function e(){var n=t.shift();n&&n(e)}var t=[];return function(n){t.push(n),1==t.length&&e()}}(),c=function(){function e(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()})}function t(e){var t=document.body.style;if(e in t)return e;for(var n,r=i.length,s=e.charAt(0).toUpperCase()+e.slice(1);r--;)if(n=i[r]+s,n in t)return n;return e}function n(n){return n=e(n),s[n]||(s[n]=t(n))}function r(e,t,r){t=n(t),e.style[t]=r}var i=["Webkit","O","Moz","ms"],s={};return function(e,t){var n,i,s=arguments;if(2==s.length)for(n in t)i=t[n],void 0!==i&&t.hasOwnProperty(n)&&r(e,n,i);else r(e,s[1],s[2])}}();return a}),!function(e,t,n){function r(e){var t=S(),n=t.querySelector("h2"),r=t.querySelector("p"),i=t.querySelector("button.cancel"),s=t.querySelector("button.confirm");if(n.innerHTML=e.html?e.title:k(e.title).split("\n").join("<br>"),r.innerHTML=e.html?e.text:k(e.text||"").split("\n").join("<br>"),e.text&&A(r),e.customClass)N(t,e.customClass),t.setAttribute("data-custom-class",e.customClass);else{var o=t.getAttribute("data-custom-class");C(t,o),t.setAttribute("data-custom-class","")}if(M(t.querySelectorAll(".sa-icon")),e.type&&!l()){for(var a=!1,f=0;f<w.length;f++)if(e.type===w[f]){a=!0;break}if(!a)return c("Unknown alert type: "+e.type),!1;var h=t.querySelector(".sa-icon.sa-"+e.type);switch(A(h),e.type){case"success":N(h,"animate"),N(h.querySelector(".sa-tip"),"animateSuccessTip"),N(h.querySelector(".sa-long"),"animateSuccessLong");break;case"error":N(h,"animateErrorIcon"),N(h.querySelector(".sa-x-mark"),"animateXMark");break;case"warning":N(h,"pulseWarning"),N(h.querySelector(".sa-body"),"pulseWarningIns"),N(h.querySelector(".sa-dot"),"pulseWarningIns")}}if(e.imageUrl){var p=t.querySelector(".sa-icon.sa-custom");p.style.backgroundImage="url("+e.imageUrl+")",A(p);var d=80,v=80;if(e.imageSize){var m=e.imageSize.toString().split("x"),g=m[0],y=m[1];g&&y?(d=g,v=y):c("Parameter imageSize expects value with format WIDTHxHEIGHT, got "+e.imageSize)}p.setAttribute("style",p.getAttribute("style")+"width:"+d+"px; height:"+v+"px")}t.setAttribute("data-has-cancel-button",e.showCancelButton),e.showCancelButton?i.style.display="inline-block":M(i),t.setAttribute("data-has-confirm-button",e.showConfirmButton),e.showConfirmButton?s.style.display="inline-block":M(s),e.cancelButtonText&&(i.innerHTML=k(e.cancelButtonText)),e.confirmButtonText&&(s.innerHTML=k(e.confirmButtonText)),s.style.backgroundColor=e.confirmButtonColor,u(s,e.confirmButtonColor),t.setAttribute("data-allow-ouside-click",e.allowOutsideClick);var b=e.doneFunction?!0:!1;t.setAttribute("data-has-done-function",b),e.animation?t.setAttribute("data-animation","pop"):t.setAttribute("data-animation","none"),t.setAttribute("data-timer",e.timer)}function i(e,t){e=String(e).replace(/[^0-9a-f]/gi,""),e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var n,r,i="#";for(r=0;3>r;r++)n=parseInt(e.substr(2*r,2),16),n=Math.round(Math.min(Math.max(0,n+n*t),255)).toString(16),i+=("00"+n).substr(n.length);return i}function s(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function o(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?parseInt(t[1],16)+", "+parseInt(t[2],16)+", "+parseInt(t[3],16):null}function u(e,t){var n=o(t);e.style.boxShadow="0 0 2px rgba("+n+", 0.8), inset 0 0 0 1px rgba(0, 0, 0, 0.05)"}function a(){var e=S();P(x(),10),A(e),N(e,"showSweetAlert"),C(e,"hideSweetAlert"),h=t.activeElement;var n=e.querySelector("button.confirm");n.focus(),setTimeout(function(){N(e,"visible")},500);var r=e.getAttribute("data-timer");"null"!==r&&""!==r&&(e.timeout=setTimeout(function(){m.close()},r))}function f(){var e=S();e.style.marginTop=D(S())}function l(){return e.attachEvent&&!e.addEventListener?!0:!1}function c(t){e.console&&e.console.log("SweetAlert: "+t)}var h,p,d,v,m,g,y=".sweet-alert",b=".sweet-overlay",w=["error","warning","info","success"],E={title:"",text:"",type:null,allowOutsideClick:!1,showConfirmButton:!0,showCancelButton:!1,closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",confirmButtonColor:"#AEDEF4",cancelButtonText:"Cancel",imageUrl:null,imageSize:null,timer:null,customClass:"",html:!1,animation:!0,allowEscapeKey:!0},S=function(){var e=t.querySelector(y);return e||(F(),e=S()),e},x=function(){return t.querySelector(b)},T=function(e,t){return(new RegExp(" "+t+" ")).test(" "+e.className+" ")},N=function(e,t){T(e,t)||(e.className+=" "+t)},C=function(e,t){var n=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(T(e,t)){for(;n.indexOf(" "+t+" ")>=0;)n=n.replace(" "+t+" "," ");e.className=n.replace(/^\s+|\s+$/g,"")}},k=function(e){var n=t.createElement("div");return n.appendChild(t.createTextNode(e)),n.innerHTML},L=function(e){e.style.opacity="",e.style.display="block"},A=function(e){if(e&&!e.length)return L(e);for(var t=0;t<e.length;++t)L(e[t])},O=function(e){e.style.opacity="",e.style.display="none"},M=function(e){if(e&&!e.length)return O(e);for(var t=0;t<e.length;++t)O(e[t])},_=function(e,t){for(var n=t.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return!1},D=function(e){e.style.left="-9999px",e.style.display="block";var t,n=e.clientHeight;return t="undefined"!=typeof getComputedStyle?parseInt(getComputedStyle(e).getPropertyValue("padding"),10):parseInt(e.currentStyle.padding),e.style.left="",e.style.display="none","-"+parseInt(n/2+t)+"px"},P=function(e,t){if(+e.style.opacity<1){t=t||16,e.style.opacity=0,e.style.display="block";var n=+(new Date),r=function(){e.style.opacity=+e.style.opacity+(new Date-n)/100,n=+(new Date),+e.style.opacity<1&&setTimeout(r,t)};r()}e.style.display="block"},H=function(e,t){t=t||16,e.style.opacity=1;var n=+(new Date),r=function(){e.style.opacity=+e.style.opacity-(new Date-n)/100,n=+(new Date),+e.style.opacity>0?setTimeout(r,t):e.style.display="none"};r()},B=function(n){if("function"==typeof MouseEvent){var r=new MouseEvent("click",{view:e,bubbles:!1,cancelable:!0});n.dispatchEvent(r)}else if(t.createEvent){var i=t.createEvent("MouseEvents");i.initEvent("click",!1,!1),n.dispatchEvent(i)}else t.createEventObject?n.fireEvent("onclick"):"function"==typeof n.onclick&&n.onclick()},j=function(t){"function"==typeof t.stopPropagation?(t.stopPropagation(),t.preventDefault()):e.event&&e.event.hasOwnProperty("cancelBubble")&&(e.event.cancelBubble=!0)},F=function(){var e='<div class="sweet-overlay" tabIndex="-1"></div><div class="sweet-alert" tabIndex="-1"><div class="sa-icon sa-error"><span class="sa-x-mark"><span class="sa-line sa-left"></span><span class="sa-line sa-right"></span></span></div><div class="sa-icon sa-warning"> <span class="sa-body"></span> <span class="sa-dot"></span> </div> <div class="sa-icon sa-info"></div> <div class="sa-icon sa-success"> <span class="sa-line sa-tip"></span> <span class="sa-line sa-long"></span> <div class="sa-placeholder"></div> <div class="sa-fix"></div> </div> <div class="sa-icon sa-custom"></div> <h2>Title</h2><p>Text</p><button class="cancel" tabIndex="2">Cancel</button><button class="confirm" tabIndex="1">OK</button></div>',n=t.createElement("div");for(n.innerHTML=e;n.firstChild;)t.body.appendChild(n.firstChild)};m=g=function(){function o(e){var t=g;return"undefined"!=typeof t[e]?t[e]:E[e]}function l(t){var r=t||e.event,i=r.keyCode||r.which;if(-1!==[9,13,32,27].indexOf(i)){for(var s=r.target||r.srcElement,o=-1,a=0;a<D.length;a++)if(s===D[a]){o=a;break}9===i?(s=-1===o?O:o===D.length-1?D[0]:D[o+1],j(r),s.focus(),u(s,y.confirmButtonColor)):(s=13===i||32===i?-1===o?O:n:27===i&&y.allowEscapeKey===!0?M:n,s!==n&&B(s,r))}}function h(t){var n=t||e.event,r=n.target||n.srcElement,i=n.relatedTarget,s=T(C,"visible");if(s){var o=-1;if(null!==i){for(var u=0;u<D.length;u++)if(i===D[u]){o=u;break}-1===o&&r.focus()}else v=r}}var g=arguments[0];if(arguments[0]===n)return c("SweetAlert expects at least 1 attribute!"),!1;var y=s({},E);switch(typeof arguments[0]){case"string":y.title=arguments[0],y.text=arguments[1]||"",y.type=arguments[2]||"";break;case"object":if(arguments[0].title===n)return c('Missing "title" argument!'),!1;y.title=arguments[0].title;for(var b=["text","type","customClass","allowOutsideClick","showConfirmButton","showCancelButton","closeOnConfirm","closeOnCancel","timer","confirmButtonColor","cancelButtonText","imageUrl","imageSize","html","animation","allowEscapeKey"],w=b.length,x=0;w>x;x++){var N=b[x];y[N]=o(N)}y.confirmButtonText=y.showCancelButton?"Confirm":E.confirmButtonText,y.confirmButtonText=o("confirmButtonText"),y.doneFunction=arguments[1]||null;break;default:return c('Unexpected type of argument! Expected "string" or "object", got '+typeof arguments[0]),!1}r(y),f(),a();for(var C=S(),k=function(t){var n=t||e.event,r=n.target||n.srcElement,s=-1!==r.className.indexOf("confirm"),o=T(C,"visible"),u=y.doneFunction&&"true"===C.getAttribute("data-has-done-function");switch(n.type){case"mouseover":s&&(r.style.backgroundColor=i(y.confirmButtonColor,-0.04));break;case"mouseout":s&&(r.style.backgroundColor=y.confirmButtonColor);break;case"mousedown":s&&(r.style.backgroundColor=i(y.confirmButtonColor,-0.14));break;case"mouseup":s&&(r.style.backgroundColor=i(y.confirmButtonColor,-0.04));break;case"focus":var a=C.querySelector("button.confirm"),f=C.querySelector("button.cancel");s?f.style.boxShadow="none":a.style.boxShadow="none";break;case"click":if(s&&u&&o)y.doneFunction(!0),y.closeOnConfirm&&m.close();else if(u&&o){var l=String(y.doneFunction).replace(/\s/g,""),c="function("===l.substring(0,9)&&")"!==l.substring(9,10);c&&y.doneFunction(!1),y.closeOnCancel&&m.close()}else m.close()}},L=C.querySelectorAll("button"),A=0;A<L.length;A++)L[A].onclick=k,L[A].onmouseover=k,L[A].onmouseout=k,L[A].onmousedown=k,L[A].onfocus=k;p=t.onclick,t.onclick=function(t){var n=t||e.event,r=n.target||n.srcElement,i=C===r,s=_(C,r),o=T(C,"visible"),u="true"===C.getAttribute("data-allow-ouside-click");!i&&!s&&o&&u&&m.close()};var O=C.querySelector("button.confirm"),M=C.querySelector("button.cancel"),D=C.querySelectorAll("button[tabindex]");d=e.onkeydown,e.onkeydown=l,O.onblur=h,M.onblur=h,e.onfocus=function(){e.setTimeout(function(){v!==n&&(v.focus(),v=n)},0)}},m.setDefaults=g.setDefaults=function(e){if(!e)throw new Error("userParams is required");if("object"!=typeof e)throw new Error("userParams has to be a object");s(E,e)},m.close=g.close=function(){var r=S();H(x(),5),H(r,5),C(r,"showSweetAlert"),N(r,"hideSweetAlert"),C(r,"visible");var i=r.querySelector(".sa-icon.sa-success");C(i,"animate"),C(i.querySelector(".sa-tip"),"animateSuccessTip"),C(i.querySelector(".sa-long"),"animateSuccessLong");var s=r.querySelector(".sa-icon.sa-error");C(s,"animateErrorIcon"),C(s.querySelector(".sa-x-mark"),"animateXMark");var o=r.querySelector(".sa-icon.sa-warning");C(o,"pulseWarning"),C(o.querySelector(".sa-body"),"pulseWarningIns"),C(o.querySelector(".sa-dot"),"pulseWarningIns"),e.onkeydown=d,t.onclick=p,h&&h.focus(),v=n,clearTimeout(r.timeout)},"function"==typeof define&&define.amd?define("sweet-alert",[],function(){return m}):"undefined"!=typeof module&&module.exports?module.exports=m:"undefined"!=typeof e&&(e.sweetAlert=e.swal=m)}(window,document),define("app/ui",["jquery","nprogress","sweet-alert","events","./map"],function(e,t,n,r,i){function u(){e(window).on("hashchange",function(){var e;if(s){s=!1;return}e=a(),e.latlng&&o.fire("shouldRender",e.latlng,e.zoom)}),e(window).trigger("hashchange")}function a(){var e,t,n;return window.location.hash&&window.location.hash.indexOf("#/vis/")===0?(e=window.location.hash.split("/"),t=e[2].split(","),n=+e[3],{latlng:t,zoom:n}):{latlng:null,zoom:null}}function f(t,n){window.location.hash="/vis/"+t.lat.toFixed(3)+","+t.lng.toFixed(3)+"/"+n,e(".photon-input").attr("placeholder",t.lat.toFixed(3)+", "+t.lng.toFixed(3)),s=!0}function l(){e(".osm-login-detail").show(),e("#osmLogout").click(function(){return o.fire("osmLogoutClick"),e(".osm-login-detail").hide(),!1})}function c(){e(document.body).addClass("rendering"),e("#intro").css({bottom:"-"+(e("#intro").height()+20),opacity:0})}function h(){e(document.body).removeClass("rendering"),e(document.body).addClass("rendered")}var s=!1,o=r();return{progress:t,alert:n,showOsmLoggedIn:l,addOsmLogoutClickHandler:function(e){o.on("osmLogoutClick",e)},addRenderHandler:function(e){o.on("shouldRender",e)},firstRenderStart:c,firstRenderEnd:h,setBodyClass:function(t,n){e(document.body).toggleClass(t,typeof n=="undefined"?!0:n)},setupFlyMapOnHashChange:u,updateState:f}}),define("app/services/overpass",["jquery","../ui","../map"],function(e,t,n){function c(e){var t=e._southWest,n=e._northEast;return[t.lat,t.lng,n.lat,n.lng].join(",")}function h(p,d){function g(e){t.alert({title:"Oh no!",text:'Unable to fetch data from the API... it might be overloaded? Try again in a few minutes, and if problems persist, report it on <a href="https://github.com/theopolisme/places-of-worship">GitHub</a>. <div class="error-details">'+JSON.stringify(e)+"</div>",type:"error",allowOutsideClick:!0,html:!0},function(){window.location.reload()})}var v,m={},d=d||e.Deferred();return Date.now()-a<o?(f=[p,d],l||(l=setTimeout(function(){h.apply(null,f)},Date.now()-a)),d):(a=Date.now(),l=null,t.progress.start(),typeof p.toBBoxString=="function"&&(p.getEast()-p.getWest()>1?p=p.getCenter():v=p),v||(v=n.getBoundsOfCircleFromLatLng(p,u)),e.get(r,{data:i.replace(s,c(v))}).fail(g).done(function(e){e.elements&&e.elements.length&&e.elements.forEach(function(e){var t,n,r;e.type==="way"?(t=e.center.lat,n=e.center.lon):(t=e.lat,n=e.lon),e.tags.religion&&e.tags.religion.length>1?r=e.tags.religion.toLowerCase():r="unknown",m[r]||(m[r]=[]),m[r].push({lat:t,lng:n,id:e.id,name:e.tags.name||"Unknown name",type:e.type})}),t.progress.done(),d.resolve(Object.keys(m).map(function(e){return{name:e,places:m[e]}}).sort(function(e,t){return t.places.length-e.places.length}))}),d)}var r="https://overpass-api.de/api/interpreter",i="[out:json];(node[amenity=place_of_worship](BOUNDS);way[amenity=place_of_worship](BOUNDS););out center;>;",s=/BOUNDS/g,o=2500,u=2e4,a=0,f=null,l=null;return{lookup:h}}),define("app/renderer/core",["../map","../services/overpass"],function(e,t,n){var r=e.getMap();return{getMap:function(){return r},lookup:function(e,n){t.lookup(e).done(function(e){n(e)})}}}),function(e,t,n){function o(t,n){this.bodyOverflowX,this.checkInterval=null,this.content,this.$el=e(t),this.elProxyPosition,this.$elProxy,this.enabled=!0,this.options=e.extend({},s,n),this.mouseIsOverProxy=!1,this.namespace="tooltipster-"+Math.round(Math.random()*1e5),this.status="hidden",this.timerHide=null,this.timerShow=null,this.$tooltip,this.options.iconTheme=this.options.iconTheme.replace(".",""),this.options.theme=this.options.theme.replace(".",""),this.init()}function u(t,n){var r=!0;return e.each(t,function(e,i){if(typeof n[e]=="undefined"||t[e]!==n[e])return r=!1,!1}),r}function l(){return!f&&a}function c(){var e=n.body||n.documentElement,t=e.style,r="transition";if(typeof t[r]=="string")return!0;v=["Moz","Webkit","Khtml","O","ms"],r=r.charAt(0).toUpperCase()+r.substr(1);for(var i=0;i<v.length;i++)if(typeof t[v[i]+r]=="string")return!0;return!1}var r="tooltipster",s={animation:"fade",arrow:!0,arrowColor:"",autoClose:!0,content:null,contentAsHTML:!1,contentCloning:!0,delay:200,fixedWidth:0,maxWidth:0,functionInit:function(e,t){},functionBefore:function(e,t){t()},functionReady:function(e,t){},functionAfter:function(e){},icon:"(?)",iconCloning:!0,iconDesktop:!1,iconTouch:!1,iconTheme:"tooltipster-icon",interactive:!1,interactiveTolerance:350,offsetX:0,offsetY:0,onlyOne:!1,position:"top",positionTracker:!1,speed:350,timer:0,theme:"tooltipster-default",touchDevices:!0,trigger:"hover",updateAnimation:!0};o.prototype={init:function(){var t=this;if(n.querySelector){if(t.options.content!==null)t.setContent(t.options.content);else{var r=t.$el.attr("title");typeof r=="undefined"&&(r=null),t.setContent(r)}var i=t.options.functionInit(t.$el,t.content);typeof i!="undefined"&&t.setContent(i),t.$el.removeAttr("title").addClass("tooltipstered"),!a&&t.options.iconDesktop||a&&t.options.iconTouch?(typeof t.options.icon=="string"?(t.$elProxy=e('<span class="'+t.options.iconTheme+'"></span>'),t.$elProxy.text(t.options.icon)):t.options.iconCloning?t.$elProxy=t.options.icon.clone(!0):t.$elProxy=t.options.icon,t.$elProxy.insertAfter(t.$el)):t.$elProxy=t.$el,t.options.trigger=="hover"?(t.$elProxy.on("mouseenter."+t.namespace,function(){if(!l()||t.options.touchDevices)t.mouseIsOverProxy=!0,t.showTooltip()}).on("mouseleave."+t.namespace,function(){if(!l()||t.options.touchDevices)t.mouseIsOverProxy=!1}),a&&t.options.touchDevices&&t.$elProxy.on("touchstart."+t.namespace,function(){t.showTooltipNow()})):t.options.trigger=="click"&&t.$elProxy.on("click."+t.namespace,function(){(!l()||t.options.touchDevices)&&t.showTooltip()})}},showTooltip:function(){var e=this;e.status!="shown"&&e.status!="appearing"&&(e.options.delay?e.timerShow=setTimeout(function(){(e.options.trigger=="click"||e.options.trigger=="hover"&&e.mouseIsOverProxy)&&e.showTooltipNow()},e.options.delay):e.showTooltipNow())},showTooltipNow:function(){var n=this;clearTimeout(n.timerShow),n.timerShow=null,clearTimeout(n.timerHide),n.timerHide=null,n.enabled&&n.content!==null&&(n.options.onlyOne&&e(".tooltipstered").not(n.$el).each(function(t,n){var i=e(n),s=i[r]("status"),o=i[r]("option","autoClose");s!=="hidden"&&s!=="disappearing"&&o&&i[r]("hide")}),n.options.functionBefore(n.$elProxy,function(){if(n.status!=="hidden"){var r=0;n.status==="disappearing"&&(n.status="appearing",c()?(n.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-"+n.options.animation+"-show"),n.options.speed>0&&n.$tooltip.delay(n.options.speed),n.$tooltip.queue(function(){n.status="shown"})):n.$tooltip.stop().fadeIn(function(){n.status="shown"}))}else{n.status="appearing";var r=n.options.speed;n.bodyOverflowX=e("body").css("overflow-x"),e("body").css("overflow-x","hidden");var i="tooltipster-"+n.options.animation,s="-webkit-transition-duration: "+n.options.speed+"ms; -webkit-animation-duration: "+n.options.speed+"ms; -moz-transition-duration: "+n.options.speed+"ms; -moz-animation-duration: "+n.options.speed+"ms; -o-transition-duration: "+n.options.speed+"ms; -o-animation-duration: "+n.options.speed+"ms; -ms-transition-duration: "+n.options.speed+"ms; -ms-animation-duration: "+n.options.speed+"ms; transition-duration: "+n.options.speed+"ms; animation-duration: "+n.options.speed+"ms;",o=n.options.fixedWidth>0?"width:"+Math.round(n.options.fixedWidth)+"px;":"",u=n.options.maxWidth>0?"max-width:"+Math.round(n.options.maxWidth)+"px;":"",f=n.options.interactive?"pointer-events: auto;":"";n.$tooltip=e('<div class="tooltipster-base '+n.options.theme+'" style="'+o+" "+u+" "+f+" "+s+'"><div class="tooltipster-content"></div></div>'),c()&&n.$tooltip.addClass(i),n.insertContent(),n.$tooltip.appendTo("body"),n.positionTooltip(),n.options.functionReady(n.$el,n.$tooltip),c()?(n.$tooltip.addClass(i+"-show"),n.options.speed>0&&n.$tooltip.delay(n.options.speed),n.$tooltip.queue(function(){n.status="shown"})):n.$tooltip.css("display","none").fadeIn(n.options.speed,function(){n.status="shown"}),n.setCheckInterval(),e(t).on("scroll."+n.namespace+" resize."+n.namespace,function(){n.positionTooltip()});if(n.options.autoClose){e("body").off("."+n.namespace);if(n.options.trigger=="hover"){a&&setTimeout(function(){e("body").on("touchstart."+n.namespace,function(){n.hideTooltip()})},0);if(n.options.interactive){a&&n.$tooltip.on("touchstart."+n.namespace,function(e){e.stopPropagation()});var l=null;n.$elProxy.add(n.$tooltip).on("mouseleave."+n.namespace+"-autoClose",function(){clearTimeout(l),l=setTimeout(function(){n.hideTooltip()},n.options.interactiveTolerance)}).on("mouseenter."+n.namespace+"-autoClose",function(){clearTimeout(l)})}else n.$elProxy.on("mouseleave."+n.namespace+"-autoClose",function(){n.hideTooltip()})}else n.options.trigger=="click"&&(setTimeout(function(){e("body").on("click."+n.namespace+" touchstart."+n.namespace,function(){n.hideTooltip()})},0),n.options.interactive&&n.$tooltip.on("click."+n.namespace+" touchstart."+n.namespace,function(e){e.stopPropagation()}))}}n.options.timer>0&&(n.timerHide=setTimeout(function(){n.timerHide=null,n.hideTooltip()},n.options.timer+r))}))},setCheckInterval:function(){var t=this;t.checkInterval=setInterval(function(){if(e("body").find(t.$el).length===0||e("body").find(t.$elProxy).length===0||t.status=="hidden"||e("body").find(t.$tooltip).length===0)(t.status=="shown"||t.status=="appearing")&&t.hideTooltip(),t.cancelCheckInterval();else if(t.options.positionTracker){var n=t.positionInfo(t.$elProxy),r=!1;u(n.dimension,t.elProxyPosition.dimension)&&(t.$elProxy.css("position")==="fixed"?u(n.position,t.elProxyPosition.position)&&(r=!0):u(n.offset,t.elProxyPosition.offset)&&(r=!0)),r||t.positionTooltip()}},200)},cancelCheckInterval:function(){clearInterval(this.checkInterval),this.checkInterval=null},hideTooltip:function(){var n=this;clearTimeout(n.timerShow),n.timerShow=null,clearTimeout(n.timerHide),n.timerHide=null;if(n.status=="shown"||n.status=="appearing"){n.status="disappearing";var r=function(){n.status="hidden",n.$tooltip.remove(),n.$tooltip=null,e(t).off("."+n.namespace),e("body").off("."+n.namespace).css("overflow-x",n.bodyOverflowX),n.$elProxy.off("."+n.namespace+"-autoClose"),n.options.functionAfter(n.$elProxy)};c()?(n.$tooltip.clearQueue().removeClass("tooltipster-"+n.options.animation+"-show").addClass("tooltipster-dying"),n.options.speed>0&&n.$tooltip.delay(n.options.speed),n.$tooltip.queue(r)):n.$tooltip.stop().fadeOut(n.options.speed,r)}},setContent:function(e){typeof e=="object"&&e!==null&&this.options.contentCloning&&(e=e.clone(!0)),this.content=e},insertContent:function(){var e=this,t=this.$tooltip.find(".tooltipster-content");typeof e.content=="string"&&!e.options.contentAsHTML?t.text(e.content):t.empty().append(e.content)},updateTooltip:function(e){var t=this;t.setContent(e),t.content!==null?t.status!=="hidden"&&(t.insertContent(),t.positionTooltip(),t.options.updateAnimation&&(c()?(t.$tooltip.css({width:"","-webkit-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){t.status!="hidden"&&(t.$tooltip.removeClass("tooltipster-content-changing"),setTimeout(function(){t.status!=="hidden"&&t.$tooltip.css({"-webkit-transition":t.options.speed+"ms","-moz-transition":t.options.speed+"ms","-o-transition":t.options.speed+"ms","-ms-transition":t.options.speed+"ms",transition:t.options.speed+"ms"})},t.options.speed))},t.options.speed)):t.$tooltip.fadeTo(t.options.speed,.5,function(){t.status!="hidden"&&t.$tooltip.fadeTo(t.options.speed,1)}))):t.hideTooltip()},positionInfo:function(e){return{dimension:{height:e.outerHeight(!1),width:e.outerWidth(!1)},offset:e.offset(),position:{left:parseInt(e.css("left")),top:parseInt(e.css("top"))}}},positionTooltip:function(){var n=this;if(e("body").find(n.$tooltip).length!==0){n.$tooltip.css("width",""),n.elProxyPosition=n.positionInfo(n.$elProxy);var r=null,s=e(t).width(),o=n.elProxyPosition,u=n.$tooltip.outerWidth(!1),a=n.$tooltip.innerWidth()+1,f=n.$tooltip.outerHeight(!1),l=null;if(n.$elProxy.is("area")){var c=n.$elProxy.attr("shape"),h=n.$elProxy.parent().attr("name"),p=e('img[usemap="#'+h+'"]'),v=p.offset().left,m=p.offset().top,g=n.$elProxy.attr("coords")!==undefined?n.$elProxy.attr("coords").split(","):undefined;if(c=="circle"){var y=parseInt(g[0]),b=parseInt(g[1]),w=parseInt(g[2]);o.dimension.height=w*2,o.dimension.width=w*2,o.offset.top=m+b-w,o.offset.left=v+y-w}else if(c=="rect"){var y=parseInt(g[0]),b=parseInt(g[1]),E=parseInt(g[2]),S=parseInt(g[3]);o.dimension.height=S-b,o.dimension.width=E-y,o.offset.top=m+b,o.offset.left=v+y}else if(c=="poly"){var x=[],T=[],N=0,C=0,k=0,L=0,A="even";for(i=0;i<g.length;i++){var O=parseInt(g[i]);A=="even"?(O>k&&(k=O,i===0&&(N=k)),O<N&&(N=O),A="odd"):(O>L&&(L=O,i==1&&(C=L)),O<C&&(C=O),A="even")}o.dimension.height=L-C,o.dimension.width=k-N,o.offset.top=m+C,o.offset.left=v+N}else o.dimension.height=p.outerHeight(!1),o.dimension.width=p.outerWidth(!1),o.offset.top=m,o.offset.left=v}n.options.fixedWidth===0&&n.$tooltip.css({width:Math.round(a)+"px","padding-left":"0px","padding-right":"0px"});var M=0,_=0,D=0,P=parseInt(n.options.offsetY),H=parseInt(n.options.offsetX),B=n.options.position;function j(){var n=e(t).scrollLeft();M-n<0&&(r=M-n,M=n),M+u-n>s&&(r=M-(s+n-u),M=s+n-u)}function F(n,r){o.offset.top-e(t).scrollTop()-f-P-12<0&&r.indexOf("top")>-1&&(B=n),o.offset.top+o.dimension.height+f+12+P>e(t).scrollTop()+e(t).height()&&r.indexOf("bottom")>-1&&(B=n,D=o.offset.top-f-P-12)}if(B=="top"){var I=o.offset.left+u-(o.offset.left+o.dimension.width);M=o.offset.left+H-I/2,D=o.offset.top-f-P-12,j(),F("bottom","top")}B=="top-left"&&(M=o.offset.left+H,D=o.offset.top-f-P-12,j(),F("bottom-left","top-left")),B=="top-right"&&(M=o.offset.left+o.dimension.width+H-u,D=o.offset.top-f-P-12,j(),F("bottom-right","top-right"));if(B=="bottom"){var I=o.offset.left+u-(o.offset.left+o.dimension.width);M=o.offset.left-I/2+H,D=o.offset.top+o.dimension.height+P+12,j(),F("top","bottom")}B=="bottom-left"&&(M=o.offset.left+H,D=o.offset.top+o.dimension.height+P+12,j(),F("top-left","bottom-left")),B=="bottom-right"&&(M=o.offset.left+o.dimension.width+H-u,D=o.offset.top+o.dimension.height+P+12,j(),F("top-right","bottom-right"));if(B=="left"){M=o.offset.left-H-u-12,_=o.offset.left+H+o.dimension.width+12;var q=o.offset.top+f-(o.offset.top+n.$elProxy.outerHeight(!1));D=o.offset.top-q/2-P;if(M<0&&_+u>s){var R=parseFloat(n.$tooltip.css("border-width"))*2,U=u+M-R;n.$tooltip.css("width",U+"px"),f=n.$tooltip.outerHeight(!1),M=o.offset.left-H-U-12-R,q=o.offset.top+f-(o.offset.top+n.$elProxy.outerHeight(!1)),D=o.offset.top-q/2-P}else M<0&&(M=o.offset.left+H+o.dimension.width+12,r="left")}if(B=="right"){M=o.offset.left+H+o.dimension.width+12,_=o.offset.left-H-u-12;var q=o.offset.top+f-(o.offset.top+n.$elProxy.outerHeight(!1));D=o.offset.top-q/2-P;if(M+u>s&&_<0){var R=parseFloat(n.$tooltip.css("border-width"))*2,U=s-M-R;n.$tooltip.css("width",U+"px"),f=n.$tooltip.outerHeight(!1),q=o.offset.top+f-(o.offset.top+n.$elProxy.outerHeight(!1)),D=o.offset.top-q/2-P}else M+u>s&&(M=o.offset.left-H-u-12,r="right")}if(n.options.arrow){var z="tooltipster-arrow-"+B;if(n.options.arrowColor.length<1)var W=n.$tooltip.css("background-color");else var W=n.options.arrowColor;r?r=="left"?(z="tooltipster-arrow-right",r=""):r=="right"?(z="tooltipster-arrow-left",r=""):r="left:"+Math.round(r)+"px;":r="";if(B=="top"||B=="top-left"||B=="top-right")var X=parseFloat(n.$tooltip.css("border-bottom-width")),V=n.$tooltip.css("border-bottom-color");else if(B=="bottom"||B=="bottom-left"||B=="bottom-right")var X=parseFloat(n.$tooltip.css("border-top-width")),V=n.$tooltip.css("border-top-color");else if(B=="left")var X=parseFloat(n.$tooltip.css("border-right-width")),V=n.$tooltip.css("border-right-color");else if(B=="right")var X=parseFloat(n.$tooltip.css("border-left-width")),V=n.$tooltip.css("border-left-color");else var X=parseFloat(n.$tooltip.css("border-bottom-width")),V=n.$tooltip.css("border-bottom-color");X>1&&X++;var $="";if(X!==0){var J="",K="border-color: "+V+";";z.indexOf("bottom")!==-1?J="margin-top: -"+Math.round(X)+"px;":z.indexOf("top")!==-1?J="margin-bottom: -"+Math.round(X)+"px;":z.indexOf("left")!==-1?J="margin-right: -"+Math.round(X)+"px;":z.indexOf("right")!==-1&&(J="margin-left: -"+Math.round(X)+"px;"),$='<span class="tooltipster-arrow-border" style="'+J+" "+K+';"></span>'}n.$tooltip.find(".tooltipster-arrow").remove();var Q='<div class="'+z+' tooltipster-arrow" style="'+r+'">'+$+'<span style="border-color:'+W+';"></span></div>';n.$tooltip.append(Q)}n.$tooltip.css({top:Math.round(D)+"px",left:Math.round(M)+"px"})}}},e.fn[r]=function(){var t=arguments;if(this.length===0){if(typeof t[0]=="string"){var n=!0;switch(t[0]){case"setDefaults":e.extend(s,t[1]);break;default:n=!1}return n?!0:this}return this}if(typeof t[0]=="string"){var r="#*$~&";return this.each(function(){var n=e(this).data("tooltipster");if(!n)throw new Error("You called Tooltipster's \""+t[0]+'" method on an uninitialized element');switch(t[0]){case"content":case"update":if(typeof t[1]=="undefined")return r=n.content,!1;n.updateTooltip(t[1]);break;case"destroy":n.hideTooltip(),n.$el[0]!==n.$elProxy[0]&&n.$elProxy.remove();var i=typeof n.content=="string"?n.content:e("<div></div>").append(n.content).html();n.$el.removeClass("tooltipstered").attr("title",i).removeData("tooltipster").off("."+n.namespace);break;case"disable":n.hideTooltip(),n.enabled=!1;break;case"elementIcon":return r=n.$el[0]!==n.$elProxy[0]?n.$elProxy[0]:undefined,!1;case"elementTooltip":return r=n.$tooltip?n.$tooltip[0]:undefined,!1;case"enable":n.enabled=!0;break;case"hide":n.hideTooltip();break;case"option":r=n.options[t[1]];break;case"reposition":n.positionTooltip();break;case"show":n.showTooltipNow();break;case"status":return r=n.status,!1;default:throw new Error('Unknown method .tooltipster("'+t[0]+'")')}}),r!=="#*$~&"?r:this}return this.each(function(){e(this).data("tooltipster")||e(this).data("tooltipster",new o(this,t[0]))})};var a="ontouchstart"in t,f=!1;e("body").one("mousemove",function(){f=!0})}(jQuery,window,document),define("jquery.tooltipster",["jquery"],function(){}),define("app/util",["jquery"],function(e){function s(e){return i[e]||(i[e]=t[mappingIndex],mappingIndex++,mappingIndex===t.length&&(mappingIndex=0)),i[e]}var t=["rgb(31,120,180)","rgb(178,223,138)","rgb(251,154,153)","rgb(227,26,28)","rgb(253,191,111)","rgb(255,127,0)","rgb(202,178,214)","rgb(106,61,154)","rgb(255,255,153)","rgb(177,89,40)","rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)","rgb(252,205,229)","rgb(217,217,217)","rgb(188,128,189)","rgb(204,235,197)","rgb(255,237,111)"],n={buddhist:"Buddhist",christian:"Christian",hindu:"Hindu",jain:"Jain",jewish:"Jewish",multifaith:"Multifaith",muslim:"Muslim",shinto:"Shinto",sikh:"Sikh",spiritualist:"Spiritualist",taoist:"Taoist",unitarian_universalist:"Unitarian universalist",voodoo:"Voodoo"},r="rgb(189,189,189)",i={unknown:r};return mappingIndex=0,{getColor:s,debounce:function(e,t,n){function r(){var p=Date.now()-u;p<t&&0<=p?i=setTimeout(r,t-p):(i=null,n||(a=e.apply(o,s),i||(o=s=null)))}var i,s,o,u,a;return function(){o=this,s=arguments,u=Date.now();var p=n&&!i;return i||(i=setTimeout(r,t)),p&&(a=e.apply(o,s),o=s=null),a}},prettifyReligionName:function(e){return e.charAt(0).toUpperCase()+e.substring(1).replace(/_/g," ")},serializeXml:function(e){return(new XMLSerializer).serializeToString(e)},generateReligionSelect:function(t){var r=e("<select>",{id:t}).append('<option value="" disabled selected>Select a religion</option>');return e.each(n,function(t,n){e("<option>",{value:t}).text(n).appendTo(r)}),r.prop("outerHTML")}}}),define("app/renderer/control",["leaflet","jquery","jquery.tooltipster","./core","../util"],function(e,t,n,r,i){function a(n){function a(e,t){return'<span class="group" data-name="'+e+'" style="background-color: '+t.color+'">'+i.prettifyReligionName(e)+"</span>"}var r={};o?t.each(n,function(n,r){o._layers[e.stamp(r.group)]||(o.addOverlay(r.group,a(n,r)),t(".leaflet-control-layers-overlays").tooltipster("reposition"))}):(t.each(n,function(e,t){r[a(e,t)]=t.group}),o=e.control.layers({},r,{collapsed:!1}).addTo(s),t(".leaflet-control-layers-overlays").tooltipster({content:"Click to change visibility until clicked again. Double-click to hide all other religions (double-click again to show all religions).",position:"left",maxWidth:300})),t.each(n,function(e,t){u[e]||(u[e]={groupSelector:'.leaflet-control-layers-overlays .group[data-name="'+e+'"]',inputSelector:'.leaflet-control-layers-overlays .input[data-name="'+e+'"]',isHidden:!1,isHovered:!1,isInDoubleClickSoloMode:!1})}),t(".leaflet-control-layers-overlays .group").not(".dblclick-enabled").addClass("dblclick-enabled").dblclick(function(){var e=t(this).data("name"),n=!u[e].isInDoubleClickSoloMode;t.each(u,function(e,t){t.isInDoubleClickSoloMode=!1}),u[e].isInDoubleClickSoloMode=n,t.each(u,function(e,r){!r.isInDoubleClickSoloMode&&n?(r.isHidden=!0,t(r.groupSelector).removeClass("temp-disabled").parent().parent().children("input").prop("checked",!1)):(r.isHidden=!1,t(r.groupSelector).parent().parent().children("input").prop("checked",!0))}),setTimeout(function(){o._onInputClick()},0)}),t(".leaflet-control-layers-overlays input").not(".input").addClass("input").each(function(){var e=t(this).parent().find(".group").data("name");t(this).prop("checked",!u[e].isHidden).data("name",e)}),setTimeout(function(){o._onInputClick()},0),t(".leaflet-control-layers-overlays").on("mouseleave",function(e){t.each(u,function(e,n){u[e].isHovered=!1,t(n.groupSelector).removeClass("temp-disabled").parent().parent().children("input").prop("checked",!n.isHidden)}),setTimeout(function(){o._onInputClick()},0)}),t(".leaflet-control-layers-overlays").on("mouseover",function(e){t.each(u,function(n,r){t(e.target).is(r.groupSelector)?(u[n].isHovered=!0,u[n].isHidden||t(r.groupSelector).removeClass("temp-disabled").parent().parent().children("input").prop("checked",!0)):(u[n].isHovered=!1,t(r.groupSelector).toggleClass("temp-disabled",!u[n].isHidden).parent().parent().children("input").prop("checked",!1))}),setTimeout(function(){o._onInputClick()},0)}),t(".leaflet-control-layers-overlays input").click(function(){u[t(this).data("name")].isHidden=!t(this).prop("checked")})}var s=r.getMap(),o=null,u={};return{update:a,getControl:function(){return o}}}),function(e){if("function"==typeof bootstrap)bootstrap("osmauth",e);else if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define("osmauth",e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeOsmAuth=e}else"undefined"!=typeof window?window.osmAuth=e():global.osmAuth=e()}(function(){var e;return function(e,t,n){function r(n,s){if(!t[n]){if(!e[n]){var o="function"==typeof require&&require;if(!s&&o)return o(n,!0);if(i)return i(n,!0);throw Error("Cannot find module '"+n+"'")}var u=t[n]={exports:{}};e[n][0].call(u.exports,function(t){var i=e[n][1][t];return r(i?i:t)},u,u.exports)}return t[n].exports}for(var i="function"==typeof require&&require,s=0;n.length>s;s++)r(n[s]);return r}({1:[function(e,t){var n=e("ohauth"),r=e("xtend"),i=e("store");t.exports=function(e){function t(e){return e.oauth_timestamp=n.timestamp(),e.oauth_nonce=n.nonce(),e}function s(e){return{oauth_consumer_key:e.oauth_consumer_key,oauth_signature_method:"HMAC-SHA1"}}var o={};o.authenticated=function(){return!!u("oauth_token")&&!!u("oauth_token_secret")},o.logout=function(){return u("oauth_token",""),u("oauth_token_secret",""),u("oauth_request_token_secret",""),o},o.authenticate=function(r){function i(t,i){if(e.done(),t)return r(t);var s=n.stringQs(i.response);u("oauth_request_token_secret",s.oauth_token_secret);var o=e.url+"/oauth/authorize?"+n.qsString({oauth_token:s.oauth_token,oauth_callback:location.href.replace("index.html","").replace(/#.*/,"").replace(location.search,"")+e.landing});e.singlepage?location.href=o:v.location=o}function a(r){var i=e.url+"/oauth/access_token",o=t(s(e)),a=u("oauth_request_token_secret");o.oauth_token=r,o.oauth_signature=n.signature(e.oauth_secret,a,n.baseString("POST",i,o)),n.xhr("POST",i,o,null,{},f),e.loading()}function f(t,i){if(e.done(),t)return r(t);var s=n.stringQs(i.response);u("oauth_token",s.oauth_token),u("oauth_token_secret",s.oauth_token_secret),r(null,o)}if(o.authenticated())return r();o.logout();var l=t(s(e)),c=e.url+"/oauth/request_token";if(l.oauth_signature=n.signature(e.oauth_secret,"",n.baseString("POST",c,l)),!e.singlepage)var h=600,p=550,d=[["width",h],["height",p],["left",screen.width/2-h/2],["top",screen.height/2-p/2]].map(function(e){return e.join("=")}).join(","),v=window.open("about:blank","oauth_window",d);n.xhr("POST",c,l,null,{},i),e.loading(),window.authComplete=function(e){var t=n.stringQs(e.split("?")[1]);a(t.oauth_token),delete window.authComplete}},o.bootstrapToken=function(r,i){function a(r){var i=e.url+"/oauth/access_token",o=t(s(e)),a=u("oauth_request_token_secret");o.oauth_token=r,o.oauth_signature=n.signature(e.oauth_secret,a,n.baseString("POST",i,o)),n.xhr("POST",i,o,null,{},f),e.loading()}function f(t,r){if(e.done(),t)return i(t);var s=n.stringQs(r.response);u("oauth_token",s.oauth_token),u("oauth_token_secret",s.oauth_token_secret),i(null,o)}a(r)},o.xhr=function(i,a){function f(){var o=t(s(e)),a=e.url+i.path,f=u("oauth_token_secret");i.options&&i.options.header&&"application/x-www-form-urlencoded"!==i.options.header["Content-Type"]||!i.content||(o=r(o,n.stringQs(i.content))),o.oauth_token=u("oauth_token"),o.oauth_signature=n.signature(e.oauth_secret,f,n.baseString(i.method,a,o)),n.xhr(i.method,a,o,i.content,i.options,l)}function l(e,t){return e?a(e):t.responseXML?a(e,t.responseXML):a(e,t.response)}return o.authenticated()?f():e.auto?o.authenticate(f):a("not authenticated",null)},o.preauth=function(e){return e?(e.oauth_token&&u("oauth_token",e.oauth_token),e.oauth_token_secret&&u("oauth_token_secret",e.oauth_token_secret),o):void 0},o.options=function(t){return arguments.length?(e=t,e.url=e.url||"http://www.openstreetmap.org",e.landing=e.landing||"land.html",e.singlepage=e.singlepage||!1,e.loading=e.loading||function(){},e.done=e.done||function(){},o.preauth(e)):e};var u;if(i.enabled)u=function(t,n){return 1===arguments.length?i.get(e.url+t):2===arguments.length?i.set(e.url+t,n):void 0};else{var a={};u=function(t,n){return 1===arguments.length?a[e.url+t]:2===arguments.length?a[e.url+t]=n:void 0}}return o.options(e),o}},{ohauth:2,xtend:3,store:4}],4:[function(t,n){(function(t){function r(){try{return f in t&&t[f]}catch(e){return!1}}function i(e){return function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(o),c.appendChild(o),o.addBehavior("#default#userData"),o.load(f);var n=e.apply(u,t);return c.removeChild(o),n}}function s(e){return e.replace(/^d/,"___$&").replace(d,"___")}var o,u={},a=t.document,f="localStorage",l="script";if(u.disabled=!1,u.set=function(){},u.get=function(){},u.remove=function(){},u.clear=function(){},u.transact=function(e,t,n){var r=u.get(e);null==n&&(n=t,t=null),r===void 0&&(r=t||{}),n(r),u.set(e,r)},u.getAll=function(){},u.forEach=function(){},u.serialize=function(e){return JSON.stringify(e)},u.deserialize=function(e){if("string"!=typeof e)return void 0;try{return JSON.parse(e)}catch(t){return e||void 0}},r())o=t[f],u.set=function(e,t){return void 0===t?u.remove(e):(o.setItem(e,u.serialize(t)),t)},u.get=function(e){return u.deserialize(o.getItem(e))},u.remove=function(e){o.removeItem(e)},u.clear=function(){o.clear()},u.getAll=function(){var e={};return u.forEach(function(t,n){e[t]=n}),e},u.forEach=function(e){for(var t=0;o.length>t;t++){var n=o.key(t);e(n,u.get(n))}};else if(a.documentElement.addBehavior){var c,h;try{h=new ActiveXObject("htmlfile"),h.open(),h.write("<"+l+">document.w=window</"+l+'><iframe src="/favicon.ico"></iframe>'),h.close(),c=h.w.frames[0].document,o=c.createElement("div")}catch(p){o=a.createElement("div"),c=a.body}var d=RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");u.set=i(function(e,t,n){return t=s(t),void 0===n?u.remove(t):(e.setAttribute(t,u.serialize(n)),e.save(f),n)}),u.get=i(function(e,t){return t=s(t),u.deserialize(e.getAttribute(t))}),u.remove=i(function(e,t){t=s(t),e.removeAttribute(t),e.save(f)}),u.clear=i(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(f);for(var n,r=0;n=t[r];r++)e.removeAttribute(n.name);e.save(f)}),u.getAll=function(){var e={};return u.forEach(function(t,n){e[t]=n}),e},u.forEach=i(function(e,t){for(var n,r=e.XMLDocument.documentElement.attributes,i=0;n=r[i];++i)t(n.name,u.deserialize(e.getAttribute(n.name)))})}try{var v="__storejs__";u.set(v,v),u.get(v)!=v&&(u.disabled=!0),u.remove(v)}catch(p){u.disabled=!0}u.enabled=!u.disabled,n!==void 0&&n.exports&&this.module!==n?n.exports=u:"function"==typeof e&&e.amd?e(u):t.store=u})(Function("return this")())},{}],5:[function(e,t){function n(e){return null!==e&&("object"==typeof e||"function"==typeof e)}t.exports=n},{}],3:[function(e,t){function n(){for(var e={},t=0;arguments.length>t;t++){var n=arguments[t];if(i(n))for(var s=r(n),o=0;s.length>o;o++){var u=s[o];e[u]=n[u]}}return e}var r=e("object-keys"),i=e("./has-keys");t.exports=n},{"./has-keys":5,"object-keys":6}],7:[function(t,n,r){(function(t){(function(){function i(e){var t,n,r,i="",s=-1;if(e&&e.length)for(r=e.length;r>(s+=1);)t=e.charCodeAt(s),n=r>s+1?e.charCodeAt(s+1):0,t>=55296&&56319>=t&&n>=56320&&57343>=n&&(t=65536+((1023&t)<<10)+(1023&n),s+=1),127>=t?i+=String.fromCharCode(t):2047>=t?i+=String.fromCharCode(192|31&t>>>6,128|63&t):65535>=t?i+=String.fromCharCode(224|15&t>>>12,128|63&t>>>6,128|63&t):2097151>=t&&(i+=String.fromCharCode(240|7&t>>>18,128|63&t>>>12,128|63&t>>>6,128|63&t));return i}function s(e){var t,n,r,i,s,o,u=[];if(t=n=r=i=s=0,e&&e.length)for(o=e.length,e+="";o>t;)r=e.charCodeAt(t),n+=1,128>r?(u[n]=String.fromCharCode(r),t+=1):r>191&&224>r?(i=e.charCodeAt(t+1),u[n]=String.fromCharCode((31&r)<<6|63&i),t+=2):(i=e.charCodeAt(t+1),s=e.charCodeAt(t+2),u[n]=String.fromCharCode((15&r)<<12|(63&i)<<6|63&s),t+=3);return u.join("")}function o(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}function u(e,t){return e<<t|e>>>32-t}function a(e,t){for(var n,r=t?"0123456789ABCDEF":"0123456789abcdef",i="",s=0,o=e.length;o>s;s+=1)n=e.charCodeAt(s),i+=r.charAt(15&n>>>4)+r.charAt(15&n);return i}function f(e){var t,n=32*e.length,r="";for(t=0;n>t;t+=8)r+=String.fromCharCode(255&e[t>>5]>>>24-t%32);return r}function l(e){var t,n=32*e.length,r="";for(t=0;n>t;t+=8)r+=String.fromCharCode(255&e[t>>5]>>>t%32);return r}function c(e){var t,n=8*e.length,r=Array(e.length>>2),i=r.length;for(t=0;i>t;t+=1)r[t]=0;for(t=0;n>t;t+=8)r[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return r}function h(e){var t,n=8*e.length,r=Array(e.length>>2),i=r.length;for(t=0;i>t;t+=1)r[t]=0;for(t=0;n>t;t+=8)r[t>>5]|=(255&e.charCodeAt(t/8))<<24-t%32;return r}function p(e,t){var n,r,i,s,o,u,a,f,l=t.length,c=[];for(u=Array(Math.ceil(e.length/2)),s=u.length,n=0;s>n;n+=1)u[n]=e.charCodeAt(2*n)<<8|e.charCodeAt(2*n+1);for(;u.length>0;){for(o=[],i=0,n=0;u.length>n;n+=1)i=(i<<16)+u[n],r=Math.floor(i/l),i-=r*l,(o.length>0||r>0)&&(o[o.length]=r);c[c.length]=i,u=o}for(a="",n=c.length-1;n>=0;n--)a+=t.charAt(c[n]);for(f=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),n=a.length;f>n;n+=1)a=t[0]+a;return a}function d(e,t){var n,r,i,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o="",u=e.length;for(t=t||"=",n=0;u>n;n+=3)for(i=e.charCodeAt(n)<<16|(u>n+1?e.charCodeAt(n+1)<<8:0)|(u>n+2?e.charCodeAt(n+2):0),r=0;4>r;r+=1)o+=8*n+6*r>8*e.length?t:s.charAt(63&i>>>6*(3-r));return o}var v;v={VERSION:"1.0.5",Base64:function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="=",n=!0;this.encode=function(r){var s,o,u,a="",f=r.length;for(t=t||"=",r=n?i(r):r,s=0;f>s;s+=3)for(u=r.charCodeAt(s)<<16|(f>s+1?r.charCodeAt(s+1)<<8:0)|(f>s+2?r.charCodeAt(s+2):0),o=0;4>o;o+=1)a+=8*s+6*o>8*f?t:e.charAt(63&u>>>6*(3-o));return a},this.decode=function(r){var i,o,u,a,f,l,c,h,p,d,v="",m=[];if(!r)return r;i=d=0,r=r.replace(RegExp("\\"+t,"gi"),"");do f=e.indexOf(r.charAt(i+=1)),l=e.indexOf(r.charAt(i+=1)),c=e.indexOf(r.charAt(i+=1)),h=e.indexOf(r.charAt(i+=1)),p=f<<18|l<<12|c<<6|h,o=255&p>>16,u=255&p>>8,a=255&p,d+=1,m[d]=64===c?String.fromCharCode(o):64===h?String.fromCharCode(o,u):String.fromCharCode(o,u,a);while(r.length>i);return v=m.join(""),v=n?s(v):v},this.setPad=function(e){return t=e||t,this},this.setTab=function(t){return e=t||e,this},this.setUTF8=function(e){return"boolean"==typeof e&&(n=e),this}},CRC32:function(e){var t,n,r,s=0,o=0,u=0;for(e=i(e),t=["00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 ","79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 ","84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F ","63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD ","A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC ","51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 ","B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 ","06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 ","E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 ","12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 ","D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 ","33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 ","CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 ","9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E ","7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D ","806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 ","60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA ","AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 ","5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 ","B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 ","05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 ","F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA ","11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 ","D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F ","30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E ","C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D"].join(""),s=-1^s,n=0,r=e.length;r>n;n+=1)u=255&(s^e.charCodeAt(n)),o="0x"+t.substr(9*u,8),s=s>>>8^o;return(-1^s)>>>0},MD5:function(e){function t(e){return e=b?i(e):e,l(r(c(e),8*e.length))}function n(e,t){var n,s,o,u,a;for(e=b?i(e):e,t=b?i(t):t,n=c(e),n.length>16&&(n=r(n,8*e.length)),s=Array(16),o=Array(16),a=0;16>a;a+=1)s[a]=909522486^n[a],o[a]=1549556828^n[a];return u=r(s.concat(c(t)),512+8*t.length),l(r(o.concat(u),640))}function r(e,t){var n,r,i,s,u,a=1732584193,l=-271733879,c=-1732584194,p=271733878;for(e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t,n=0;e.length>n;n+=16)r=a,i=l,s=c,u=p,a=f(a,l,c,p,e[n+0],7,-680876936),p=f(p,a,l,c,e[n+1],12,-389564586),c=f(c,p,a,l,e[n+2],17,606105819),l=f(l,c,p,a,e[n+3],22,-1044525330),a=f(a,l,c,p,e[n+4],7,-176418897),p=f(p,a,l,c,e[n+5],12,1200080426),c=f(c,p,a,l,e[n+6],17,-1473231341),l=f(l,c,p,a,e[n+7],22,-45705983),a=f(a,l,c,p,e[n+8],7,1770035416),p=f(p,a,l,c,e[n+9],12,-1958414417),c=f(c,p,a,l,e[n+10],17,-42063),l=f(l,c,p,a,e[n+11],22,-1990404162),a=f(a,l,c,p,e[n+12],7,1804603682),p=f(p,a,l,c,e[n+13],12,-40341101),c=f(c,p,a,l,e[n+14],17,-1502002290),l=f(l,c,p,a,e[n+15],22,1236535329),a=h(a,l,c,p,e[n+1],5,-165796510),p=h(p,a,l,c,e[n+6],9,-1069501632),c=h(c,p,a,l,e[n+11],14,643717713),l=h(l,c,p,a,e[n+0],20,-373897302),a=h(a,l,c,p,e[n+5],5,-701558691),p=h(p,a,l,c,e[n+10],9,38016083),c=h(c,p,a,l,e[n+15],14,-660478335),l=h(l,c,p,a,e[n+4],20,-405537848),a=h(a,l,c,p,e[n+9],5,568446438),p=h(p,a,l,c,e[n+14],9,-1019803690),c=h(c,p,a,l,e[n+3],14,-187363961),l=h(l,c,p,a,e[n+8],20,1163531501),a=h(a,l,c,p,e[n+13],5,-1444681467),p=h(p,a,l,c,e[n+2],9,-51403784),c=h(c,p,a,l,e[n+7],14,1735328473),l=h(l,c,p,a,e[n+12],20,-1926607734),a=v(a,l,c,p,e[n+5],4,-378558),p=v(p,a,l,c,e[n+8],11,-2022574463),c=v(c,p,a,l,e[n+11],16,1839030562),l=v(l,c,p,a,e[n+14],23,-35309556),a=v(a,l,c,p,e[n+1],4,-1530992060),p=v(p,a,l,c,e[n+4],11,1272893353),c=v(c,p,a,l,e[n+7],16,-155497632),l=v(l,c,p,a,e[n+10],23,-1094730640),a=v(a,l,c,p,e[n+13],4,681279174),p=v(p,a,l,c,e[n+0],11,-358537222),c=v(c,p,a,l,e[n+3],16,-722521979),l=v(l,c,p,a,e[n+6],23,76029189),a=v(a,l,c,p,e[n+9],4,-640364487),p=v(p,a,l,c,e[n+12],11,-421815835),c=v(c,p,a,l,e[n+15],16,530742520),l=v(l,c,p,a,e[n+2],23,-995338651),a=m(a,l,c,p,e[n+0],6,-198630844),p=m(p,a,l,c,e[n+7],10,1126891415),c=m(c,p,a,l,e[n+14],15,-1416354905),l=m(l,c,p,a,e[n+5],21,-57434055),a=m(a,l,c,p,e[n+12],6,1700485571),p=m(p,a,l,c,e[n+3],10,-1894986606),c=m(c,p,a,l,e[n+10],15,-1051523),l=m(l,c,p,a,e[n+1],21,-2054922799),a=m(a,l,c,p,e[n+8],6,1873313359),p=m(p,a,l,c,e[n+15],10,-30611744),c=m(c,p,a,l,e[n+6],15,-1560198380),l=m(l,c,p,a,e[n+13],21,1309151649),a=m(a,l,c,p,e[n+4],6,-145523070),p=m(p,a,l,c,e[n+11],10,-1120210379),c=m(c,p,a,l,e[n+2],15,718787259),l=m(l,c,p,a,e[n+9],21,-343485551),a=o(a,r),l=o(l,i),c=o(c,s),p=o(p,u);return[a,l,c,p]}function s(e,t,n,r,i,s){return o(u(o(o(t,e),o(r,s)),i),n)}function f(e,t,n,r,i,o,u){return s(t&n|~t&r,e,t,i,o,u)}function h(e,t,n,r,i,o,u){return s(t&r|n&~r,e,t,i,o,u)}function v(e,t,n,r,i,o,u){return s(t^n^r,e,t,i,o,u)}function m(e,t,n,r,i,o,u){return s(n^(t|~r),e,t,i,o,u)}var g=e&&"boolean"==typeof e.uppercase?e.uppercase:!1,y=e&&"string"==typeof e.pad?e.pda:"=",b=e&&"boolean"==typeof e.utf8?e.utf8:!0;this.hex=function(e){return a(t(e,b),g)},this.b64=function(e){return d(t(e),y)},this.any=function(e,n){return p(t(e,b),n)},this.raw=function(e){return t(e,b)},this.hex_hmac=function(e,t){return a(n(e,t),g)},this.b64_hmac=function(e,t){return d(n(e,t),y)},this.any_hmac=function(e,t,r){return p(n(e,t),r)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(g=e),this},this.setPad=function(e){return y=e||y,this},this.setUTF8=function(e){return"boolean"==typeof e&&(b=e),this}},SHA1:function(e){function t(e){return e=m?i(e):e,f(r(h(e),8*e.length))}function n(e,t){var n,s,o,u,a;for(e=m?i(e):e,t=m?i(t):t,n=h(e),n.length>16&&(n=r(n,8*e.length)),s=Array(16),o=Array(16),u=0;16>u;u+=1)s[u]=909522486^n[u],o[u]=1549556828^n[u];return a=r(s.concat(h(t)),512+8*t.length),f(r(o.concat(a),672))}function r(e,t){var n,r,i,a,f,c,h,p,d=Array(80),v=1732584193,m=-271733879,g=-1732584194,y=271733878,b=-1009589776;for(e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t,n=0;e.length>n;n+=16){for(a=v,f=m,c=g,h=y,p=b,r=0;80>r;r+=1)d[r]=16>r?e[n+r]:u(d[r-3]^d[r-8]^d[r-14]^d[r-16],1),i=o(o(u(v,5),s(r,m,g,y)),o(o(b,d[r]),l(r))),b=y,y=g,g=u(m,30),m=v,v=i;v=o(v,a),m=o(m,f),g=o(g,c),y=o(y,h),b=o(b,p)}return[v,m,g,y,b]}function s(e,t,n,r){return 20>e?t&n|~t&r:40>e?t^n^r:60>e?t&n|t&r|n&r:t^n^r}function l(e){return 20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514}var c=e&&"boolean"==typeof e.uppercase?e.uppercase:!1,v=e&&"string"==typeof e.pad?e.pda:"=",m=e&&"boolean"==typeof e.utf8?e.utf8:!0;this.hex=function(e){return a(t(e,m),c)},this.b64=function(e){return d(t(e,m),v)},this.any=function(e,n){return p(t(e,m),n)},this.raw=function(e){return t(e,m)},this.hex_hmac=function(e,t){return a(n(e,t))},this.b64_hmac=function(e,t){return d(n(e,t),v)},this.any_hmac=function(e,t,r){return p(n(e,t),r)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(c=e),this},this.setPad=function(e){return v=e||v,this},this.setUTF8=function(e){return"boolean"==typeof e&&(m=e),this}},SHA256:function(e){function t(e,t){return e=t?i(e):e,f(y(h(e),8*e.length))}function n(e,t){e=S?i(e):e,t=S?i(t):t;var n,r=0,s=h(e),o=Array(16),u=Array(16);for(s.length>16&&(s=y(s,8*e.length));16>r;r+=1)o[r]=909522486^s[r],u[r]=1549556828^s[r];return n=y(o.concat(h(t)),512+8*t.length),f(y(u.concat(n),768))}function r(e,t){return e>>>t|e<<32-t}function s(e,t){return e>>>t}function u(e,t,n){return e&t^~e&n}function l(e,t,n){return e&t^e&n^t&n}function c(e){return r(e,2)^r(e,13)^r(e,22)}function v(e){return r(e,6)^r(e,11)^r(e,25)}function m(e){return r(e,7)^r(e,18)^s(e,3)}function g(e){return r(e,17)^r(e,19)^s(e,10)}function y(e,t){var n,r,i,s,a,f,h,p,d,y,w,E,S=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],x=Array(64);for(e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t,d=0;e.length>d;d+=16){for(n=S[0],r=S[1],i=S[2],s=S[3],a=S[4],f=S[5],h=S[6],p=S[7],y=0;64>y;y+=1)x[y]=16>y?e[y+d]:o(o(o(g(x[y-2]),x[y-7]),m(x[y-15])),x[y-16]),w=o(o(o(o(p,v(a)),u(a,f,h)),b[y]),x[y]),E=o(c(n),l(n,r,i)),p=h,h=f,f=a,a=o(s,w),s=i,i=r,r=n,n=o(w,E);S[0]=o(n,S[0]),S[1]=o(r,S[1]),S[2]=o(i,S[2]),S[3]=o(s,S[3]),S[4]=o(a,S[4]),S[5]=o(f,S[5]),S[6]=o(h,S[6]),S[7]=o(p,S[7])}return S}var b,w=e&&"boolean"==typeof e.uppercase?e.uppercase:!1,E=e&&"string"==typeof e.pad?e.pda:"=",S=e&&"boolean"==typeof e.utf8?e.utf8:!0;this.hex=function(e){return a(t(e,S))},this.b64=function(e){return d(t(e,S),E)},this.any=function(e,n){return p(t(e,S),n)},this.raw=function(e){return t(e,S)},this.hex_hmac=function(e,t){return a(n(e,t))},this.b64_hmac=function(e,t){return d(n(e,t),E)},this.any_hmac=function(e,t,r){return p(n(e,t),r)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(w=e),this},this.setPad=function(e){return E=e||E,this},this.setUTF8=function(e){return"boolean"==typeof e&&(S=e),this},b=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998]},SHA512:function(e){function t(e){return e=E?i(e):e,f(r(h(e),8*e.length))}function n(e,t){e=E?i(e):e,t=E?i(t):t;var n,s=0,o=h(e),u=Array(32),a=Array(32);for(o.length>32&&(o=r(o,8*e.length));32>s;s+=1)u[s]=909522486^o[s],a[s]=1549556828^o[s];return n=r(u.concat(h(t)),1024+8*t.length),f(r(a.concat(n),1536))}function r(e,t){var n,r,i,a=Array(80),f=Array(16),h=[new s(1779033703,-205731576),new s(-1150833019,-2067093701),new s(1013904242,-23791573),new s(-1521486534,1595750129),new s(1359893119,-1377402159),new s(-1694144372,725511199),new s(528734635,-79577749),new s(1541459225,327033209)],p=new s(0,0),d=new s(0,0),b=new s(0,0),w=new s(0,0),E=new s(0,0),S=new s(0,0),x=new s(0,0),T=new s(0,0),N=new s(0,0),C=new s(0,0),k=new s(0,0),L=new s(0,0),A=new s(0,0),O=new s(0,0),M=new s(0,0),_=new s(0,0),D=new s(0,0);for(void 0===y&&(y=[new s(1116352408,-685199838),new s(1899447441,602891725),new s(-1245643825,-330482897),new s(-373957723,-2121671748),new s(961987163,-213338824),new s(1508970993,-1241133031),new s(-1841331548,-1357295717),new s(-1424204075,-630357736),new s(-670586216,-1560083902),new s(310598401,1164996542),new s(607225278,1323610764),new s(1426881987,-704662302),new s(1925078388,-226784913),new s(-2132889090,991336113),new s(-1680079193,633803317),new s(-1046744716,-815192428),new s(-459576895,-1628353838),new s(-272742522,944711139),new s(264347078,-1953704523),new s(604807628,2007800933),new s(770255983,1495990901),new s(1249150122,1856431235),new s(1555081692,-1119749164),new s(1996064986,-2096016459),new s(-1740746414,-295247957),new s(-1473132947,766784016),new s(-1341970488,-1728372417),new s(-1084653625,-1091629340),new s(-958395405,1034457026),new s(-710438585,-1828018395),new s(113926993,-536640913),new s(338241895,168717936),new s(666307205,1188179964),new s(773529912,1546045734),new s(1294757372,1522805485),new s(1396182291,-1651133473),new s(1695183700,-1951439906),new s(1986661051,1014477480),new s(-2117940946,1206759142),new s(-1838011259,344077627),new s(-1564481375,1290863460),new s(-1474664885,-1136513023),new s(-1035236496,-789014639),new s(-949202525,106217008),new s(-778901479,-688958952),new s(-694614492,1432725776),new s(-200395387,1467031594),new s(275423344,851169720),new s(430227734,-1194143544),new s(506948616,1363258195),new s(659060556,-544281703),new s(883997877,-509917016),new s(958139571,-976659869),new s(1322822218,-482243893),new s(1537002063,2003034995),new s(1747873779,-692930397),new s(1955562222,1575990012),new s(2024104815,1125592928),new s(-2067236844,-1578062990),new s(-1933114872,442776044),new s(-1866530822,593698344),new s(-1538233109,-561857047),new s(-1090935817,-1295615723),new s(-965641998,-479046869),new s(-903397682,-366583396),new s(-779700025,566280711),new s(-354779690,-840897762),new s(-176337025,-294727304),new s(116418474,1914138554),new s(174292421,-1563912026),new s(289380356,-1090974290),new s(460393269,320620315),new s(685471733,587496836),new s(852142971,1086792851),new s(1017036298,365543100),new s(1126000580,-1676669620),new s(1288033470,-885112138),new s(1501505948,-60457430),new s(1607167915,987167468),new s(1816402316,1246189591)]),r=0;80>r;r+=1)a[r]=new s(0,0);for(e[t>>5]|=128<<24-(31&t),e[(t+128>>10<<5)+31]=t,i=e.length,r=0;i>r;r+=32){for(o(b,h[0]),o(w,h[1]),o(E,h[2]),o(S,h[3]),o(x,h[4]),o(T,h[5]),o(N,h[6]),o(C,h[7]),n=0;16>n;n+=1)a[n].h=e[r+2*n],a[n].l=e[r+2*n+1];for(n=16;80>n;n+=1)u(M,a[n-2],19),l(_,a[n-2],29),c(D,a[n-2],6),L.l=M.l^_.l^D.l,L.h=M.h^_.h^D.h,u(M,a[n-15],1),u(_,a[n-15],8),c(D,a[n-15],7),k.l=M.l^_.l^D.l,k.h=M.h^_.h^D.h,m(a[n],L,a[n-7],k,a[n-16]);for(n=0;80>n;n+=1)A.l=x.l&T.l^~x.l&N.l,A.h=x.h&T.h^~x.h&N.h,u(M,x,14),u(_,x,18),l(D,x,9),L.l=M.l^_.l^D.l,L.h=M.h^_.h^D.h,u(M,b,28),l(_,b,2),l(D,b,7),k.l=M.l^_.l^D.l,k.h=M.h^_.h^D.h,O.l=b.l&w.l^b.l&E.l^w.l&E.l,O.h=b.h&w.h^b.h&E.h^w.h&E.h,g(p,C,L,A,y[n],a[n]),v(d,k,O),o(C,N),o(N,T),o(T,x),v(x,S,p),o(S,E),o(E,w),o(w,b),v(b,p,d);v(h[0],h[0],b),v(h[1],h[1],w),v(h[2],h[2],E),v(h[3],h[3],S),v(h[4],h[4],x),v(h[5],h[5],T),v(h[6],h[6],N),v(h[7],h[7],C)}for(r=0;8>r;r+=1)f[2*r]=h[r].h,f[2*r+1]=h[r].l;return f}function s(e,t){this.h=e,this.l=t}function o(e,t){e.h=t.h,e.l=t.l}function u(e,t,n){e.l=t.l>>>n|t.h<<32-n,e.h=t.h>>>n|t.l<<32-n}function l(e,t,n){e.l=t.h>>>n|t.l<<32-n,e.h=t.l>>>n|t.h<<32-n}function c(e,t,n){e.l=t.l>>>n|t.h<<32-n,e.h=t.h>>>n}function v(e,t,n){var r=(65535&t.l)+(65535&n.l),i=(t.l>>>16)+(n.l>>>16)+(r>>>16),s=(65535&t.h)+(65535&n.h)+(i>>>16),o=(t.h>>>16)+(n.h>>>16)+(s>>>16);e.l=65535&r|i<<16,e.h=65535&s|o<<16}function m(e,t,n,r,i){var s=(65535&t.l)+(65535&n.l)+(65535&r.l)+(65535&i.l),o=(t.l>>>16)+(n.l>>>16)+(r.l>>>16)+(i.l>>>16)+(s>>>16),u=(65535&t.h)+(65535&n.h)+(65535&r.h)+(65535&i.h)+(o>>>16),a=(t.h>>>16)+(n.h>>>16)+(r.h>>>16)+(i.h>>>16)+(u>>>16);e.l=65535&s|o<<16,e.h=65535&u|a<<16}function g(e,t,n,r,i,s){var o=(65535&t.l)+(65535&n.l)+(65535&r.l)+(65535&i.l)+(65535&s.l),u=(t.l>>>16)+(n.l>>>16)+(r.l>>>16)+(i.l>>>16)+(s.l>>>16)+(o>>>16),a=(65535&t.h)+(65535&n.h)+(65535&r.h)+(65535&i.h)+(65535&s.h)+(u>>>16),f=(t.h>>>16)+(n.h>>>16)+(r.h>>>16)+(i.h>>>16)+(s.h>>>16)+(a>>>16);e.l=65535&o|u<<16,e.h=65535&a|f<<16}var y,b=e&&"boolean"==typeof e.uppercase?e.uppercase:!1,w=e&&"string"==typeof e.pad?e.pda:"=",E=e&&"boolean"==typeof e.utf8?e.utf8:!0;this.hex=function(e){return a(t(e))},this.b64=function(e){return d(t(e),w)},this.any=function(e,n){return p(t(e),n)},this.raw=function(e){return t(e,E)},this.hex_hmac=function(e,t){return a(n(e,t))},this.b64_hmac=function(e,t){return d(n(e,t),w)},this.any_hmac=function(e,t,r){return p(n(e,t),r)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(b=e),this},this.setPad=function(e){return w=e||w,this},this.setUTF8=function(e){return"boolean"==typeof e&&(E=e),this}},RMD160:function(e){function t(e){return e=g?i(e):e,r(s(c(e),8*e.length))}function n(e,t){e=g?i(e):e,t=g?i(t):t;var n,o,u=c(e),a=Array(16),f=Array(16);for(u.length>16&&(u=s(u,8*e.length)),n=0;16>n;n+=1)a[n]=909522486^u[n],f[n]=1549556828^u[n];return o=s(a.concat(c(t)),512+8*t.length),r(s(f.concat(o),672))}function r(e){var t,n="",r=32*e.length;for(t=0;r>t;t+=8)n+=String.fromCharCode(255&e[t>>5]>>>t%32);return n}function s(e,t){var n,r,i,s,a,c,p,d,v,m,g,S,x,T,N=1732584193,C=4023233417,k=2562383102,L=271733878,A=3285377520;for(e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t,s=e.length,i=0;s>i;i+=16){for(a=m=N,c=g=C,p=S=k,d=x=L,v=T=A,r=0;79>=r;r+=1)n=o(a,f(r,c,p,d)),n=o(n,e[i+y[r]]),n=o(n,l(r)),n=o(u(n,w[r]),v),a=v,v=d,d=u(p,10),p=c,c=n,n=o(m,f(79-r,g,S,x)),n=o(n,e[i+b[r]]),n=o(n,h(r)),n=o(u(n,E[r]),T),m=T,T=x,x=u(S,10),S=g,g=n;n=o(C,o(p,x)),C=o(k,o(d,T)),k=o(L,o(v,m)),L=o(A,o(a,g)),A=o(N,o(c,S)),N=n}return[N,C,k,L,A]}function f(e,t,n,r){return e>=0&&15>=e?t^n^r:e>=16&&31>=e?t&n|~t&r:e>=32&&47>=e?(t|~n)^r:e>=48&&63>=e?t&r|n&~r:e>=64&&79>=e?t^(n|~r):"rmd160_f: j out of range"}function l(e){return e>=0&&15>=e?0:e>=16&&31>=e?1518500249:e>=32&&47>=e?1859775393:e>=48&&63>=e?2400959708:e>=64&&79>=e?2840853838:"rmd160_K1: j out of range"}function h(e){return e>=0&&15>=e?1352829926:e>=16&&31>=e?1548603684:e>=32&&47>=e?1836072691:e>=48&&63>=e?2053994217:e>=64&&79>=e?0:"rmd160_K2: j out of range"}var v=e&&"boolean"==typeof e.uppercase?e.uppercase:!1,m=e&&"string"==typeof e.pad?e.pda:"=",g=e&&"boolean"==typeof e.utf8?e.utf8:!0,y=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],b=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],w=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],E=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];this.hex=function(e){return a(t(e,g))},this.b64=function(e){return d(t(e,g),m)},this.any=function(e,n){return p(t(e,g),n)},this.raw=function(e){return t(e,g)},this.hex_hmac=function(e,t){return a(n(e,t))},this.b64_hmac=function(e,t){return d(n(e,t),m)},this.any_hmac=function(e,t,r){return p(n(e,t),r)},this.vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"===hex("abc").toLowerCase()},this.setUpperCase=function(e){return"boolean"==typeof e&&(v=e),this},this.setPad=function(e){return e!==void 0&&(m=e),this},this.setUTF8=function(e){return"boolean"==typeof e&&(g=e),this}}},function(i){var s=!1;"object"==typeof r&&(s=r,r&&"object"==typeof t&&t&&t===t.global&&(i=t)),"function"==typeof e&&"object"==typeof e.amd&&e.amd?e(function(){return v}):s?"object"==typeof n&&n&&n.exports===s?n.exports=v:s.Hashes=v:i.Hashes=v}(this)})()})(window)},{}],2:[function(e,t){var n=e("jshashes"),r=e("xtend"),i=new n.SHA1,s={};s.qsString=function(e){return Object.keys(e).sort().map(function(t){return s.percentEncode(t)+"="+s.percentEncode(e[t])}).join("&")},s.stringQs=function(e){return e.split("&").reduce(function(e,t){var n=t.split("=");return e[decodeURIComponent(n[0])]=null===n[1]?"":decodeURIComponent(n[1]),e},{})},s.rawxhr=function(e,t,n,r,i){var s=new XMLHttpRequest,o=/^20\d$/;s.onreadystatechange=function(){if(4==s.readyState&&0!==s.status){if(!o.test(s.status))return i(s,null);i(null,s)}},s.onerror=function(e){return i(e,null)},s.open(e,t,!0);for(var u in r)s.setRequestHeader(u,r[u]);s.send(n)},s.xhr=function(e,t,n,r,i,o){var u=i&&i.header||{"Content-Type":"application/x-www-form-urlencoded"};u.Authorization="OAuth "+s.authHeader(n),s.rawxhr(e,t,r,u,o)},s.nonce=function(){for(var e="";6>e.length;)e+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz"[Math.floor(61*Math.random())];return e},s.authHeader=function(e){return Object.keys(e).sort().map(function(t){return encodeURIComponent(t)+'="'+encodeURIComponent(e[t])+'"'}).join(", ")},s.timestamp=function(){return~~(+(new Date)/1e3)},s.percentEncode=function(e){return encodeURIComponent(e).replace(/\!/g,"%21").replace(/\'/g,"%27").replace(/\*/g,"%2A").replace(/\(/g,"%28").replace(/\)/g,"%29")},s.baseString=function(e,t,n){return n.oauth_signature&&delete n.oauth_signature,[e,s.percentEncode(t),s.percentEncode(s.qsString(n))].join("&")},s.signature=function(e,t,n){return i.b64_hmac(s.percentEncode(e)+"&"+s.percentEncode(t),n)},s.headerGenerator=function(e){e=e||{};var t=e.consumer_key||"",n=e.consumer_secret||"",i=e.signature_method||"HMAC-SHA1",o=e.version||"1.0",u=e.token||"";return function(e,a,f){e=e.toUpperCase(),"string"==typeof f&&f.length>0&&(f=s.stringQs(f));var l=a.split("?",2),c=l[0],h=2===l.length?s.stringQs(l[1]):{},p={oauth_consumer_key:t,oauth_signature_method:i,oauth_version:o,oauth_timestamp:s.timestamp(),oauth_nonce:s.nonce()};u&&(p.oauth_token=u);var d=r({},p,h,f),v=s.baseString(e,c,d);return p.oauth_signature=s.signature(n,u,v),"OAuth "+s.authHeader(p)}},t.exports=s},{jshashes:7,xtend:3}],6:[function(e,t){t.exports=Object.keys||e("./shim")},{"./shim":8}],8:[function(e,t){(function(){var n,r=Object.prototype.hasOwnProperty,i=e("is"),s=e("foreach"),o=!{toString:null}.propertyIsEnumerable("toString"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];n=function(e){if(!i.object(e)&&!i.array(e))throw new TypeError("Object.keys called on a non-object");var t,n=[];for(t in e)r.call(e,t)&&n.push(t);return o&&s(u,function(t){r.call(e,t)&&n.push(t)}),n},t.exports=n})()},{is:9,foreach:10}],9:[function(e,t){var n=Object.prototype,r=n.hasOwnProperty,i=n.toString,s=function(e){return e!==e},o={"boolean":1,number:1,string:1,"undefined":1},u=t.exports={};u.a=u.type=function(e,t){return typeof e===t},u.defined=function(e){return void 0!==e},u.empty=function(e){var t,n=i.call(e);if("[object Array]"===n||"[object Arguments]"===n)return 0===e.length;if("[object Object]"===n){for(t in e)if(r.call(e,t))return!1;return!0}return"[object String]"===n?""===e:!1},u.equal=function(e,t){var n,r=i.call(e);if(r!==i.call(t))return!1;if("[object Object]"===r){for(n in e)if(!u.equal(e[n],t[n]))return!1;return!0}if("[object Array]"===r){if(n=e.length,n!==t.length)return!1;for(;--n;)if(!u.equal(e[n],t[n]))return!1;return!0}return"[object Function]"===r?e.prototype===t.prototype:"[object Date]"===r?e.getTime()===t.getTime():e===t},u.hosted=function(e,t){var n=typeof t[e];return"object"===n?!!t[e]:!o[n]},u.instance=u["instanceof"]=function(e,t){return e instanceof t},u["null"]=function(e){return null===e},u.undefined=function(e){return void 0===e},u.arguments=function(e){var t="[object Arguments]"===i.call(e),n=!u.array(e)&&u.arraylike(e)&&u.object(e)&&u.fn(e.callee);return t||n},u.array=function(e){return"[object Array]"===i.call(e)},u.arguments.empty=function(e){return u.arguments(e)&&0===e.length},u.array.empty=function(e){return u.array(e)&&0===e.length},u.arraylike=function(e){return!!e&&!u.boolean(e)&&r.call(e,"length")&&isFinite(e.length)&&u.number(e.length)&&e.length>=0},u.boolean=function(e){return"[object Boolean]"===i.call(e)},u["false"]=function(e){return u.boolean(e)&&(e===!1||e.valueOf()===!1)},u["true"]=function(e){return u.boolean(e)&&(e===!0||e.valueOf()===!0)},u.date=function(e){return"[object Date]"===i.call(e)},u.element=function(e){return void 0!==e&&"undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&1===e.nodeType},u.error=function(e){return"[object Error]"===i.call(e)},u.fn=u["function"]=function(e){var t="undefined"!=typeof window&&e===window.alert;return t||"[object Function]"===i.call(e)},u.number=function(e){return"[object Number]"===i.call(e)},u.infinite=function(e){return 1/0===e||e===-1/0},u.decimal=function(e){return u.number(e)&&!s(e)&&!u.infinite(e)&&0!==e%1},u.divisibleBy=function(e,t){var n=u.infinite(e),r=u.infinite(t),i=u.number(e)&&!s(e)&&u.number(t)&&!s(t)&&0!==t;return n||r||i&&0===e%t},u.int=function(e){return u.number(e)&&!s(e)&&0===e%1},u.maximum=function(e,t){if(s(e))throw new TypeError("NaN is not a valid value");if(!u.arraylike(t))throw new TypeError("second argument must be array-like");for(var n=t.length;--n>=0;)if(t[n]>e)return!1;return!0},u.minimum=function(e,t){if(s(e))throw new TypeError("NaN is not a valid value");if(!u.arraylike(t))throw new TypeError("second argument must be array-like");for(var n=t.length;--n>=0;)if(e>t[n])return!1;return!0},u.nan=function(e){return!u.number(e)||e!==e},u.even=function(e){return u.infinite(e)||u.number(e)&&e===e&&0===e%2},u.odd=function(e){return u.infinite(e)||u.number(e)&&e===e&&0!==e%2},u.ge=function(e,t){if(s(e)||s(t))throw new TypeError("NaN is not a valid value");return!u.infinite(e)&&!u.infinite(t)&&e>=t},u.gt=function(e,t){if(s(e)||s(t))throw new TypeError("NaN is not a valid value");return!u.infinite(e)&&!u.infinite(t)&&e>t},u.le=function(e,t){if(s(e)||s(t))throw new TypeError("NaN is not a valid value");return!u.infinite(e)&&!u.infinite(t)&&t>=e},u.lt=function(e,t){if(s(e)||s(t))throw new TypeError("NaN is not a valid value");return!u.infinite(e)&&!u.infinite(t)&&t>e},u.within=function(e,t,n){if(s(e)||s(t)||s(n))throw new TypeError("NaN is not a valid value");if(!u.number(e)||!u.number(t)||!u.number(n))throw new TypeError("all arguments must be numbers");var r=u.infinite(e)||u.infinite(t)||u.infinite(n);return r||e>=t&&n>=e},u.object=function(e){return e&&"[object Object]"===i.call(e)},u.hash=function(e){return u.object(e)&&e.constructor===Object&&!e.nodeType&&!e.setInterval},u.regexp=function(e){return"[object RegExp]"===i.call(e)},u.string=function(e){return"[object String]"===i.call(e)}},{}],10:[function(e,t){var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString;t.exports=function(e,t,i){if("[object Function]"!==r.call(t))throw new TypeError("iterator must be a function");var s=e.length;if(s===+s)for(var o=0;s>o;o++)t.call(i,e[o],o,e);else for(var u in e)n.call(e,u)&&t.call(i,e[u],u,e)}},{}]},{},[1])(1)}),define("app/services/osm/core",["osmauth"],function(e){var t=e({oauth_consumer_key:"odmQFDLgsfm7UB3GlCIpGV6Q8eX6ZlSqNlxrTT6M",oauth_secret:"NLHjFqxVtYfNWqA1Ayilsf47Et9uqppFPvDJtCzu",url:"https://www.openstreetmap.org",landing:IS_PRODUCTION?"land.html":"lib/osmauth.land.html"});return{getInstance:function(){return t}}}),define("app/services/osm/changeset",["./core"],function(e){var t="/api/0.6/changeset/create",n=e.getInstance(),r=null,i=window.localStorage&&window.localStorage.changesetIdDate?new Date(JSON.parse(window.localStorage.changesetIdDate)):null;return{invalidateChangeset:function(){r=null,i=null},getChangeset:function(e){r?e(r):i&&new Date-i<36e5?(r=+window.localStorage.changesetId,e(r)):n.xhr({method:"PUT",path:t,options:{header:{"Content-Type":"text/xml"}},content:'<osm>    <changeset>        <tag k="created_by" v="places-of-worship '+VERSION+'"/>'+'        <tag k="comment" v="Adding religion information"/>'+"    </changeset>"+"</osm>"},function(t,n){if(t){console.log("Error creating changeset",t);return}window.localStorage&&(window.localStorage.changesetId=n,window.localStorage.changesetIdDate=JSON.stringify(new Date)),r=+n,e(r)})}}}),define("app/services/osm/actions",["./core","./changeset","../../ui","../../util"],function(e,t,n,r){function o(n,i){var u=s.replace("TYPE",n.type).replace("ID",n.id);t.getChangeset(function(s){e.getInstance().xhr({method:"GET",path:u},function(a,f){var l,c;if(a){console.log("Error getting entry",a);return}l=$($.parseXML(r.serializeXml(f))),c=l.find("node");if(c.find('tag[k="religion"]').length){console.log("Error: Dying early, a religion is already specified for given entry",l);return}c.removeAttr("timestamp"),c.removeAttr("user"),c.removeAttr("uid"),c.attr("changeset",s),c.append('<tag k="religion" v="'+i+'"/>'),e.getInstance().xhr({method:"PUT",path:u,options:{header:{"Content-Type":"text/xml"}},content:r.serializeXml(l.get(0))},function(e,r){if(e){console.log("Error posting updated entry",e),e.status===409&&(console.log("Changeset dead, creating new one & retrying"),t.invalidateChangeset(),o(n,i));return}console.log("updated successfully!",r)})})})}var i="https://www.openstreetmap.org/TYPE/ID",s="/api/0.6/TYPE/ID";return{authenticate:function(t){e.getInstance().authenticate(function(){n.showOsmLoggedIn(),t.apply(null,arguments)})},logout:e.getInstance().logout,isAuthenticated:e.getInstance().authenticated,addReligionToPlace:o,makeLinkToPlace:function(e){return i.replace("TYPE",e.type).replace("ID",e.id)}}}),define("app/renderer/markers",["leaflet","./core","./control","../ui","../util","../services/osm/actions"],function(e,t,n,r,i,s){function h(t,p){t.forEach(function(t){var d=t.name,v=t.name==="unknown",m=t.places,g=[],y=[],b=i.getColor(t.name);m.forEach(function(a){var m,w,E;E=a.lat+""+a.lng;if(p||!c[d]||c[d].places.indexOf(E)===-1&&l.indexOf(E)===-1)m=e.circleMarker(e.latLng(a.lat,a.lng),{color:b,fill:!0,fillColor:b,fillOpacity:.8}),m.bindPopup(o),m.once("click",function(){var e=this,o='<div class="name">'+a.name+"</div>"+"<div><div>"+i.prettifyReligionName(t.name)+'</div><div><a target="_blank" href="'+u.replace("TYPE",a.type).replace("ID",a.id)+'">View/edit on OpenStreetMap</a></div></div>';v&&(w="religionSelect"+f++,o+='<div class="no-data">We don\'t have data about what religion is associated with this place of worship. Do you know?<div class="options">'+i.generateReligionSelect(w)+'<button id="submit'+w+'">Submit</button>'+"</div>","</div>"),e.getPopup().setContent(o);if(v){function p(){$("#submit"+w).click(function(){function i(){e.closePopup(),c[d].group.removeLayer(e),c[d].places.splice(c[d].places.indexOf(E),1),l.push(E),h([{name:t,places:[a]}],!0),n.update(c)}var t=$("#"+w).val();if(!t)return;s.isAuthenticated()?(s.addReligionToPlace(a,t),i()):r.alert({title:"First things first",html:!0,text:"<div class=\"osm-detail\"><p>Religion information is stored in OpenStreetMap. After clicking the button below, you'll be brought to a screen where you can login (or create an account) and authorize Places of Worship to make edits on your behalf.</p><p>Only changes that you explicitly initiate&mdash;updates to the religion of a particular location&mdash;will be made, and you can revoke access at any time.</p><p>By updating the data on OpenStreetMap, you'll be contributing not only to the visualization, but also to the countless other services and tools powered by OpenStreetMap.</p>",showCancelButton:!0,type:"info",confirmButtonText:"Show authorization screen",cancelButtonText:"Never mind"},function(e){e&&s.authenticate(function(){s.addReligionToPlace(a,t),i()})})})}p(),e.on("popupopen",p)}}),y.push(E),g.push(m)}),c[d]?(g.forEach(function(e){c[d].group.addLayer(e)}),c[d].places=c[d].places.concat(y)):c[d]={color:b,places:y,group:e.featureGroup(g).addTo(a)}})}var o='<span class="popup-loading">Loading details...</span>',u="https://www.openstreetmap.org/TYPE/ID",a=t.getMap(),f=0,l=[],c={};return{getGroups:function(){return c},update:h}}),define("app/renderer/purge",["leaflet","./core","./markers","./control"],function(e,t,n,r){function u(){var t=n.getGroups(),i=e.circle(o.getCenter(),s,{opacity:0}).addTo(o),u=i.getBounds().extend(o.getBounds());o.removeLayer(i),$.each(t,function(e,t){var n=t.group;n.eachLayer(function(e){var r=e.getLatLng();u.contains(r)||(n.removeLayer(e),t.places.splice(t.places.indexOf(r.lat+""+r.lng),1))}),n._layers&&Object.keys(n._layers).length===0&&(o.removeLayer(n),r.getControl().removeLayer(n),r.update())})}var i=5e3,s=1e5,o=t.getMap();return{purge:u,startAutoPurge:function(){setTimeout(u,i)}}}),define("app/renderer/main",["./core","./markers","./control","./purge","../ui","../util"],function(e,t,n,r,i,s){function a(e){t.update(e),n.update(t.getGroups())}function f(){u.on("move drag",s.debounce(function(){i.updateState(u.getCenter(),Math.floor(u.getZoom()))},100)),u.on("moveend",s.debounce(function(){e.lookup(u.getBounds(),a)},50))}function l(t,n){u.flyTo(t,n||12),o&&(f(),i.firstRenderStart()),e.lookup(t,function(e){a(e),o&&(i.firstRenderEnd(),o=!1)})}var o=!0,u=e.getMap();return{renderAtLatLng:l,purge:r.purge,init:function(){i.addRenderHandler(l),r.startAutoPurge()},update:a}}),define("app/services/analytics",[],function(){var e;return IS_PRODUCTION||(ga=function(){console.log.apply(console,arguments)}),e={locationSelected:function(e){ga("send","event",{eventCategory:"Interactions",eventAction:"Location selected",eventLabel:e})}},{send:function(t,n){e[t]&&e[t](n)}}}),define("app/interactions",["jquery","./renderer/main","./map","./ui","./services/analytics"],function(e,t,n,r,i){function o(){s=!0,e("#geolocate").click(function(){return r.progress.start(),n.geolocate(function(e,n){e||t.renderAtLatLng(n)}),!1}),n.addHandler("locationSelected",function(e){i.send("locationSelected",e.properties.name),t.renderAtLatLng([e.geometry.coordinates[1],e.geometry.coordinates[0]])}),n.getMap().on("dblclick",function(e){t.renderAtLatLng(e.latlng)})}var s=!1;return{enable:o}}),define("app/services/osm/main",["../../ui","./actions"],function(e,t){function r(){n=!0,e.addOsmLogoutClickHandler(function(){t.logout()}),t.isAuthenticated()&&e.showOsmLoggedIn()}var n=!1;return{init:function(){n||r()}}}),define("app/main",["./map","./interactions","./ui","./services/osm/main","./renderer/main"],function(e,t,n,r,i){e.init(),t.enable(),i.init(),r.init(),n.setupFlyMapOnHashChange()}),requirejs.config({baseUrl:"lib",paths:{app:"../app"},shim:{leaflet:{exports:"L"},"leaflet.photon":{deps:["leaflet"]},"jquery.tooltipster":{deps:["jquery"]}}}),requirejs(["app/main"]),define("app",function(){});